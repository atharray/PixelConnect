(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();function nu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ru={exports:{}},To={},ou={exports:{}},Y={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pr=Symbol.for("react.element"),Hd=Symbol.for("react.portal"),Wd=Symbol.for("react.fragment"),Vd=Symbol.for("react.strict_mode"),Gd=Symbol.for("react.profiler"),Yd=Symbol.for("react.provider"),Xd=Symbol.for("react.context"),Kd=Symbol.for("react.forward_ref"),Qd=Symbol.for("react.suspense"),Zd=Symbol.for("react.memo"),Jd=Symbol.for("react.lazy"),Ta=Symbol.iterator;function qd(e){return e===null||typeof e!="object"?null:(e=Ta&&e[Ta]||e["@@iterator"],typeof e=="function"?e:null)}var lu={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},su=Object.assign,au={};function $n(e,t,n){this.props=e,this.context=t,this.refs=au,this.updater=n||lu}$n.prototype.isReactComponent={};$n.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$n.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function iu(){}iu.prototype=$n.prototype;function Fs(e,t,n){this.props=e,this.context=t,this.refs=au,this.updater=n||lu}var Rs=Fs.prototype=new iu;Rs.constructor=Fs;su(Rs,$n.prototype);Rs.isPureReactComponent=!0;var Oa=Array.isArray,uu=Object.prototype.hasOwnProperty,_s={current:null},cu={key:!0,ref:!0,__self:!0,__source:!0};function du(e,t,n){var r,o={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)uu.call(t,r)&&!cu.hasOwnProperty(r)&&(o[r]=t[r]);var i=arguments.length-2;if(i===1)o.children=n;else if(1<i){for(var u=Array(i),c=0;c<i;c++)u[c]=arguments[c+2];o.children=u}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)o[r]===void 0&&(o[r]=i[r]);return{$$typeof:Pr,type:e,key:l,ref:a,props:o,_owner:_s.current}}function ef(e,t){return{$$typeof:Pr,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Ts(e){return typeof e=="object"&&e!==null&&e.$$typeof===Pr}function tf(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Aa=/\/+/g;function al(e,t){return typeof e=="object"&&e!==null&&e.key!=null?tf(""+e.key):t.toString(36)}function eo(e,t,n,r,o){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case Pr:case Hd:a=!0}}if(a)return a=e,o=o(a),e=r===""?"."+al(a,0):r,Oa(o)?(n="",e!=null&&(n=e.replace(Aa,"$&/")+"/"),eo(o,t,n,"",function(c){return c})):o!=null&&(Ts(o)&&(o=ef(o,n+(!o.key||a&&a.key===o.key?"":(""+o.key).replace(Aa,"$&/")+"/")+e)),t.push(o)),1;if(a=0,r=r===""?".":r+":",Oa(e))for(var i=0;i<e.length;i++){l=e[i];var u=r+al(l,i);a+=eo(l,t,n,u,o)}else if(u=qd(e),typeof u=="function")for(e=u.call(e),i=0;!(l=e.next()).done;)l=l.value,u=r+al(l,i++),a+=eo(l,t,n,u,o);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function _r(e,t,n){if(e==null)return e;var r=[],o=0;return eo(e,r,"","",function(l){return t.call(n,l,o++)}),r}function nf(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var De={current:null},to={transition:null},rf={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:to,ReactCurrentOwner:_s};function fu(){throw Error("act(...) is not supported in production builds of React.")}Y.Children={map:_r,forEach:function(e,t,n){_r(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return _r(e,function(){t++}),t},toArray:function(e){return _r(e,function(t){return t})||[]},only:function(e){if(!Ts(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Y.Component=$n;Y.Fragment=Wd;Y.Profiler=Gd;Y.PureComponent=Fs;Y.StrictMode=Vd;Y.Suspense=Qd;Y.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rf;Y.act=fu;Y.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=su({},e.props),o=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=_s.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(u in t)uu.call(t,u)&&!cu.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&i!==void 0?i[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){i=Array(u);for(var c=0;c<u;c++)i[c]=arguments[c+2];r.children=i}return{$$typeof:Pr,type:e.type,key:o,ref:l,props:r,_owner:a}};Y.createContext=function(e){return e={$$typeof:Xd,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Yd,_context:e},e.Consumer=e};Y.createElement=du;Y.createFactory=function(e){var t=du.bind(null,e);return t.type=e,t};Y.createRef=function(){return{current:null}};Y.forwardRef=function(e){return{$$typeof:Kd,render:e}};Y.isValidElement=Ts;Y.lazy=function(e){return{$$typeof:Jd,_payload:{_status:-1,_result:e},_init:nf}};Y.memo=function(e,t){return{$$typeof:Zd,type:e,compare:t===void 0?null:t}};Y.startTransition=function(e){var t=to.transition;to.transition={};try{e()}finally{to.transition=t}};Y.unstable_act=fu;Y.useCallback=function(e,t){return De.current.useCallback(e,t)};Y.useContext=function(e){return De.current.useContext(e)};Y.useDebugValue=function(){};Y.useDeferredValue=function(e){return De.current.useDeferredValue(e)};Y.useEffect=function(e,t){return De.current.useEffect(e,t)};Y.useId=function(){return De.current.useId()};Y.useImperativeHandle=function(e,t,n){return De.current.useImperativeHandle(e,t,n)};Y.useInsertionEffect=function(e,t){return De.current.useInsertionEffect(e,t)};Y.useLayoutEffect=function(e,t){return De.current.useLayoutEffect(e,t)};Y.useMemo=function(e,t){return De.current.useMemo(e,t)};Y.useReducer=function(e,t,n){return De.current.useReducer(e,t,n)};Y.useRef=function(e){return De.current.useRef(e)};Y.useState=function(e){return De.current.useState(e)};Y.useSyncExternalStore=function(e,t,n){return De.current.useSyncExternalStore(e,t,n)};Y.useTransition=function(){return De.current.useTransition()};Y.version="18.3.1";ou.exports=Y;var S=ou.exports;const pu=nu(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var of=S,lf=Symbol.for("react.element"),sf=Symbol.for("react.fragment"),af=Object.prototype.hasOwnProperty,uf=of.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,cf={key:!0,ref:!0,__self:!0,__source:!0};function gu(e,t,n){var r,o={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)af.call(t,r)&&!cf.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:lf,type:e,key:l,ref:a,props:o,_owner:uf.current}}To.Fragment=sf;To.jsx=gu;To.jsxs=gu;ru.exports=To;var s=ru.exports,Ol={},hu={exports:{}},$e={},mu={exports:{}},yu={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(k,I){var z=k.length;k.push(I);e:for(;0<z;){var W=z-1>>>1,X=k[W];if(0<o(X,I))k[W]=I,k[z]=X,z=W;else break e}}function n(k){return k.length===0?null:k[0]}function r(k){if(k.length===0)return null;var I=k[0],z=k.pop();if(z!==I){k[0]=z;e:for(var W=0,X=k.length,ie=X>>>1;W<ie;){var ye=2*(W+1)-1,ot=k[ye],xe=ye+1,He=k[xe];if(0>o(ot,z))xe<X&&0>o(He,ot)?(k[W]=He,k[xe]=z,W=xe):(k[W]=ot,k[ye]=z,W=ye);else if(xe<X&&0>o(He,z))k[W]=He,k[xe]=z,W=xe;else break e}}return I}function o(k,I){var z=k.sortIndex-I.sortIndex;return z!==0?z:k.id-I.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,i=a.now();e.unstable_now=function(){return a.now()-i}}var u=[],c=[],d=1,f=null,p=3,x=!1,y=!1,N=!1,D=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(k){for(var I=n(c);I!==null;){if(I.callback===null)r(c);else if(I.startTime<=k)r(c),I.sortIndex=I.expirationTime,t(u,I);else break;I=n(c)}}function w(k){if(N=!1,m(k),!y)if(n(u)!==null)y=!0,_(C);else{var I=n(c);I!==null&&H(w,I.startTime-k)}}function C(k,I){y=!1,N&&(N=!1,h(E),E=-1),x=!0;var z=p;try{for(m(I),f=n(u);f!==null&&(!(f.expirationTime>I)||k&&!$());){var W=f.callback;if(typeof W=="function"){f.callback=null,p=f.priorityLevel;var X=W(f.expirationTime<=I);I=e.unstable_now(),typeof X=="function"?f.callback=X:f===n(u)&&r(u),m(I)}else r(u);f=n(u)}if(f!==null)var ie=!0;else{var ye=n(c);ye!==null&&H(w,ye.startTime-I),ie=!1}return ie}finally{f=null,p=z,x=!1}}var L=!1,v=null,E=-1,O=5,P=-1;function $(){return!(e.unstable_now()-P<O)}function V(){if(v!==null){var k=e.unstable_now();P=k;var I=!0;try{I=v(!0,k)}finally{I?A():(L=!1,v=null)}}else L=!1}var A;if(typeof g=="function")A=function(){g(V)};else if(typeof MessageChannel<"u"){var T=new MessageChannel,j=T.port2;T.port1.onmessage=V,A=function(){j.postMessage(null)}}else A=function(){D(V,0)};function _(k){v=k,L||(L=!0,A())}function H(k,I){E=D(function(){k(e.unstable_now())},I)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(k){k.callback=null},e.unstable_continueExecution=function(){y||x||(y=!0,_(C))},e.unstable_forceFrameRate=function(k){0>k||125<k?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<k?Math.floor(1e3/k):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(k){switch(p){case 1:case 2:case 3:var I=3;break;default:I=p}var z=p;p=I;try{return k()}finally{p=z}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(k,I){switch(k){case 1:case 2:case 3:case 4:case 5:break;default:k=3}var z=p;p=k;try{return I()}finally{p=z}},e.unstable_scheduleCallback=function(k,I,z){var W=e.unstable_now();switch(typeof z=="object"&&z!==null?(z=z.delay,z=typeof z=="number"&&0<z?W+z:W):z=W,k){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=z+X,k={id:d++,callback:I,priorityLevel:k,startTime:z,expirationTime:X,sortIndex:-1},z>W?(k.sortIndex=z,t(c,k),n(u)===null&&k===n(c)&&(N?(h(E),E=-1):N=!0,H(w,z-W))):(k.sortIndex=X,t(u,k),y||x||(y=!0,_(C))),k},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(k){var I=p;return function(){var z=p;p=I;try{return k.apply(this,arguments)}finally{p=z}}}})(yu);mu.exports=yu;var df=mu.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ff=S,Be=df;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xu=new Set,pr={};function on(e,t){Mn(e,t),Mn(e+"Capture",t)}function Mn(e,t){for(pr[e]=t,e=0;e<t.length;e++)xu.add(t[e])}var xt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Al=Object.prototype.hasOwnProperty,pf=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ba={},$a={};function gf(e){return Al.call($a,e)?!0:Al.call(Ba,e)?!1:pf.test(e)?$a[e]=!0:(Ba[e]=!0,!1)}function hf(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function mf(e,t,n,r){if(t===null||typeof t>"u"||hf(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Pe(e,t,n,r,o,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var je={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){je[e]=new Pe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];je[t]=new Pe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){je[e]=new Pe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){je[e]=new Pe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){je[e]=new Pe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){je[e]=new Pe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){je[e]=new Pe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){je[e]=new Pe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){je[e]=new Pe(e,5,!1,e.toLowerCase(),null,!1,!1)});var Os=/[\-:]([a-z])/g;function As(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Os,As);je[t]=new Pe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Os,As);je[t]=new Pe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Os,As);je[t]=new Pe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){je[e]=new Pe(e,1,!1,e.toLowerCase(),null,!1,!1)});je.xlinkHref=new Pe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){je[e]=new Pe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Bs(e,t,n,r){var o=je.hasOwnProperty(t)?je[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(mf(t,n,o,r)&&(n=null),r||o===null?gf(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var St=ff.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tr=Symbol.for("react.element"),gn=Symbol.for("react.portal"),hn=Symbol.for("react.fragment"),$s=Symbol.for("react.strict_mode"),Bl=Symbol.for("react.profiler"),vu=Symbol.for("react.provider"),wu=Symbol.for("react.context"),Us=Symbol.for("react.forward_ref"),$l=Symbol.for("react.suspense"),Ul=Symbol.for("react.suspense_list"),Hs=Symbol.for("react.memo"),bt=Symbol.for("react.lazy"),ju=Symbol.for("react.offscreen"),Ua=Symbol.iterator;function Gn(e){return e===null||typeof e!="object"?null:(e=Ua&&e[Ua]||e["@@iterator"],typeof e=="function"?e:null)}var ae=Object.assign,il;function er(e){if(il===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);il=t&&t[1]||""}return`
`+il+e}var ul=!1;function cl(e,t){if(!e||ul)return"";ul=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),l=r.stack.split(`
`),a=o.length-1,i=l.length-1;1<=a&&0<=i&&o[a]!==l[i];)i--;for(;1<=a&&0<=i;a--,i--)if(o[a]!==l[i]){if(a!==1||i!==1)do if(a--,i--,0>i||o[a]!==l[i]){var u=`
`+o[a].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=a&&0<=i);break}}}finally{ul=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?er(e):""}function yf(e){switch(e.tag){case 5:return er(e.type);case 16:return er("Lazy");case 13:return er("Suspense");case 19:return er("SuspenseList");case 0:case 2:case 15:return e=cl(e.type,!1),e;case 11:return e=cl(e.type.render,!1),e;case 1:return e=cl(e.type,!0),e;default:return""}}function Hl(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case hn:return"Fragment";case gn:return"Portal";case Bl:return"Profiler";case $s:return"StrictMode";case $l:return"Suspense";case Ul:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wu:return(e.displayName||"Context")+".Consumer";case vu:return(e._context.displayName||"Context")+".Provider";case Us:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Hs:return t=e.displayName||null,t!==null?t:Hl(e.type)||"Memo";case bt:t=e._payload,e=e._init;try{return Hl(e(t))}catch{}}return null}function xf(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Hl(t);case 8:return t===$s?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bt(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Su(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vf(e){var t=Su(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Or(e){e._valueTracker||(e._valueTracker=vf(e))}function Nu(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Su(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function po(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Wl(e,t){var n=t.checked;return ae({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Ha(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Bt(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ku(e,t){t=t.checked,t!=null&&Bs(e,"checked",t,!1)}function Vl(e,t){ku(e,t);var n=Bt(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Gl(e,t.type,n):t.hasOwnProperty("defaultValue")&&Gl(e,t.type,Bt(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Wa(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Gl(e,t,n){(t!=="number"||po(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var tr=Array.isArray;function bn(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Bt(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function Yl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return ae({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Va(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(M(92));if(tr(n)){if(1<n.length)throw Error(M(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Bt(n)}}function Cu(e,t){var n=Bt(t.value),r=Bt(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Ga(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function bu(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Xl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?bu(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ar,Eu=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ar=Ar||document.createElement("div"),Ar.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ar.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function gr(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var or={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wf=["Webkit","ms","Moz","O"];Object.keys(or).forEach(function(e){wf.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),or[t]=or[e]})});function Lu(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||or.hasOwnProperty(e)&&or[e]?(""+t).trim():t+"px"}function Du(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Lu(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var jf=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kl(e,t){if(t){if(jf[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function Ql(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zl=null;function Ws(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Jl=null,En=null,Ln=null;function Ya(e){if(e=zr(e)){if(typeof Jl!="function")throw Error(M(280));var t=e.stateNode;t&&(t=Uo(t),Jl(e.stateNode,e.type,t))}}function Pu(e){En?Ln?Ln.push(e):Ln=[e]:En=e}function Iu(){if(En){var e=En,t=Ln;if(Ln=En=null,Ya(e),t)for(e=0;e<t.length;e++)Ya(t[e])}}function Mu(e,t){return e(t)}function zu(){}var dl=!1;function Fu(e,t,n){if(dl)return e(t,n);dl=!0;try{return Mu(e,t,n)}finally{dl=!1,(En!==null||Ln!==null)&&(zu(),Iu())}}function hr(e,t){var n=e.stateNode;if(n===null)return null;var r=Uo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(M(231,t,typeof n));return n}var ql=!1;if(xt)try{var Yn={};Object.defineProperty(Yn,"passive",{get:function(){ql=!0}}),window.addEventListener("test",Yn,Yn),window.removeEventListener("test",Yn,Yn)}catch{ql=!1}function Sf(e,t,n,r,o,l,a,i,u){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var lr=!1,go=null,ho=!1,es=null,Nf={onError:function(e){lr=!0,go=e}};function kf(e,t,n,r,o,l,a,i,u){lr=!1,go=null,Sf.apply(Nf,arguments)}function Cf(e,t,n,r,o,l,a,i,u){if(kf.apply(this,arguments),lr){if(lr){var c=go;lr=!1,go=null}else throw Error(M(198));ho||(ho=!0,es=c)}}function ln(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ru(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xa(e){if(ln(e)!==e)throw Error(M(188))}function bf(e){var t=e.alternate;if(!t){if(t=ln(e),t===null)throw Error(M(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var l=o.alternate;if(l===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===l.child){for(l=o.child;l;){if(l===n)return Xa(o),e;if(l===r)return Xa(o),t;l=l.sibling}throw Error(M(188))}if(n.return!==r.return)n=o,r=l;else{for(var a=!1,i=o.child;i;){if(i===n){a=!0,n=o,r=l;break}if(i===r){a=!0,r=o,n=l;break}i=i.sibling}if(!a){for(i=l.child;i;){if(i===n){a=!0,n=l,r=o;break}if(i===r){a=!0,r=l,n=o;break}i=i.sibling}if(!a)throw Error(M(189))}}if(n.alternate!==r)throw Error(M(190))}if(n.tag!==3)throw Error(M(188));return n.stateNode.current===n?e:t}function _u(e){return e=bf(e),e!==null?Tu(e):null}function Tu(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Tu(e);if(t!==null)return t;e=e.sibling}return null}var Ou=Be.unstable_scheduleCallback,Ka=Be.unstable_cancelCallback,Ef=Be.unstable_shouldYield,Lf=Be.unstable_requestPaint,ce=Be.unstable_now,Df=Be.unstable_getCurrentPriorityLevel,Vs=Be.unstable_ImmediatePriority,Au=Be.unstable_UserBlockingPriority,mo=Be.unstable_NormalPriority,Pf=Be.unstable_LowPriority,Bu=Be.unstable_IdlePriority,Oo=null,it=null;function If(e){if(it&&typeof it.onCommitFiberRoot=="function")try{it.onCommitFiberRoot(Oo,e,void 0,(e.current.flags&128)===128)}catch{}}var tt=Math.clz32?Math.clz32:Ff,Mf=Math.log,zf=Math.LN2;function Ff(e){return e>>>=0,e===0?32:31-(Mf(e)/zf|0)|0}var Br=64,$r=4194304;function nr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yo(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var i=a&~o;i!==0?r=nr(i):(l&=a,l!==0&&(r=nr(l)))}else a=n&~o,a!==0?r=nr(a):l!==0&&(r=nr(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,l=t&-t,o>=l||o===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-tt(t),o=1<<n,r|=e[n],t&=~o;return r}function Rf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function _f(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-tt(l),i=1<<a,u=o[a];u===-1?(!(i&n)||i&r)&&(o[a]=Rf(i,t)):u<=t&&(e.expiredLanes|=i),l&=~i}}function ts(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $u(){var e=Br;return Br<<=1,!(Br&4194240)&&(Br=64),e}function fl(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Ir(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-tt(t),e[t]=n}function Tf(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-tt(n),l=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~l}}function Gs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-tt(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var Z=0;function Uu(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Hu,Ys,Wu,Vu,Gu,ns=!1,Ur=[],Mt=null,zt=null,Ft=null,mr=new Map,yr=new Map,Lt=[],Of="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Qa(e,t){switch(e){case"focusin":case"focusout":Mt=null;break;case"dragenter":case"dragleave":zt=null;break;case"mouseover":case"mouseout":Ft=null;break;case"pointerover":case"pointerout":mr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":yr.delete(t.pointerId)}}function Xn(e,t,n,r,o,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[o]},t!==null&&(t=zr(t),t!==null&&Ys(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function Af(e,t,n,r,o){switch(t){case"focusin":return Mt=Xn(Mt,e,t,n,r,o),!0;case"dragenter":return zt=Xn(zt,e,t,n,r,o),!0;case"mouseover":return Ft=Xn(Ft,e,t,n,r,o),!0;case"pointerover":var l=o.pointerId;return mr.set(l,Xn(mr.get(l)||null,e,t,n,r,o)),!0;case"gotpointercapture":return l=o.pointerId,yr.set(l,Xn(yr.get(l)||null,e,t,n,r,o)),!0}return!1}function Yu(e){var t=Xt(e.target);if(t!==null){var n=ln(t);if(n!==null){if(t=n.tag,t===13){if(t=Ru(n),t!==null){e.blockedOn=t,Gu(e.priority,function(){Wu(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function no(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=rs(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Zl=r,n.target.dispatchEvent(r),Zl=null}else return t=zr(n),t!==null&&Ys(t),e.blockedOn=n,!1;t.shift()}return!0}function Za(e,t,n){no(e)&&n.delete(t)}function Bf(){ns=!1,Mt!==null&&no(Mt)&&(Mt=null),zt!==null&&no(zt)&&(zt=null),Ft!==null&&no(Ft)&&(Ft=null),mr.forEach(Za),yr.forEach(Za)}function Kn(e,t){e.blockedOn===t&&(e.blockedOn=null,ns||(ns=!0,Be.unstable_scheduleCallback(Be.unstable_NormalPriority,Bf)))}function xr(e){function t(o){return Kn(o,e)}if(0<Ur.length){Kn(Ur[0],e);for(var n=1;n<Ur.length;n++){var r=Ur[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Mt!==null&&Kn(Mt,e),zt!==null&&Kn(zt,e),Ft!==null&&Kn(Ft,e),mr.forEach(t),yr.forEach(t),n=0;n<Lt.length;n++)r=Lt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Lt.length&&(n=Lt[0],n.blockedOn===null);)Yu(n),n.blockedOn===null&&Lt.shift()}var Dn=St.ReactCurrentBatchConfig,xo=!0;function $f(e,t,n,r){var o=Z,l=Dn.transition;Dn.transition=null;try{Z=1,Xs(e,t,n,r)}finally{Z=o,Dn.transition=l}}function Uf(e,t,n,r){var o=Z,l=Dn.transition;Dn.transition=null;try{Z=4,Xs(e,t,n,r)}finally{Z=o,Dn.transition=l}}function Xs(e,t,n,r){if(xo){var o=rs(e,t,n,r);if(o===null)Sl(e,t,r,vo,n),Qa(e,r);else if(Af(o,e,t,n,r))r.stopPropagation();else if(Qa(e,r),t&4&&-1<Of.indexOf(e)){for(;o!==null;){var l=zr(o);if(l!==null&&Hu(l),l=rs(e,t,n,r),l===null&&Sl(e,t,r,vo,n),l===o)break;o=l}o!==null&&r.stopPropagation()}else Sl(e,t,r,null,n)}}var vo=null;function rs(e,t,n,r){if(vo=null,e=Ws(r),e=Xt(e),e!==null)if(t=ln(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ru(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vo=e,null}function Xu(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Df()){case Vs:return 1;case Au:return 4;case mo:case Pf:return 16;case Bu:return 536870912;default:return 16}default:return 16}}var Pt=null,Ks=null,ro=null;function Ku(){if(ro)return ro;var e,t=Ks,n=t.length,r,o="value"in Pt?Pt.value:Pt.textContent,l=o.length;for(e=0;e<n&&t[e]===o[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===o[l-r];r++);return ro=o.slice(e,1<r?1-r:void 0)}function oo(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hr(){return!0}function Ja(){return!1}function Ue(e){function t(n,r,o,l,a){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(l):l[i]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Hr:Ja,this.isPropagationStopped=Ja,this}return ae(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hr)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hr)},persist:function(){},isPersistent:Hr}),t}var Un={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Qs=Ue(Un),Mr=ae({},Un,{view:0,detail:0}),Hf=Ue(Mr),pl,gl,Qn,Ao=ae({},Mr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Zs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qn&&(Qn&&e.type==="mousemove"?(pl=e.screenX-Qn.screenX,gl=e.screenY-Qn.screenY):gl=pl=0,Qn=e),pl)},movementY:function(e){return"movementY"in e?e.movementY:gl}}),qa=Ue(Ao),Wf=ae({},Ao,{dataTransfer:0}),Vf=Ue(Wf),Gf=ae({},Mr,{relatedTarget:0}),hl=Ue(Gf),Yf=ae({},Un,{animationName:0,elapsedTime:0,pseudoElement:0}),Xf=Ue(Yf),Kf=ae({},Un,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Qf=Ue(Kf),Zf=ae({},Un,{data:0}),ei=Ue(Zf),Jf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qf={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ep={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tp(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ep[e])?!!t[e]:!1}function Zs(){return tp}var np=ae({},Mr,{key:function(e){if(e.key){var t=Jf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=oo(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qf[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Zs,charCode:function(e){return e.type==="keypress"?oo(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?oo(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),rp=Ue(np),op=ae({},Ao,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ti=Ue(op),lp=ae({},Mr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Zs}),sp=Ue(lp),ap=ae({},Un,{propertyName:0,elapsedTime:0,pseudoElement:0}),ip=Ue(ap),up=ae({},Ao,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),cp=Ue(up),dp=[9,13,27,32],Js=xt&&"CompositionEvent"in window,sr=null;xt&&"documentMode"in document&&(sr=document.documentMode);var fp=xt&&"TextEvent"in window&&!sr,Qu=xt&&(!Js||sr&&8<sr&&11>=sr),ni=" ",ri=!1;function Zu(e,t){switch(e){case"keyup":return dp.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ju(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var mn=!1;function pp(e,t){switch(e){case"compositionend":return Ju(t);case"keypress":return t.which!==32?null:(ri=!0,ni);case"textInput":return e=t.data,e===ni&&ri?null:e;default:return null}}function gp(e,t){if(mn)return e==="compositionend"||!Js&&Zu(e,t)?(e=Ku(),ro=Ks=Pt=null,mn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Qu&&t.locale!=="ko"?null:t.data;default:return null}}var hp={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function oi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!hp[e.type]:t==="textarea"}function qu(e,t,n,r){Pu(r),t=wo(t,"onChange"),0<t.length&&(n=new Qs("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var ar=null,vr=null;function mp(e){cc(e,0)}function Bo(e){var t=vn(e);if(Nu(t))return e}function yp(e,t){if(e==="change")return t}var ec=!1;if(xt){var ml;if(xt){var yl="oninput"in document;if(!yl){var li=document.createElement("div");li.setAttribute("oninput","return;"),yl=typeof li.oninput=="function"}ml=yl}else ml=!1;ec=ml&&(!document.documentMode||9<document.documentMode)}function si(){ar&&(ar.detachEvent("onpropertychange",tc),vr=ar=null)}function tc(e){if(e.propertyName==="value"&&Bo(vr)){var t=[];qu(t,vr,e,Ws(e)),Fu(mp,t)}}function xp(e,t,n){e==="focusin"?(si(),ar=t,vr=n,ar.attachEvent("onpropertychange",tc)):e==="focusout"&&si()}function vp(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Bo(vr)}function wp(e,t){if(e==="click")return Bo(t)}function jp(e,t){if(e==="input"||e==="change")return Bo(t)}function Sp(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var rt=typeof Object.is=="function"?Object.is:Sp;function wr(e,t){if(rt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!Al.call(t,o)||!rt(e[o],t[o]))return!1}return!0}function ai(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ii(e,t){var n=ai(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ai(n)}}function nc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?nc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function rc(){for(var e=window,t=po();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=po(e.document)}return t}function qs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Np(e){var t=rc(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&nc(n.ownerDocument.documentElement,n)){if(r!==null&&qs(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,l=Math.min(r.start,o);r=r.end===void 0?l:Math.min(r.end,o),!e.extend&&l>r&&(o=r,r=l,l=o),o=ii(n,l);var a=ii(n,r);o&&a&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var kp=xt&&"documentMode"in document&&11>=document.documentMode,yn=null,os=null,ir=null,ls=!1;function ui(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ls||yn==null||yn!==po(r)||(r=yn,"selectionStart"in r&&qs(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ir&&wr(ir,r)||(ir=r,r=wo(os,"onSelect"),0<r.length&&(t=new Qs("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yn)))}function Wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xn={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionend:Wr("Transition","TransitionEnd")},xl={},oc={};xt&&(oc=document.createElement("div").style,"AnimationEvent"in window||(delete xn.animationend.animation,delete xn.animationiteration.animation,delete xn.animationstart.animation),"TransitionEvent"in window||delete xn.transitionend.transition);function $o(e){if(xl[e])return xl[e];if(!xn[e])return e;var t=xn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in oc)return xl[e]=t[n];return e}var lc=$o("animationend"),sc=$o("animationiteration"),ac=$o("animationstart"),ic=$o("transitionend"),uc=new Map,ci="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ut(e,t){uc.set(e,t),on(t,[e])}for(var vl=0;vl<ci.length;vl++){var wl=ci[vl],Cp=wl.toLowerCase(),bp=wl[0].toUpperCase()+wl.slice(1);Ut(Cp,"on"+bp)}Ut(lc,"onAnimationEnd");Ut(sc,"onAnimationIteration");Ut(ac,"onAnimationStart");Ut("dblclick","onDoubleClick");Ut("focusin","onFocus");Ut("focusout","onBlur");Ut(ic,"onTransitionEnd");Mn("onMouseEnter",["mouseout","mouseover"]);Mn("onMouseLeave",["mouseout","mouseover"]);Mn("onPointerEnter",["pointerout","pointerover"]);Mn("onPointerLeave",["pointerout","pointerover"]);on("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));on("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));on("onBeforeInput",["compositionend","keypress","textInput","paste"]);on("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));on("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));on("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ep=new Set("cancel close invalid load scroll toggle".split(" ").concat(rr));function di(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Cf(r,t,void 0,e),e.currentTarget=null}function cc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var i=r[a],u=i.instance,c=i.currentTarget;if(i=i.listener,u!==l&&o.isPropagationStopped())break e;di(o,i,c),l=u}else for(a=0;a<r.length;a++){if(i=r[a],u=i.instance,c=i.currentTarget,i=i.listener,u!==l&&o.isPropagationStopped())break e;di(o,i,c),l=u}}}if(ho)throw e=es,ho=!1,es=null,e}function ne(e,t){var n=t[cs];n===void 0&&(n=t[cs]=new Set);var r=e+"__bubble";n.has(r)||(dc(t,e,2,!1),n.add(r))}function jl(e,t,n){var r=0;t&&(r|=4),dc(n,e,r,t)}var Vr="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[Vr]){e[Vr]=!0,xu.forEach(function(n){n!=="selectionchange"&&(Ep.has(n)||jl(n,!1,e),jl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Vr]||(t[Vr]=!0,jl("selectionchange",!1,t))}}function dc(e,t,n,r){switch(Xu(t)){case 1:var o=$f;break;case 4:o=Uf;break;default:o=Xs}n=o.bind(null,t,n,e),o=void 0,!ql||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Sl(e,t,n,r,o){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var i=r.stateNode.containerInfo;if(i===o||i.nodeType===8&&i.parentNode===o)break;if(a===4)for(a=r.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===o||u.nodeType===8&&u.parentNode===o))return;a=a.return}for(;i!==null;){if(a=Xt(i),a===null)return;if(u=a.tag,u===5||u===6){r=l=a;continue e}i=i.parentNode}}r=r.return}Fu(function(){var c=l,d=Ws(n),f=[];e:{var p=uc.get(e);if(p!==void 0){var x=Qs,y=e;switch(e){case"keypress":if(oo(n)===0)break e;case"keydown":case"keyup":x=rp;break;case"focusin":y="focus",x=hl;break;case"focusout":y="blur",x=hl;break;case"beforeblur":case"afterblur":x=hl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=qa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=Vf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=sp;break;case lc:case sc:case ac:x=Xf;break;case ic:x=ip;break;case"scroll":x=Hf;break;case"wheel":x=cp;break;case"copy":case"cut":case"paste":x=Qf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=ti}var N=(t&4)!==0,D=!N&&e==="scroll",h=N?p!==null?p+"Capture":null:p;N=[];for(var g=c,m;g!==null;){m=g;var w=m.stateNode;if(m.tag===5&&w!==null&&(m=w,h!==null&&(w=hr(g,h),w!=null&&N.push(Sr(g,w,m)))),D)break;g=g.return}0<N.length&&(p=new x(p,y,null,n,d),f.push({event:p,listeners:N}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",x=e==="mouseout"||e==="pointerout",p&&n!==Zl&&(y=n.relatedTarget||n.fromElement)&&(Xt(y)||y[vt]))break e;if((x||p)&&(p=d.window===d?d:(p=d.ownerDocument)?p.defaultView||p.parentWindow:window,x?(y=n.relatedTarget||n.toElement,x=c,y=y?Xt(y):null,y!==null&&(D=ln(y),y!==D||y.tag!==5&&y.tag!==6)&&(y=null)):(x=null,y=c),x!==y)){if(N=qa,w="onMouseLeave",h="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(N=ti,w="onPointerLeave",h="onPointerEnter",g="pointer"),D=x==null?p:vn(x),m=y==null?p:vn(y),p=new N(w,g+"leave",x,n,d),p.target=D,p.relatedTarget=m,w=null,Xt(d)===c&&(N=new N(h,g+"enter",y,n,d),N.target=m,N.relatedTarget=D,w=N),D=w,x&&y)t:{for(N=x,h=y,g=0,m=N;m;m=fn(m))g++;for(m=0,w=h;w;w=fn(w))m++;for(;0<g-m;)N=fn(N),g--;for(;0<m-g;)h=fn(h),m--;for(;g--;){if(N===h||h!==null&&N===h.alternate)break t;N=fn(N),h=fn(h)}N=null}else N=null;x!==null&&fi(f,p,x,N,!1),y!==null&&D!==null&&fi(f,D,y,N,!0)}}e:{if(p=c?vn(c):window,x=p.nodeName&&p.nodeName.toLowerCase(),x==="select"||x==="input"&&p.type==="file")var C=yp;else if(oi(p))if(ec)C=jp;else{C=vp;var L=xp}else(x=p.nodeName)&&x.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(C=wp);if(C&&(C=C(e,c))){qu(f,C,n,d);break e}L&&L(e,p,c),e==="focusout"&&(L=p._wrapperState)&&L.controlled&&p.type==="number"&&Gl(p,"number",p.value)}switch(L=c?vn(c):window,e){case"focusin":(oi(L)||L.contentEditable==="true")&&(yn=L,os=c,ir=null);break;case"focusout":ir=os=yn=null;break;case"mousedown":ls=!0;break;case"contextmenu":case"mouseup":case"dragend":ls=!1,ui(f,n,d);break;case"selectionchange":if(kp)break;case"keydown":case"keyup":ui(f,n,d)}var v;if(Js)e:{switch(e){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else mn?Zu(e,n)&&(E="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(Qu&&n.locale!=="ko"&&(mn||E!=="onCompositionStart"?E==="onCompositionEnd"&&mn&&(v=Ku()):(Pt=d,Ks="value"in Pt?Pt.value:Pt.textContent,mn=!0)),L=wo(c,E),0<L.length&&(E=new ei(E,e,null,n,d),f.push({event:E,listeners:L}),v?E.data=v:(v=Ju(n),v!==null&&(E.data=v)))),(v=fp?pp(e,n):gp(e,n))&&(c=wo(c,"onBeforeInput"),0<c.length&&(d=new ei("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=v))}cc(f,t)})}function Sr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function wo(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,l=o.stateNode;o.tag===5&&l!==null&&(o=l,l=hr(e,n),l!=null&&r.unshift(Sr(e,l,o)),l=hr(e,t),l!=null&&r.push(Sr(e,l,o))),e=e.return}return r}function fn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function fi(e,t,n,r,o){for(var l=t._reactName,a=[];n!==null&&n!==r;){var i=n,u=i.alternate,c=i.stateNode;if(u!==null&&u===r)break;i.tag===5&&c!==null&&(i=c,o?(u=hr(n,l),u!=null&&a.unshift(Sr(n,u,i))):o||(u=hr(n,l),u!=null&&a.push(Sr(n,u,i)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var Lp=/\r\n?/g,Dp=/\u0000|\uFFFD/g;function pi(e){return(typeof e=="string"?e:""+e).replace(Lp,`
`).replace(Dp,"")}function Gr(e,t,n){if(t=pi(t),pi(e)!==t&&n)throw Error(M(425))}function jo(){}var ss=null,as=null;function is(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var us=typeof setTimeout=="function"?setTimeout:void 0,Pp=typeof clearTimeout=="function"?clearTimeout:void 0,gi=typeof Promise=="function"?Promise:void 0,Ip=typeof queueMicrotask=="function"?queueMicrotask:typeof gi<"u"?function(e){return gi.resolve(null).then(e).catch(Mp)}:us;function Mp(e){setTimeout(function(){throw e})}function Nl(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),xr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);xr(t)}function Rt(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function hi(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Hn=Math.random().toString(36).slice(2),at="__reactFiber$"+Hn,Nr="__reactProps$"+Hn,vt="__reactContainer$"+Hn,cs="__reactEvents$"+Hn,zp="__reactListeners$"+Hn,Fp="__reactHandles$"+Hn;function Xt(e){var t=e[at];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vt]||n[at]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=hi(e);e!==null;){if(n=e[at])return n;e=hi(e)}return t}e=n,n=e.parentNode}return null}function zr(e){return e=e[at]||e[vt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function vn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function Uo(e){return e[Nr]||null}var ds=[],wn=-1;function Ht(e){return{current:e}}function re(e){0>wn||(e.current=ds[wn],ds[wn]=null,wn--)}function ee(e,t){wn++,ds[wn]=e.current,e.current=t}var $t={},Ce=Ht($t),ze=Ht(!1),qt=$t;function zn(e,t){var n=e.type.contextTypes;if(!n)return $t;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},l;for(l in n)o[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Fe(e){return e=e.childContextTypes,e!=null}function So(){re(ze),re(Ce)}function mi(e,t,n){if(Ce.current!==$t)throw Error(M(168));ee(Ce,t),ee(ze,n)}function fc(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(M(108,xf(e)||"Unknown",o));return ae({},n,r)}function No(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$t,qt=Ce.current,ee(Ce,e),ee(ze,ze.current),!0}function yi(e,t,n){var r=e.stateNode;if(!r)throw Error(M(169));n?(e=fc(e,t,qt),r.__reactInternalMemoizedMergedChildContext=e,re(ze),re(Ce),ee(Ce,e)):re(ze),ee(ze,n)}var gt=null,Ho=!1,kl=!1;function pc(e){gt===null?gt=[e]:gt.push(e)}function Rp(e){Ho=!0,pc(e)}function Wt(){if(!kl&&gt!==null){kl=!0;var e=0,t=Z;try{var n=gt;for(Z=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}gt=null,Ho=!1}catch(o){throw gt!==null&&(gt=gt.slice(e+1)),Ou(Vs,Wt),o}finally{Z=t,kl=!1}}return null}var jn=[],Sn=0,ko=null,Co=0,We=[],Ve=0,en=null,ht=1,mt="";function Gt(e,t){jn[Sn++]=Co,jn[Sn++]=ko,ko=e,Co=t}function gc(e,t,n){We[Ve++]=ht,We[Ve++]=mt,We[Ve++]=en,en=e;var r=ht;e=mt;var o=32-tt(r)-1;r&=~(1<<o),n+=1;var l=32-tt(t)+o;if(30<l){var a=o-o%5;l=(r&(1<<a)-1).toString(32),r>>=a,o-=a,ht=1<<32-tt(t)+o|n<<o|r,mt=l+e}else ht=1<<l|n<<o|r,mt=e}function ea(e){e.return!==null&&(Gt(e,1),gc(e,1,0))}function ta(e){for(;e===ko;)ko=jn[--Sn],jn[Sn]=null,Co=jn[--Sn],jn[Sn]=null;for(;e===en;)en=We[--Ve],We[Ve]=null,mt=We[--Ve],We[Ve]=null,ht=We[--Ve],We[Ve]=null}var Ae=null,Oe=null,oe=!1,et=null;function hc(e,t){var n=Ge(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function xi(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ae=e,Oe=Rt(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ae=e,Oe=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=en!==null?{id:ht,overflow:mt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ge(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ae=e,Oe=null,!0):!1;default:return!1}}function fs(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ps(e){if(oe){var t=Oe;if(t){var n=t;if(!xi(e,t)){if(fs(e))throw Error(M(418));t=Rt(n.nextSibling);var r=Ae;t&&xi(e,t)?hc(r,n):(e.flags=e.flags&-4097|2,oe=!1,Ae=e)}}else{if(fs(e))throw Error(M(418));e.flags=e.flags&-4097|2,oe=!1,Ae=e}}}function vi(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ae=e}function Yr(e){if(e!==Ae)return!1;if(!oe)return vi(e),oe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!is(e.type,e.memoizedProps)),t&&(t=Oe)){if(fs(e))throw mc(),Error(M(418));for(;t;)hc(e,t),t=Rt(t.nextSibling)}if(vi(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Oe=Rt(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Oe=null}}else Oe=Ae?Rt(e.stateNode.nextSibling):null;return!0}function mc(){for(var e=Oe;e;)e=Rt(e.nextSibling)}function Fn(){Oe=Ae=null,oe=!1}function na(e){et===null?et=[e]:et.push(e)}var _p=St.ReactCurrentBatchConfig;function Zn(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(M(309));var r=n.stateNode}if(!r)throw Error(M(147,e));var o=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var i=o.refs;a===null?delete i[l]:i[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(M(284));if(!n._owner)throw Error(M(290,e))}return e}function Xr(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wi(e){var t=e._init;return t(e._payload)}function yc(e){function t(h,g){if(e){var m=h.deletions;m===null?(h.deletions=[g],h.flags|=16):m.push(g)}}function n(h,g){if(!e)return null;for(;g!==null;)t(h,g),g=g.sibling;return null}function r(h,g){for(h=new Map;g!==null;)g.key!==null?h.set(g.key,g):h.set(g.index,g),g=g.sibling;return h}function o(h,g){return h=At(h,g),h.index=0,h.sibling=null,h}function l(h,g,m){return h.index=m,e?(m=h.alternate,m!==null?(m=m.index,m<g?(h.flags|=2,g):m):(h.flags|=2,g)):(h.flags|=1048576,g)}function a(h){return e&&h.alternate===null&&(h.flags|=2),h}function i(h,g,m,w){return g===null||g.tag!==6?(g=Il(m,h.mode,w),g.return=h,g):(g=o(g,m),g.return=h,g)}function u(h,g,m,w){var C=m.type;return C===hn?d(h,g,m.props.children,w,m.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===bt&&wi(C)===g.type)?(w=o(g,m.props),w.ref=Zn(h,g,m),w.return=h,w):(w=fo(m.type,m.key,m.props,null,h.mode,w),w.ref=Zn(h,g,m),w.return=h,w)}function c(h,g,m,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==m.containerInfo||g.stateNode.implementation!==m.implementation?(g=Ml(m,h.mode,w),g.return=h,g):(g=o(g,m.children||[]),g.return=h,g)}function d(h,g,m,w,C){return g===null||g.tag!==7?(g=Jt(m,h.mode,w,C),g.return=h,g):(g=o(g,m),g.return=h,g)}function f(h,g,m){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Il(""+g,h.mode,m),g.return=h,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Tr:return m=fo(g.type,g.key,g.props,null,h.mode,m),m.ref=Zn(h,null,g),m.return=h,m;case gn:return g=Ml(g,h.mode,m),g.return=h,g;case bt:var w=g._init;return f(h,w(g._payload),m)}if(tr(g)||Gn(g))return g=Jt(g,h.mode,m,null),g.return=h,g;Xr(h,g)}return null}function p(h,g,m,w){var C=g!==null?g.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return C!==null?null:i(h,g,""+m,w);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Tr:return m.key===C?u(h,g,m,w):null;case gn:return m.key===C?c(h,g,m,w):null;case bt:return C=m._init,p(h,g,C(m._payload),w)}if(tr(m)||Gn(m))return C!==null?null:d(h,g,m,w,null);Xr(h,m)}return null}function x(h,g,m,w,C){if(typeof w=="string"&&w!==""||typeof w=="number")return h=h.get(m)||null,i(g,h,""+w,C);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Tr:return h=h.get(w.key===null?m:w.key)||null,u(g,h,w,C);case gn:return h=h.get(w.key===null?m:w.key)||null,c(g,h,w,C);case bt:var L=w._init;return x(h,g,m,L(w._payload),C)}if(tr(w)||Gn(w))return h=h.get(m)||null,d(g,h,w,C,null);Xr(g,w)}return null}function y(h,g,m,w){for(var C=null,L=null,v=g,E=g=0,O=null;v!==null&&E<m.length;E++){v.index>E?(O=v,v=null):O=v.sibling;var P=p(h,v,m[E],w);if(P===null){v===null&&(v=O);break}e&&v&&P.alternate===null&&t(h,v),g=l(P,g,E),L===null?C=P:L.sibling=P,L=P,v=O}if(E===m.length)return n(h,v),oe&&Gt(h,E),C;if(v===null){for(;E<m.length;E++)v=f(h,m[E],w),v!==null&&(g=l(v,g,E),L===null?C=v:L.sibling=v,L=v);return oe&&Gt(h,E),C}for(v=r(h,v);E<m.length;E++)O=x(v,h,E,m[E],w),O!==null&&(e&&O.alternate!==null&&v.delete(O.key===null?E:O.key),g=l(O,g,E),L===null?C=O:L.sibling=O,L=O);return e&&v.forEach(function($){return t(h,$)}),oe&&Gt(h,E),C}function N(h,g,m,w){var C=Gn(m);if(typeof C!="function")throw Error(M(150));if(m=C.call(m),m==null)throw Error(M(151));for(var L=C=null,v=g,E=g=0,O=null,P=m.next();v!==null&&!P.done;E++,P=m.next()){v.index>E?(O=v,v=null):O=v.sibling;var $=p(h,v,P.value,w);if($===null){v===null&&(v=O);break}e&&v&&$.alternate===null&&t(h,v),g=l($,g,E),L===null?C=$:L.sibling=$,L=$,v=O}if(P.done)return n(h,v),oe&&Gt(h,E),C;if(v===null){for(;!P.done;E++,P=m.next())P=f(h,P.value,w),P!==null&&(g=l(P,g,E),L===null?C=P:L.sibling=P,L=P);return oe&&Gt(h,E),C}for(v=r(h,v);!P.done;E++,P=m.next())P=x(v,h,E,P.value,w),P!==null&&(e&&P.alternate!==null&&v.delete(P.key===null?E:P.key),g=l(P,g,E),L===null?C=P:L.sibling=P,L=P);return e&&v.forEach(function(V){return t(h,V)}),oe&&Gt(h,E),C}function D(h,g,m,w){if(typeof m=="object"&&m!==null&&m.type===hn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case Tr:e:{for(var C=m.key,L=g;L!==null;){if(L.key===C){if(C=m.type,C===hn){if(L.tag===7){n(h,L.sibling),g=o(L,m.props.children),g.return=h,h=g;break e}}else if(L.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===bt&&wi(C)===L.type){n(h,L.sibling),g=o(L,m.props),g.ref=Zn(h,L,m),g.return=h,h=g;break e}n(h,L);break}else t(h,L);L=L.sibling}m.type===hn?(g=Jt(m.props.children,h.mode,w,m.key),g.return=h,h=g):(w=fo(m.type,m.key,m.props,null,h.mode,w),w.ref=Zn(h,g,m),w.return=h,h=w)}return a(h);case gn:e:{for(L=m.key;g!==null;){if(g.key===L)if(g.tag===4&&g.stateNode.containerInfo===m.containerInfo&&g.stateNode.implementation===m.implementation){n(h,g.sibling),g=o(g,m.children||[]),g.return=h,h=g;break e}else{n(h,g);break}else t(h,g);g=g.sibling}g=Ml(m,h.mode,w),g.return=h,h=g}return a(h);case bt:return L=m._init,D(h,g,L(m._payload),w)}if(tr(m))return y(h,g,m,w);if(Gn(m))return N(h,g,m,w);Xr(h,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,g!==null&&g.tag===6?(n(h,g.sibling),g=o(g,m),g.return=h,h=g):(n(h,g),g=Il(m,h.mode,w),g.return=h,h=g),a(h)):n(h,g)}return D}var Rn=yc(!0),xc=yc(!1),bo=Ht(null),Eo=null,Nn=null,ra=null;function oa(){ra=Nn=Eo=null}function la(e){var t=bo.current;re(bo),e._currentValue=t}function gs(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Pn(e,t){Eo=e,ra=Nn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Me=!0),e.firstContext=null)}function Xe(e){var t=e._currentValue;if(ra!==e)if(e={context:e,memoizedValue:t,next:null},Nn===null){if(Eo===null)throw Error(M(308));Nn=e,Eo.dependencies={lanes:0,firstContext:e}}else Nn=Nn.next=e;return t}var Kt=null;function sa(e){Kt===null?Kt=[e]:Kt.push(e)}function vc(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,sa(t)):(n.next=o.next,o.next=n),t.interleaved=n,wt(e,r)}function wt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Et=!1;function aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function wc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _t(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Q&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,wt(e,n)}return o=r.interleaved,o===null?(t.next=t,sa(r)):(t.next=o.next,o.next=t),r.interleaved=t,wt(e,n)}function lo(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Gs(e,n)}}function ji(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?o=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?o=l=t:l=l.next=t}else o=l=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Lo(e,t,n,r){var o=e.updateQueue;Et=!1;var l=o.firstBaseUpdate,a=o.lastBaseUpdate,i=o.shared.pending;if(i!==null){o.shared.pending=null;var u=i,c=u.next;u.next=null,a===null?l=c:a.next=c,a=u;var d=e.alternate;d!==null&&(d=d.updateQueue,i=d.lastBaseUpdate,i!==a&&(i===null?d.firstBaseUpdate=c:i.next=c,d.lastBaseUpdate=u))}if(l!==null){var f=o.baseState;a=0,d=c=u=null,i=l;do{var p=i.lane,x=i.eventTime;if((r&p)===p){d!==null&&(d=d.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var y=e,N=i;switch(p=t,x=n,N.tag){case 1:if(y=N.payload,typeof y=="function"){f=y.call(x,f,p);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=N.payload,p=typeof y=="function"?y.call(x,f,p):y,p==null)break e;f=ae({},f,p);break e;case 2:Et=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,p=o.effects,p===null?o.effects=[i]:p.push(i))}else x={eventTime:x,lane:p,tag:i.tag,payload:i.payload,callback:i.callback,next:null},d===null?(c=d=x,u=f):d=d.next=x,a|=p;if(i=i.next,i===null){if(i=o.shared.pending,i===null)break;p=i,i=p.next,p.next=null,o.lastBaseUpdate=p,o.shared.pending=null}}while(!0);if(d===null&&(u=f),o.baseState=u,o.firstBaseUpdate=c,o.lastBaseUpdate=d,t=o.shared.interleaved,t!==null){o=t;do a|=o.lane,o=o.next;while(o!==t)}else l===null&&(o.shared.lanes=0);nn|=a,e.lanes=a,e.memoizedState=f}}function Si(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(M(191,o));o.call(r)}}}var Fr={},ut=Ht(Fr),kr=Ht(Fr),Cr=Ht(Fr);function Qt(e){if(e===Fr)throw Error(M(174));return e}function ia(e,t){switch(ee(Cr,t),ee(kr,e),ee(ut,Fr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Xl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Xl(t,e)}re(ut),ee(ut,t)}function _n(){re(ut),re(kr),re(Cr)}function jc(e){Qt(Cr.current);var t=Qt(ut.current),n=Xl(t,e.type);t!==n&&(ee(kr,e),ee(ut,n))}function ua(e){kr.current===e&&(re(ut),re(kr))}var le=Ht(0);function Do(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Cl=[];function ca(){for(var e=0;e<Cl.length;e++)Cl[e]._workInProgressVersionPrimary=null;Cl.length=0}var so=St.ReactCurrentDispatcher,bl=St.ReactCurrentBatchConfig,tn=0,se=null,pe=null,he=null,Po=!1,ur=!1,br=0,Tp=0;function Se(){throw Error(M(321))}function da(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!rt(e[n],t[n]))return!1;return!0}function fa(e,t,n,r,o,l){if(tn=l,se=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,so.current=e===null||e.memoizedState===null?$p:Up,e=n(r,o),ur){l=0;do{if(ur=!1,br=0,25<=l)throw Error(M(301));l+=1,he=pe=null,t.updateQueue=null,so.current=Hp,e=n(r,o)}while(ur)}if(so.current=Io,t=pe!==null&&pe.next!==null,tn=0,he=pe=se=null,Po=!1,t)throw Error(M(300));return e}function pa(){var e=br!==0;return br=0,e}function st(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return he===null?se.memoizedState=he=e:he=he.next=e,he}function Ke(){if(pe===null){var e=se.alternate;e=e!==null?e.memoizedState:null}else e=pe.next;var t=he===null?se.memoizedState:he.next;if(t!==null)he=t,pe=e;else{if(e===null)throw Error(M(310));pe=e,e={memoizedState:pe.memoizedState,baseState:pe.baseState,baseQueue:pe.baseQueue,queue:pe.queue,next:null},he===null?se.memoizedState=he=e:he=he.next=e}return he}function Er(e,t){return typeof t=="function"?t(e):t}function El(e){var t=Ke(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=pe,o=r.baseQueue,l=n.pending;if(l!==null){if(o!==null){var a=o.next;o.next=l.next,l.next=a}r.baseQueue=o=l,n.pending=null}if(o!==null){l=o.next,r=r.baseState;var i=a=null,u=null,c=l;do{var d=c.lane;if((tn&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:e(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(i=u=f,a=r):u=u.next=f,se.lanes|=d,nn|=d}c=c.next}while(c!==null&&c!==l);u===null?a=r:u.next=i,rt(r,t.memoizedState)||(Me=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do l=o.lane,se.lanes|=l,nn|=l,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ll(e){var t=Ke(),n=t.queue;if(n===null)throw Error(M(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,l=t.memoizedState;if(o!==null){n.pending=null;var a=o=o.next;do l=e(l,a.action),a=a.next;while(a!==o);rt(l,t.memoizedState)||(Me=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function Sc(){}function Nc(e,t){var n=se,r=Ke(),o=t(),l=!rt(r.memoizedState,o);if(l&&(r.memoizedState=o,Me=!0),r=r.queue,ga(bc.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||he!==null&&he.memoizedState.tag&1){if(n.flags|=2048,Lr(9,Cc.bind(null,n,r,o,t),void 0,null),me===null)throw Error(M(349));tn&30||kc(n,t,o)}return o}function kc(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Cc(e,t,n,r){t.value=n,t.getSnapshot=r,Ec(t)&&Lc(e)}function bc(e,t,n){return n(function(){Ec(t)&&Lc(e)})}function Ec(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!rt(e,n)}catch{return!0}}function Lc(e){var t=wt(e,1);t!==null&&nt(t,e,1,-1)}function Ni(e){var t=st();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Er,lastRenderedState:e},t.queue=e,e=e.dispatch=Bp.bind(null,se,e),[t.memoizedState,e]}function Lr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=se.updateQueue,t===null?(t={lastEffect:null,stores:null},se.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Dc(){return Ke().memoizedState}function ao(e,t,n,r){var o=st();se.flags|=e,o.memoizedState=Lr(1|t,n,void 0,r===void 0?null:r)}function Wo(e,t,n,r){var o=Ke();r=r===void 0?null:r;var l=void 0;if(pe!==null){var a=pe.memoizedState;if(l=a.destroy,r!==null&&da(r,a.deps)){o.memoizedState=Lr(t,n,l,r);return}}se.flags|=e,o.memoizedState=Lr(1|t,n,l,r)}function ki(e,t){return ao(8390656,8,e,t)}function ga(e,t){return Wo(2048,8,e,t)}function Pc(e,t){return Wo(4,2,e,t)}function Ic(e,t){return Wo(4,4,e,t)}function Mc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function zc(e,t,n){return n=n!=null?n.concat([e]):null,Wo(4,4,Mc.bind(null,t,e),n)}function ha(){}function Fc(e,t){var n=Ke();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&da(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Rc(e,t){var n=Ke();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&da(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function _c(e,t,n){return tn&21?(rt(n,t)||(n=$u(),se.lanes|=n,nn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Me=!0),e.memoizedState=n)}function Op(e,t){var n=Z;Z=n!==0&&4>n?n:4,e(!0);var r=bl.transition;bl.transition={};try{e(!1),t()}finally{Z=n,bl.transition=r}}function Tc(){return Ke().memoizedState}function Ap(e,t,n){var r=Ot(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Oc(e))Ac(t,n);else if(n=vc(e,t,n,r),n!==null){var o=Le();nt(n,e,r,o),Bc(n,t,r)}}function Bp(e,t,n){var r=Ot(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Oc(e))Ac(t,o);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,i=l(a,n);if(o.hasEagerState=!0,o.eagerState=i,rt(i,a)){var u=t.interleaved;u===null?(o.next=o,sa(t)):(o.next=u.next,u.next=o),t.interleaved=o;return}}catch{}finally{}n=vc(e,t,o,r),n!==null&&(o=Le(),nt(n,e,r,o),Bc(n,t,r))}}function Oc(e){var t=e.alternate;return e===se||t!==null&&t===se}function Ac(e,t){ur=Po=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Bc(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Gs(e,n)}}var Io={readContext:Xe,useCallback:Se,useContext:Se,useEffect:Se,useImperativeHandle:Se,useInsertionEffect:Se,useLayoutEffect:Se,useMemo:Se,useReducer:Se,useRef:Se,useState:Se,useDebugValue:Se,useDeferredValue:Se,useTransition:Se,useMutableSource:Se,useSyncExternalStore:Se,useId:Se,unstable_isNewReconciler:!1},$p={readContext:Xe,useCallback:function(e,t){return st().memoizedState=[e,t===void 0?null:t],e},useContext:Xe,useEffect:ki,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ao(4194308,4,Mc.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ao(4194308,4,e,t)},useInsertionEffect:function(e,t){return ao(4,2,e,t)},useMemo:function(e,t){var n=st();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=st();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ap.bind(null,se,e),[r.memoizedState,e]},useRef:function(e){var t=st();return e={current:e},t.memoizedState=e},useState:Ni,useDebugValue:ha,useDeferredValue:function(e){return st().memoizedState=e},useTransition:function(){var e=Ni(!1),t=e[0];return e=Op.bind(null,e[1]),st().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=se,o=st();if(oe){if(n===void 0)throw Error(M(407));n=n()}else{if(n=t(),me===null)throw Error(M(349));tn&30||kc(r,t,n)}o.memoizedState=n;var l={value:n,getSnapshot:t};return o.queue=l,ki(bc.bind(null,r,l,e),[e]),r.flags|=2048,Lr(9,Cc.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=st(),t=me.identifierPrefix;if(oe){var n=mt,r=ht;n=(r&~(1<<32-tt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=br++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Tp++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Up={readContext:Xe,useCallback:Fc,useContext:Xe,useEffect:ga,useImperativeHandle:zc,useInsertionEffect:Pc,useLayoutEffect:Ic,useMemo:Rc,useReducer:El,useRef:Dc,useState:function(){return El(Er)},useDebugValue:ha,useDeferredValue:function(e){var t=Ke();return _c(t,pe.memoizedState,e)},useTransition:function(){var e=El(Er)[0],t=Ke().memoizedState;return[e,t]},useMutableSource:Sc,useSyncExternalStore:Nc,useId:Tc,unstable_isNewReconciler:!1},Hp={readContext:Xe,useCallback:Fc,useContext:Xe,useEffect:ga,useImperativeHandle:zc,useInsertionEffect:Pc,useLayoutEffect:Ic,useMemo:Rc,useReducer:Ll,useRef:Dc,useState:function(){return Ll(Er)},useDebugValue:ha,useDeferredValue:function(e){var t=Ke();return pe===null?t.memoizedState=e:_c(t,pe.memoizedState,e)},useTransition:function(){var e=Ll(Er)[0],t=Ke().memoizedState;return[e,t]},useMutableSource:Sc,useSyncExternalStore:Nc,useId:Tc,unstable_isNewReconciler:!1};function Je(e,t){if(e&&e.defaultProps){t=ae({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function hs(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:ae({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Vo={isMounted:function(e){return(e=e._reactInternals)?ln(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Le(),o=Ot(e),l=yt(r,o);l.payload=t,n!=null&&(l.callback=n),t=_t(e,l,o),t!==null&&(nt(t,e,o,r),lo(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Le(),o=Ot(e),l=yt(r,o);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=_t(e,l,o),t!==null&&(nt(t,e,o,r),lo(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Le(),r=Ot(e),o=yt(n,r);o.tag=2,t!=null&&(o.callback=t),t=_t(e,o,r),t!==null&&(nt(t,e,r,n),lo(t,e,r))}};function Ci(e,t,n,r,o,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!wr(n,r)||!wr(o,l):!0}function $c(e,t,n){var r=!1,o=$t,l=t.contextType;return typeof l=="object"&&l!==null?l=Xe(l):(o=Fe(t)?qt:Ce.current,r=t.contextTypes,l=(r=r!=null)?zn(e,o):$t),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vo,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=l),t}function bi(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Vo.enqueueReplaceState(t,t.state,null)}function ms(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},aa(e);var l=t.contextType;typeof l=="object"&&l!==null?o.context=Xe(l):(l=Fe(t)?qt:Ce.current,o.context=zn(e,l)),o.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(hs(e,t,l,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&Vo.enqueueReplaceState(o,o.state,null),Lo(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function Tn(e,t){try{var n="",r=t;do n+=yf(r),r=r.return;while(r);var o=n}catch(l){o=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:o,digest:null}}function Dl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ys(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Wp=typeof WeakMap=="function"?WeakMap:Map;function Uc(e,t,n){n=yt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){zo||(zo=!0,Es=r),ys(e,t)},n}function Hc(e,t,n){n=yt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){ys(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){ys(e,t),typeof r!="function"&&(Tt===null?Tt=new Set([this]):Tt.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function Ei(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Wp;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=og.bind(null,e,t,n),t.then(e,e))}function Li(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Di(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=yt(-1,1),t.tag=2,_t(n,t,1))),n.lanes|=1),e)}var Vp=St.ReactCurrentOwner,Me=!1;function Ee(e,t,n,r){t.child=e===null?xc(t,null,n,r):Rn(t,e.child,n,r)}function Pi(e,t,n,r,o){n=n.render;var l=t.ref;return Pn(t,o),r=fa(e,t,n,r,l,o),n=pa(),e!==null&&!Me?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,jt(e,t,o)):(oe&&n&&ea(t),t.flags|=1,Ee(e,t,r,o),t.child)}function Ii(e,t,n,r,o){if(e===null){var l=n.type;return typeof l=="function"&&!Na(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Wc(e,t,l,r,o)):(e=fo(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&o)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:wr,n(a,r)&&e.ref===t.ref)return jt(e,t,o)}return t.flags|=1,e=At(l,r),e.ref=t.ref,e.return=t,t.child=e}function Wc(e,t,n,r,o){if(e!==null){var l=e.memoizedProps;if(wr(l,r)&&e.ref===t.ref)if(Me=!1,t.pendingProps=r=l,(e.lanes&o)!==0)e.flags&131072&&(Me=!0);else return t.lanes=e.lanes,jt(e,t,o)}return xs(e,t,n,r,o)}function Vc(e,t,n){var r=t.pendingProps,o=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ee(Cn,Te),Te|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ee(Cn,Te),Te|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,ee(Cn,Te),Te|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,ee(Cn,Te),Te|=r;return Ee(e,t,o,n),t.child}function Gc(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function xs(e,t,n,r,o){var l=Fe(n)?qt:Ce.current;return l=zn(t,l),Pn(t,o),n=fa(e,t,n,r,l,o),r=pa(),e!==null&&!Me?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,jt(e,t,o)):(oe&&r&&ea(t),t.flags|=1,Ee(e,t,n,o),t.child)}function Mi(e,t,n,r,o){if(Fe(n)){var l=!0;No(t)}else l=!1;if(Pn(t,o),t.stateNode===null)io(e,t),$c(t,n,r),ms(t,n,r,o),r=!0;else if(e===null){var a=t.stateNode,i=t.memoizedProps;a.props=i;var u=a.context,c=n.contextType;typeof c=="object"&&c!==null?c=Xe(c):(c=Fe(n)?qt:Ce.current,c=zn(t,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==r||u!==c)&&bi(t,a,r,c),Et=!1;var p=t.memoizedState;a.state=p,Lo(t,r,a,o),u=t.memoizedState,i!==r||p!==u||ze.current||Et?(typeof d=="function"&&(hs(t,n,d,r),u=t.memoizedState),(i=Et||Ci(t,n,i,r,p,u,c))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),a.props=r,a.state=u,a.context=c,r=i):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,wc(e,t),i=t.memoizedProps,c=t.type===t.elementType?i:Je(t.type,i),a.props=c,f=t.pendingProps,p=a.context,u=n.contextType,typeof u=="object"&&u!==null?u=Xe(u):(u=Fe(n)?qt:Ce.current,u=zn(t,u));var x=n.getDerivedStateFromProps;(d=typeof x=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(i!==f||p!==u)&&bi(t,a,r,u),Et=!1,p=t.memoizedState,a.state=p,Lo(t,r,a,o);var y=t.memoizedState;i!==f||p!==y||ze.current||Et?(typeof x=="function"&&(hs(t,n,x,r),y=t.memoizedState),(c=Et||Ci(t,n,c,r,p,y,u)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,y,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,y,u)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),a.props=r,a.state=y,a.context=u,r=c):(typeof a.componentDidUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),r=!1)}return vs(e,t,n,r,l,o)}function vs(e,t,n,r,o,l){Gc(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return o&&yi(t,n,!1),jt(e,t,l);r=t.stateNode,Vp.current=t;var i=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Rn(t,e.child,null,l),t.child=Rn(t,null,i,l)):Ee(e,t,i,l),t.memoizedState=r.state,o&&yi(t,n,!0),t.child}function Yc(e){var t=e.stateNode;t.pendingContext?mi(e,t.pendingContext,t.pendingContext!==t.context):t.context&&mi(e,t.context,!1),ia(e,t.containerInfo)}function zi(e,t,n,r,o){return Fn(),na(o),t.flags|=256,Ee(e,t,n,r),t.child}var ws={dehydrated:null,treeContext:null,retryLane:0};function js(e){return{baseLanes:e,cachePool:null,transitions:null}}function Xc(e,t,n){var r=t.pendingProps,o=le.current,l=!1,a=(t.flags&128)!==0,i;if((i=a)||(i=e!==null&&e.memoizedState===null?!1:(o&2)!==0),i?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),ee(le,o&1),e===null)return ps(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=Xo(a,r,0,null),e=Jt(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=js(n),t.memoizedState=ws,e):ma(t,a));if(o=e.memoizedState,o!==null&&(i=o.dehydrated,i!==null))return Gp(e,t,a,r,i,o,n);if(l){l=r.fallback,a=t.mode,o=e.child,i=o.sibling;var u={mode:"hidden",children:r.children};return!(a&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=At(o,u),r.subtreeFlags=o.subtreeFlags&14680064),i!==null?l=At(i,l):(l=Jt(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?js(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=ws,r}return l=e.child,e=l.sibling,r=At(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function ma(e,t){return t=Xo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Kr(e,t,n,r){return r!==null&&na(r),Rn(t,e.child,null,n),e=ma(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Gp(e,t,n,r,o,l,a){if(n)return t.flags&256?(t.flags&=-257,r=Dl(Error(M(422))),Kr(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,o=t.mode,r=Xo({mode:"visible",children:r.children},o,0,null),l=Jt(l,o,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Rn(t,e.child,null,a),t.child.memoizedState=js(a),t.memoizedState=ws,l);if(!(t.mode&1))return Kr(e,t,a,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var i=r.dgst;return r=i,l=Error(M(419)),r=Dl(l,r,void 0),Kr(e,t,a,r)}if(i=(a&e.childLanes)!==0,Me||i){if(r=me,r!==null){switch(a&-a){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|a)?0:o,o!==0&&o!==l.retryLane&&(l.retryLane=o,wt(e,o),nt(r,e,o,-1))}return Sa(),r=Dl(Error(M(421))),Kr(e,t,a,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=lg.bind(null,e),o._reactRetry=t,null):(e=l.treeContext,Oe=Rt(o.nextSibling),Ae=t,oe=!0,et=null,e!==null&&(We[Ve++]=ht,We[Ve++]=mt,We[Ve++]=en,ht=e.id,mt=e.overflow,en=t),t=ma(t,r.children),t.flags|=4096,t)}function Fi(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),gs(e.return,t,n)}function Pl(e,t,n,r,o){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=o)}function Kc(e,t,n){var r=t.pendingProps,o=r.revealOrder,l=r.tail;if(Ee(e,t,r.children,n),r=le.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fi(e,n,t);else if(e.tag===19)Fi(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ee(le,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Do(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),Pl(t,!1,o,n,l);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Do(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}Pl(t,!0,n,null,l);break;case"together":Pl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function io(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function jt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),nn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,n=At(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=At(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Yp(e,t,n){switch(t.tag){case 3:Yc(t),Fn();break;case 5:jc(t);break;case 1:Fe(t.type)&&No(t);break;case 4:ia(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;ee(bo,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ee(le,le.current&1),t.flags|=128,null):n&t.child.childLanes?Xc(e,t,n):(ee(le,le.current&1),e=jt(e,t,n),e!==null?e.sibling:null);ee(le,le.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Kc(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),ee(le,le.current),r)break;return null;case 22:case 23:return t.lanes=0,Vc(e,t,n)}return jt(e,t,n)}var Qc,Ss,Zc,Jc;Qc=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ss=function(){};Zc=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Qt(ut.current);var l=null;switch(n){case"input":o=Wl(e,o),r=Wl(e,r),l=[];break;case"select":o=ae({},o,{value:void 0}),r=ae({},r,{value:void 0}),l=[];break;case"textarea":o=Yl(e,o),r=Yl(e,r),l=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=jo)}Kl(n,r);var a;n=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var i=o[c];for(a in i)i.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(pr.hasOwnProperty(c)?l||(l=[]):(l=l||[]).push(c,null));for(c in r){var u=r[c];if(i=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&u!==i&&(u!=null||i!=null))if(c==="style")if(i){for(a in i)!i.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in u)u.hasOwnProperty(a)&&i[a]!==u[a]&&(n||(n={}),n[a]=u[a])}else n||(l||(l=[]),l.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,i=i?i.__html:void 0,u!=null&&i!==u&&(l=l||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(l=l||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(pr.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&ne("scroll",e),l||i===u||(l=[])):(l=l||[]).push(c,u))}n&&(l=l||[]).push("style",n);var c=l;(t.updateQueue=c)&&(t.flags|=4)}};Jc=function(e,t,n,r){n!==r&&(t.flags|=4)};function Jn(e,t){if(!oe)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ne(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Xp(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ne(t),null;case 1:return Fe(t.type)&&So(),Ne(t),null;case 3:return r=t.stateNode,_n(),re(ze),re(Ce),ca(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Yr(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,et!==null&&(Ps(et),et=null))),Ss(e,t),Ne(t),null;case 5:ua(t);var o=Qt(Cr.current);if(n=t.type,e!==null&&t.stateNode!=null)Zc(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(M(166));return Ne(t),null}if(e=Qt(ut.current),Yr(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[at]=t,r[Nr]=l,e=(t.mode&1)!==0,n){case"dialog":ne("cancel",r),ne("close",r);break;case"iframe":case"object":case"embed":ne("load",r);break;case"video":case"audio":for(o=0;o<rr.length;o++)ne(rr[o],r);break;case"source":ne("error",r);break;case"img":case"image":case"link":ne("error",r),ne("load",r);break;case"details":ne("toggle",r);break;case"input":Ha(r,l),ne("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},ne("invalid",r);break;case"textarea":Va(r,l),ne("invalid",r)}Kl(n,l),o=null;for(var a in l)if(l.hasOwnProperty(a)){var i=l[a];a==="children"?typeof i=="string"?r.textContent!==i&&(l.suppressHydrationWarning!==!0&&Gr(r.textContent,i,e),o=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(l.suppressHydrationWarning!==!0&&Gr(r.textContent,i,e),o=["children",""+i]):pr.hasOwnProperty(a)&&i!=null&&a==="onScroll"&&ne("scroll",r)}switch(n){case"input":Or(r),Wa(r,l,!0);break;case"textarea":Or(r),Ga(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=jo)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=bu(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[at]=t,e[Nr]=r,Qc(e,t,!1,!1),t.stateNode=e;e:{switch(a=Ql(n,r),n){case"dialog":ne("cancel",e),ne("close",e),o=r;break;case"iframe":case"object":case"embed":ne("load",e),o=r;break;case"video":case"audio":for(o=0;o<rr.length;o++)ne(rr[o],e);o=r;break;case"source":ne("error",e),o=r;break;case"img":case"image":case"link":ne("error",e),ne("load",e),o=r;break;case"details":ne("toggle",e),o=r;break;case"input":Ha(e,r),o=Wl(e,r),ne("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=ae({},r,{value:void 0}),ne("invalid",e);break;case"textarea":Va(e,r),o=Yl(e,r),ne("invalid",e);break;default:o=r}Kl(n,o),i=o;for(l in i)if(i.hasOwnProperty(l)){var u=i[l];l==="style"?Du(e,u):l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Eu(e,u)):l==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&gr(e,u):typeof u=="number"&&gr(e,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(pr.hasOwnProperty(l)?u!=null&&l==="onScroll"&&ne("scroll",e):u!=null&&Bs(e,l,u,a))}switch(n){case"input":Or(e),Wa(e,r,!1);break;case"textarea":Or(e),Ga(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Bt(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?bn(e,!!r.multiple,l,!1):r.defaultValue!=null&&bn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=jo)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Ne(t),null;case 6:if(e&&t.stateNode!=null)Jc(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(M(166));if(n=Qt(Cr.current),Qt(ut.current),Yr(t)){if(r=t.stateNode,n=t.memoizedProps,r[at]=t,(l=r.nodeValue!==n)&&(e=Ae,e!==null))switch(e.tag){case 3:Gr(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gr(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[at]=t,t.stateNode=r}return Ne(t),null;case 13:if(re(le),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(oe&&Oe!==null&&t.mode&1&&!(t.flags&128))mc(),Fn(),t.flags|=98560,l=!1;else if(l=Yr(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(M(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(M(317));l[at]=t}else Fn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Ne(t),l=!1}else et!==null&&(Ps(et),et=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||le.current&1?ge===0&&(ge=3):Sa())),t.updateQueue!==null&&(t.flags|=4),Ne(t),null);case 4:return _n(),Ss(e,t),e===null&&jr(t.stateNode.containerInfo),Ne(t),null;case 10:return la(t.type._context),Ne(t),null;case 17:return Fe(t.type)&&So(),Ne(t),null;case 19:if(re(le),l=t.memoizedState,l===null)return Ne(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)Jn(l,!1);else{if(ge!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Do(e),a!==null){for(t.flags|=128,Jn(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ee(le,le.current&1|2),t.child}e=e.sibling}l.tail!==null&&ce()>On&&(t.flags|=128,r=!0,Jn(l,!1),t.lanes=4194304)}else{if(!r)if(e=Do(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Jn(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!oe)return Ne(t),null}else 2*ce()-l.renderingStartTime>On&&n!==1073741824&&(t.flags|=128,r=!0,Jn(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=ce(),t.sibling=null,n=le.current,ee(le,r?n&1|2:n&1),t):(Ne(t),null);case 22:case 23:return ja(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Te&1073741824&&(Ne(t),t.subtreeFlags&6&&(t.flags|=8192)):Ne(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function Kp(e,t){switch(ta(t),t.tag){case 1:return Fe(t.type)&&So(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return _n(),re(ze),re(Ce),ca(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ua(t),null;case 13:if(re(le),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));Fn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return re(le),null;case 4:return _n(),null;case 10:return la(t.type._context),null;case 22:case 23:return ja(),null;case 24:return null;default:return null}}var Qr=!1,ke=!1,Qp=typeof WeakSet=="function"?WeakSet:Set,B=null;function kn(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ue(e,t,r)}else n.current=null}function Ns(e,t,n){try{n()}catch(r){ue(e,t,r)}}var Ri=!1;function Zp(e,t){if(ss=xo,e=rc(),qs(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var a=0,i=-1,u=-1,c=0,d=0,f=e,p=null;t:for(;;){for(var x;f!==n||o!==0&&f.nodeType!==3||(i=a+o),f!==l||r!==0&&f.nodeType!==3||(u=a+r),f.nodeType===3&&(a+=f.nodeValue.length),(x=f.firstChild)!==null;)p=f,f=x;for(;;){if(f===e)break t;if(p===n&&++c===o&&(i=a),p===l&&++d===r&&(u=a),(x=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=x}n=i===-1||u===-1?null:{start:i,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(as={focusedElem:e,selectionRange:n},xo=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var N=y.memoizedProps,D=y.memoizedState,h=t.stateNode,g=h.getSnapshotBeforeUpdate(t.elementType===t.type?N:Je(t.type,N),D);h.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(w){ue(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return y=Ri,Ri=!1,y}function cr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var l=o.destroy;o.destroy=void 0,l!==void 0&&Ns(t,n,l)}o=o.next}while(o!==r)}}function Go(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ks(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function qc(e){var t=e.alternate;t!==null&&(e.alternate=null,qc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[at],delete t[Nr],delete t[cs],delete t[zp],delete t[Fp])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ed(e){return e.tag===5||e.tag===3||e.tag===4}function _i(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ed(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Cs(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=jo));else if(r!==4&&(e=e.child,e!==null))for(Cs(e,t,n),e=e.sibling;e!==null;)Cs(e,t,n),e=e.sibling}function bs(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(bs(e,t,n),e=e.sibling;e!==null;)bs(e,t,n),e=e.sibling}var ve=null,qe=!1;function Ct(e,t,n){for(n=n.child;n!==null;)td(e,t,n),n=n.sibling}function td(e,t,n){if(it&&typeof it.onCommitFiberUnmount=="function")try{it.onCommitFiberUnmount(Oo,n)}catch{}switch(n.tag){case 5:ke||kn(n,t);case 6:var r=ve,o=qe;ve=null,Ct(e,t,n),ve=r,qe=o,ve!==null&&(qe?(e=ve,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ve.removeChild(n.stateNode));break;case 18:ve!==null&&(qe?(e=ve,n=n.stateNode,e.nodeType===8?Nl(e.parentNode,n):e.nodeType===1&&Nl(e,n),xr(e)):Nl(ve,n.stateNode));break;case 4:r=ve,o=qe,ve=n.stateNode.containerInfo,qe=!0,Ct(e,t,n),ve=r,qe=o;break;case 0:case 11:case 14:case 15:if(!ke&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var l=o,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&Ns(n,t,a),o=o.next}while(o!==r)}Ct(e,t,n);break;case 1:if(!ke&&(kn(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){ue(n,t,i)}Ct(e,t,n);break;case 21:Ct(e,t,n);break;case 22:n.mode&1?(ke=(r=ke)||n.memoizedState!==null,Ct(e,t,n),ke=r):Ct(e,t,n);break;default:Ct(e,t,n)}}function Ti(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Qp),t.forEach(function(r){var o=sg.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function Qe(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var l=e,a=t,i=a;e:for(;i!==null;){switch(i.tag){case 5:ve=i.stateNode,qe=!1;break e;case 3:ve=i.stateNode.containerInfo,qe=!0;break e;case 4:ve=i.stateNode.containerInfo,qe=!0;break e}i=i.return}if(ve===null)throw Error(M(160));td(l,a,o),ve=null,qe=!1;var u=o.alternate;u!==null&&(u.return=null),o.return=null}catch(c){ue(o,t,c)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)nd(t,e),t=t.sibling}function nd(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qe(t,e),lt(e),r&4){try{cr(3,e,e.return),Go(3,e)}catch(N){ue(e,e.return,N)}try{cr(5,e,e.return)}catch(N){ue(e,e.return,N)}}break;case 1:Qe(t,e),lt(e),r&512&&n!==null&&kn(n,n.return);break;case 5:if(Qe(t,e),lt(e),r&512&&n!==null&&kn(n,n.return),e.flags&32){var o=e.stateNode;try{gr(o,"")}catch(N){ue(e,e.return,N)}}if(r&4&&(o=e.stateNode,o!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,i=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{i==="input"&&l.type==="radio"&&l.name!=null&&ku(o,l),Ql(i,a);var c=Ql(i,l);for(a=0;a<u.length;a+=2){var d=u[a],f=u[a+1];d==="style"?Du(o,f):d==="dangerouslySetInnerHTML"?Eu(o,f):d==="children"?gr(o,f):Bs(o,d,f,c)}switch(i){case"input":Vl(o,l);break;case"textarea":Cu(o,l);break;case"select":var p=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!l.multiple;var x=l.value;x!=null?bn(o,!!l.multiple,x,!1):p!==!!l.multiple&&(l.defaultValue!=null?bn(o,!!l.multiple,l.defaultValue,!0):bn(o,!!l.multiple,l.multiple?[]:"",!1))}o[Nr]=l}catch(N){ue(e,e.return,N)}}break;case 6:if(Qe(t,e),lt(e),r&4){if(e.stateNode===null)throw Error(M(162));o=e.stateNode,l=e.memoizedProps;try{o.nodeValue=l}catch(N){ue(e,e.return,N)}}break;case 3:if(Qe(t,e),lt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xr(t.containerInfo)}catch(N){ue(e,e.return,N)}break;case 4:Qe(t,e),lt(e);break;case 13:Qe(t,e),lt(e),o=e.child,o.flags&8192&&(l=o.memoizedState!==null,o.stateNode.isHidden=l,!l||o.alternate!==null&&o.alternate.memoizedState!==null||(va=ce())),r&4&&Ti(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(ke=(c=ke)||d,Qe(t,e),ke=c):Qe(t,e),lt(e),r&8192){if(c=e.memoizedState!==null,(e.stateNode.isHidden=c)&&!d&&e.mode&1)for(B=e,d=e.child;d!==null;){for(f=B=d;B!==null;){switch(p=B,x=p.child,p.tag){case 0:case 11:case 14:case 15:cr(4,p,p.return);break;case 1:kn(p,p.return);var y=p.stateNode;if(typeof y.componentWillUnmount=="function"){r=p,n=p.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(N){ue(r,n,N)}}break;case 5:kn(p,p.return);break;case 22:if(p.memoizedState!==null){Ai(f);continue}}x!==null?(x.return=p,B=x):Ai(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{o=f.stateNode,c?(l=o.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(i=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,i.style.display=Lu("display",a))}catch(N){ue(e,e.return,N)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(N){ue(e,e.return,N)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Qe(t,e),lt(e),r&4&&Ti(e);break;case 21:break;default:Qe(t,e),lt(e)}}function lt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(ed(n)){var r=n;break e}n=n.return}throw Error(M(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(gr(o,""),r.flags&=-33);var l=_i(e);bs(e,l,o);break;case 3:case 4:var a=r.stateNode.containerInfo,i=_i(e);Cs(e,i,a);break;default:throw Error(M(161))}}catch(u){ue(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Jp(e,t,n){B=e,rd(e)}function rd(e,t,n){for(var r=(e.mode&1)!==0;B!==null;){var o=B,l=o.child;if(o.tag===22&&r){var a=o.memoizedState!==null||Qr;if(!a){var i=o.alternate,u=i!==null&&i.memoizedState!==null||ke;i=Qr;var c=ke;if(Qr=a,(ke=u)&&!c)for(B=o;B!==null;)a=B,u=a.child,a.tag===22&&a.memoizedState!==null?Bi(o):u!==null?(u.return=a,B=u):Bi(o);for(;l!==null;)B=l,rd(l),l=l.sibling;B=o,Qr=i,ke=c}Oi(e)}else o.subtreeFlags&8772&&l!==null?(l.return=o,B=l):Oi(e)}}function Oi(e){for(;B!==null;){var t=B;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ke||Go(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ke)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:Je(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&Si(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Si(t,a,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var c=t.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&xr(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}ke||t.flags&512&&ks(t)}catch(p){ue(t,t.return,p)}}if(t===e){B=null;break}if(n=t.sibling,n!==null){n.return=t.return,B=n;break}B=t.return}}function Ai(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var n=t.sibling;if(n!==null){n.return=t.return,B=n;break}B=t.return}}function Bi(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Go(4,t)}catch(u){ue(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(u){ue(t,o,u)}}var l=t.return;try{ks(t)}catch(u){ue(t,l,u)}break;case 5:var a=t.return;try{ks(t)}catch(u){ue(t,a,u)}}}catch(u){ue(t,t.return,u)}if(t===e){B=null;break}var i=t.sibling;if(i!==null){i.return=t.return,B=i;break}B=t.return}}var qp=Math.ceil,Mo=St.ReactCurrentDispatcher,ya=St.ReactCurrentOwner,Ye=St.ReactCurrentBatchConfig,Q=0,me=null,fe=null,we=0,Te=0,Cn=Ht(0),ge=0,Dr=null,nn=0,Yo=0,xa=0,dr=null,Ie=null,va=0,On=1/0,pt=null,zo=!1,Es=null,Tt=null,Zr=!1,It=null,Fo=0,fr=0,Ls=null,uo=-1,co=0;function Le(){return Q&6?ce():uo!==-1?uo:uo=ce()}function Ot(e){return e.mode&1?Q&2&&we!==0?we&-we:_p.transition!==null?(co===0&&(co=$u()),co):(e=Z,e!==0||(e=window.event,e=e===void 0?16:Xu(e.type)),e):1}function nt(e,t,n,r){if(50<fr)throw fr=0,Ls=null,Error(M(185));Ir(e,n,r),(!(Q&2)||e!==me)&&(e===me&&(!(Q&2)&&(Yo|=n),ge===4&&Dt(e,we)),Re(e,r),n===1&&Q===0&&!(t.mode&1)&&(On=ce()+500,Ho&&Wt()))}function Re(e,t){var n=e.callbackNode;_f(e,t);var r=yo(e,e===me?we:0);if(r===0)n!==null&&Ka(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Ka(n),t===1)e.tag===0?Rp($i.bind(null,e)):pc($i.bind(null,e)),Ip(function(){!(Q&6)&&Wt()}),n=null;else{switch(Uu(r)){case 1:n=Vs;break;case 4:n=Au;break;case 16:n=mo;break;case 536870912:n=Bu;break;default:n=mo}n=dd(n,od.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function od(e,t){if(uo=-1,co=0,Q&6)throw Error(M(327));var n=e.callbackNode;if(In()&&e.callbackNode!==n)return null;var r=yo(e,e===me?we:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Ro(e,r);else{t=r;var o=Q;Q|=2;var l=sd();(me!==e||we!==t)&&(pt=null,On=ce()+500,Zt(e,t));do try{ng();break}catch(i){ld(e,i)}while(!0);oa(),Mo.current=l,Q=o,fe!==null?t=0:(me=null,we=0,t=ge)}if(t!==0){if(t===2&&(o=ts(e),o!==0&&(r=o,t=Ds(e,o))),t===1)throw n=Dr,Zt(e,0),Dt(e,r),Re(e,ce()),n;if(t===6)Dt(e,r);else{if(o=e.current.alternate,!(r&30)&&!eg(o)&&(t=Ro(e,r),t===2&&(l=ts(e),l!==0&&(r=l,t=Ds(e,l))),t===1))throw n=Dr,Zt(e,0),Dt(e,r),Re(e,ce()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(M(345));case 2:Yt(e,Ie,pt);break;case 3:if(Dt(e,r),(r&130023424)===r&&(t=va+500-ce(),10<t)){if(yo(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){Le(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=us(Yt.bind(null,e,Ie,pt),t);break}Yt(e,Ie,pt);break;case 4:if(Dt(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var a=31-tt(r);l=1<<a,a=t[a],a>o&&(o=a),r&=~l}if(r=o,r=ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qp(r/1960))-r,10<r){e.timeoutHandle=us(Yt.bind(null,e,Ie,pt),r);break}Yt(e,Ie,pt);break;case 5:Yt(e,Ie,pt);break;default:throw Error(M(329))}}}return Re(e,ce()),e.callbackNode===n?od.bind(null,e):null}function Ds(e,t){var n=dr;return e.current.memoizedState.isDehydrated&&(Zt(e,t).flags|=256),e=Ro(e,t),e!==2&&(t=Ie,Ie=n,t!==null&&Ps(t)),e}function Ps(e){Ie===null?Ie=e:Ie.push.apply(Ie,e)}function eg(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],l=o.getSnapshot;o=o.value;try{if(!rt(l(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dt(e,t){for(t&=~xa,t&=~Yo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-tt(t),r=1<<n;e[n]=-1,t&=~r}}function $i(e){if(Q&6)throw Error(M(327));In();var t=yo(e,0);if(!(t&1))return Re(e,ce()),null;var n=Ro(e,t);if(e.tag!==0&&n===2){var r=ts(e);r!==0&&(t=r,n=Ds(e,r))}if(n===1)throw n=Dr,Zt(e,0),Dt(e,t),Re(e,ce()),n;if(n===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yt(e,Ie,pt),Re(e,ce()),null}function wa(e,t){var n=Q;Q|=1;try{return e(t)}finally{Q=n,Q===0&&(On=ce()+500,Ho&&Wt())}}function rn(e){It!==null&&It.tag===0&&!(Q&6)&&In();var t=Q;Q|=1;var n=Ye.transition,r=Z;try{if(Ye.transition=null,Z=1,e)return e()}finally{Z=r,Ye.transition=n,Q=t,!(Q&6)&&Wt()}}function ja(){Te=Cn.current,re(Cn)}function Zt(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Pp(n)),fe!==null)for(n=fe.return;n!==null;){var r=n;switch(ta(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&So();break;case 3:_n(),re(ze),re(Ce),ca();break;case 5:ua(r);break;case 4:_n();break;case 13:re(le);break;case 19:re(le);break;case 10:la(r.type._context);break;case 22:case 23:ja()}n=n.return}if(me=e,fe=e=At(e.current,null),we=Te=t,ge=0,Dr=null,xa=Yo=nn=0,Ie=dr=null,Kt!==null){for(t=0;t<Kt.length;t++)if(n=Kt[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=o,r.next=a}n.pending=r}Kt=null}return e}function ld(e,t){do{var n=fe;try{if(oa(),so.current=Io,Po){for(var r=se.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Po=!1}if(tn=0,he=pe=se=null,ur=!1,br=0,ya.current=null,n===null||n.return===null){ge=1,Dr=t,fe=null;break}e:{var l=e,a=n.return,i=n,u=t;if(t=we,i.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=i,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var p=d.alternate;p?(d.updateQueue=p.updateQueue,d.memoizedState=p.memoizedState,d.lanes=p.lanes):(d.updateQueue=null,d.memoizedState=null)}var x=Li(a);if(x!==null){x.flags&=-257,Di(x,a,i,l,t),x.mode&1&&Ei(l,c,t),t=x,u=c;var y=t.updateQueue;if(y===null){var N=new Set;N.add(u),t.updateQueue=N}else y.add(u);break e}else{if(!(t&1)){Ei(l,c,t),Sa();break e}u=Error(M(426))}}else if(oe&&i.mode&1){var D=Li(a);if(D!==null){!(D.flags&65536)&&(D.flags|=256),Di(D,a,i,l,t),na(Tn(u,i));break e}}l=u=Tn(u,i),ge!==4&&(ge=2),dr===null?dr=[l]:dr.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var h=Uc(l,u,t);ji(l,h);break e;case 1:i=u;var g=l.type,m=l.stateNode;if(!(l.flags&128)&&(typeof g.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Tt===null||!Tt.has(m)))){l.flags|=65536,t&=-t,l.lanes|=t;var w=Hc(l,i,t);ji(l,w);break e}}l=l.return}while(l!==null)}id(n)}catch(C){t=C,fe===n&&n!==null&&(fe=n=n.return);continue}break}while(!0)}function sd(){var e=Mo.current;return Mo.current=Io,e===null?Io:e}function Sa(){(ge===0||ge===3||ge===2)&&(ge=4),me===null||!(nn&268435455)&&!(Yo&268435455)||Dt(me,we)}function Ro(e,t){var n=Q;Q|=2;var r=sd();(me!==e||we!==t)&&(pt=null,Zt(e,t));do try{tg();break}catch(o){ld(e,o)}while(!0);if(oa(),Q=n,Mo.current=r,fe!==null)throw Error(M(261));return me=null,we=0,ge}function tg(){for(;fe!==null;)ad(fe)}function ng(){for(;fe!==null&&!Ef();)ad(fe)}function ad(e){var t=cd(e.alternate,e,Te);e.memoizedProps=e.pendingProps,t===null?id(e):fe=t,ya.current=null}function id(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Kp(n,t),n!==null){n.flags&=32767,fe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ge=6,fe=null;return}}else if(n=Xp(n,t,Te),n!==null){fe=n;return}if(t=t.sibling,t!==null){fe=t;return}fe=t=e}while(t!==null);ge===0&&(ge=5)}function Yt(e,t,n){var r=Z,o=Ye.transition;try{Ye.transition=null,Z=1,rg(e,t,n,r)}finally{Ye.transition=o,Z=r}return null}function rg(e,t,n,r){do In();while(It!==null);if(Q&6)throw Error(M(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(Tf(e,l),e===me&&(fe=me=null,we=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zr||(Zr=!0,dd(mo,function(){return In(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Ye.transition,Ye.transition=null;var a=Z;Z=1;var i=Q;Q|=4,ya.current=null,Zp(e,n),nd(n,e),Np(as),xo=!!ss,as=ss=null,e.current=n,Jp(n),Lf(),Q=i,Z=a,Ye.transition=l}else e.current=n;if(Zr&&(Zr=!1,It=e,Fo=o),l=e.pendingLanes,l===0&&(Tt=null),If(n.stateNode),Re(e,ce()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(zo)throw zo=!1,e=Es,Es=null,e;return Fo&1&&e.tag!==0&&In(),l=e.pendingLanes,l&1?e===Ls?fr++:(fr=0,Ls=e):fr=0,Wt(),null}function In(){if(It!==null){var e=Uu(Fo),t=Ye.transition,n=Z;try{if(Ye.transition=null,Z=16>e?16:e,It===null)var r=!1;else{if(e=It,It=null,Fo=0,Q&6)throw Error(M(331));var o=Q;for(Q|=4,B=e.current;B!==null;){var l=B,a=l.child;if(B.flags&16){var i=l.deletions;if(i!==null){for(var u=0;u<i.length;u++){var c=i[u];for(B=c;B!==null;){var d=B;switch(d.tag){case 0:case 11:case 15:cr(8,d,l)}var f=d.child;if(f!==null)f.return=d,B=f;else for(;B!==null;){d=B;var p=d.sibling,x=d.return;if(qc(d),d===c){B=null;break}if(p!==null){p.return=x,B=p;break}B=x}}}var y=l.alternate;if(y!==null){var N=y.child;if(N!==null){y.child=null;do{var D=N.sibling;N.sibling=null,N=D}while(N!==null)}}B=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,B=a;else e:for(;B!==null;){if(l=B,l.flags&2048)switch(l.tag){case 0:case 11:case 15:cr(9,l,l.return)}var h=l.sibling;if(h!==null){h.return=l.return,B=h;break e}B=l.return}}var g=e.current;for(B=g;B!==null;){a=B;var m=a.child;if(a.subtreeFlags&2064&&m!==null)m.return=a,B=m;else e:for(a=g;B!==null;){if(i=B,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:Go(9,i)}}catch(C){ue(i,i.return,C)}if(i===a){B=null;break e}var w=i.sibling;if(w!==null){w.return=i.return,B=w;break e}B=i.return}}if(Q=o,Wt(),it&&typeof it.onPostCommitFiberRoot=="function")try{it.onPostCommitFiberRoot(Oo,e)}catch{}r=!0}return r}finally{Z=n,Ye.transition=t}}return!1}function Ui(e,t,n){t=Tn(n,t),t=Uc(e,t,1),e=_t(e,t,1),t=Le(),e!==null&&(Ir(e,1,t),Re(e,t))}function ue(e,t,n){if(e.tag===3)Ui(e,e,n);else for(;t!==null;){if(t.tag===3){Ui(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tt===null||!Tt.has(r))){e=Tn(n,e),e=Hc(t,e,1),t=_t(t,e,1),e=Le(),t!==null&&(Ir(t,1,e),Re(t,e));break}}t=t.return}}function og(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Le(),e.pingedLanes|=e.suspendedLanes&n,me===e&&(we&n)===n&&(ge===4||ge===3&&(we&130023424)===we&&500>ce()-va?Zt(e,0):xa|=n),Re(e,t)}function ud(e,t){t===0&&(e.mode&1?(t=$r,$r<<=1,!($r&130023424)&&($r=4194304)):t=1);var n=Le();e=wt(e,t),e!==null&&(Ir(e,t,n),Re(e,n))}function lg(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),ud(e,n)}function sg(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(t),ud(e,n)}var cd;cd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ze.current)Me=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Me=!1,Yp(e,t,n);Me=!!(e.flags&131072)}else Me=!1,oe&&t.flags&1048576&&gc(t,Co,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;io(e,t),e=t.pendingProps;var o=zn(t,Ce.current);Pn(t,n),o=fa(null,t,r,e,o,n);var l=pa();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fe(r)?(l=!0,No(t)):l=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,aa(t),o.updater=Vo,t.stateNode=o,o._reactInternals=t,ms(t,r,e,n),t=vs(null,t,r,!0,l,n)):(t.tag=0,oe&&l&&ea(t),Ee(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(io(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=ig(r),e=Je(r,e),o){case 0:t=xs(null,t,r,e,n);break e;case 1:t=Mi(null,t,r,e,n);break e;case 11:t=Pi(null,t,r,e,n);break e;case 14:t=Ii(null,t,r,Je(r.type,e),n);break e}throw Error(M(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Je(r,o),xs(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Je(r,o),Mi(e,t,r,o,n);case 3:e:{if(Yc(t),e===null)throw Error(M(387));r=t.pendingProps,l=t.memoizedState,o=l.element,wc(e,t),Lo(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){o=Tn(Error(M(423)),t),t=zi(e,t,r,n,o);break e}else if(r!==o){o=Tn(Error(M(424)),t),t=zi(e,t,r,n,o);break e}else for(Oe=Rt(t.stateNode.containerInfo.firstChild),Ae=t,oe=!0,et=null,n=xc(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fn(),r===o){t=jt(e,t,n);break e}Ee(e,t,r,n)}t=t.child}return t;case 5:return jc(t),e===null&&ps(t),r=t.type,o=t.pendingProps,l=e!==null?e.memoizedProps:null,a=o.children,is(r,o)?a=null:l!==null&&is(r,l)&&(t.flags|=32),Gc(e,t),Ee(e,t,a,n),t.child;case 6:return e===null&&ps(t),null;case 13:return Xc(e,t,n);case 4:return ia(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Rn(t,null,r,n):Ee(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Je(r,o),Pi(e,t,r,o,n);case 7:return Ee(e,t,t.pendingProps,n),t.child;case 8:return Ee(e,t,t.pendingProps.children,n),t.child;case 12:return Ee(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,l=t.memoizedProps,a=o.value,ee(bo,r._currentValue),r._currentValue=a,l!==null)if(rt(l.value,a)){if(l.children===o.children&&!ze.current){t=jt(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var i=l.dependencies;if(i!==null){a=l.child;for(var u=i.firstContext;u!==null;){if(u.context===r){if(l.tag===1){u=yt(-1,n&-n),u.tag=2;var c=l.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}l.lanes|=n,u=l.alternate,u!==null&&(u.lanes|=n),gs(l.return,n,t),i.lanes|=n;break}u=u.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(M(341));a.lanes|=n,i=a.alternate,i!==null&&(i.lanes|=n),gs(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}Ee(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,Pn(t,n),o=Xe(o),r=r(o),t.flags|=1,Ee(e,t,r,n),t.child;case 14:return r=t.type,o=Je(r,t.pendingProps),o=Je(r.type,o),Ii(e,t,r,o,n);case 15:return Wc(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:Je(r,o),io(e,t),t.tag=1,Fe(r)?(e=!0,No(t)):e=!1,Pn(t,n),$c(t,r,o),ms(t,r,o,n),vs(null,t,r,!0,e,n);case 19:return Kc(e,t,n);case 22:return Vc(e,t,n)}throw Error(M(156,t.tag))};function dd(e,t){return Ou(e,t)}function ag(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ge(e,t,n,r){return new ag(e,t,n,r)}function Na(e){return e=e.prototype,!(!e||!e.isReactComponent)}function ig(e){if(typeof e=="function")return Na(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Us)return 11;if(e===Hs)return 14}return 2}function At(e,t){var n=e.alternate;return n===null?(n=Ge(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function fo(e,t,n,r,o,l){var a=2;if(r=e,typeof e=="function")Na(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case hn:return Jt(n.children,o,l,t);case $s:a=8,o|=8;break;case Bl:return e=Ge(12,n,t,o|2),e.elementType=Bl,e.lanes=l,e;case $l:return e=Ge(13,n,t,o),e.elementType=$l,e.lanes=l,e;case Ul:return e=Ge(19,n,t,o),e.elementType=Ul,e.lanes=l,e;case ju:return Xo(n,o,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case vu:a=10;break e;case wu:a=9;break e;case Us:a=11;break e;case Hs:a=14;break e;case bt:a=16,r=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=Ge(a,n,t,o),t.elementType=e,t.type=r,t.lanes=l,t}function Jt(e,t,n,r){return e=Ge(7,e,r,t),e.lanes=n,e}function Xo(e,t,n,r){return e=Ge(22,e,r,t),e.elementType=ju,e.lanes=n,e.stateNode={isHidden:!1},e}function Il(e,t,n){return e=Ge(6,e,null,t),e.lanes=n,e}function Ml(e,t,n){return t=Ge(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ug(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fl(0),this.expirationTimes=fl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fl(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function ka(e,t,n,r,o,l,a,i,u){return e=new ug(e,t,n,i,u),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Ge(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},aa(l),e}function cg(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function fd(e){if(!e)return $t;e=e._reactInternals;e:{if(ln(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fe(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var n=e.type;if(Fe(n))return fc(e,n,t)}return t}function pd(e,t,n,r,o,l,a,i,u){return e=ka(n,r,!0,e,o,l,a,i,u),e.context=fd(null),n=e.current,r=Le(),o=Ot(n),l=yt(r,o),l.callback=t??null,_t(n,l,o),e.current.lanes=o,Ir(e,o,r),Re(e,r),e}function Ko(e,t,n,r){var o=t.current,l=Le(),a=Ot(o);return n=fd(n),t.context===null?t.context=n:t.pendingContext=n,t=yt(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=_t(o,t,a),e!==null&&(nt(e,o,a,l),lo(e,o,a)),a}function _o(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Hi(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Ca(e,t){Hi(e,t),(e=e.alternate)&&Hi(e,t)}function dg(){return null}var gd=typeof reportError=="function"?reportError:function(e){console.error(e)};function ba(e){this._internalRoot=e}Qo.prototype.render=ba.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));Ko(e,t,null,null)};Qo.prototype.unmount=ba.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;rn(function(){Ko(null,e,null,null)}),t[vt]=null}};function Qo(e){this._internalRoot=e}Qo.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vu();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Lt.length&&t!==0&&t<Lt[n].priority;n++);Lt.splice(n,0,e),n===0&&Yu(e)}};function Ea(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Zo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Wi(){}function fg(e,t,n,r,o){if(o){if(typeof r=="function"){var l=r;r=function(){var c=_o(a);l.call(c)}}var a=pd(t,r,e,0,null,!1,!1,"",Wi);return e._reactRootContainer=a,e[vt]=a.current,jr(e.nodeType===8?e.parentNode:e),rn(),a}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var i=r;r=function(){var c=_o(u);i.call(c)}}var u=ka(e,0,!1,null,null,!1,!1,"",Wi);return e._reactRootContainer=u,e[vt]=u.current,jr(e.nodeType===8?e.parentNode:e),rn(function(){Ko(t,u,n,r)}),u}function Jo(e,t,n,r,o){var l=n._reactRootContainer;if(l){var a=l;if(typeof o=="function"){var i=o;o=function(){var u=_o(a);i.call(u)}}Ko(t,a,e,o)}else a=fg(n,t,e,o,r);return _o(a)}Hu=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=nr(t.pendingLanes);n!==0&&(Gs(t,n|1),Re(t,ce()),!(Q&6)&&(On=ce()+500,Wt()))}break;case 13:rn(function(){var r=wt(e,1);if(r!==null){var o=Le();nt(r,e,1,o)}}),Ca(e,1)}};Ys=function(e){if(e.tag===13){var t=wt(e,134217728);if(t!==null){var n=Le();nt(t,e,134217728,n)}Ca(e,134217728)}};Wu=function(e){if(e.tag===13){var t=Ot(e),n=wt(e,t);if(n!==null){var r=Le();nt(n,e,t,r)}Ca(e,t)}};Vu=function(){return Z};Gu=function(e,t){var n=Z;try{return Z=e,t()}finally{Z=n}};Jl=function(e,t,n){switch(t){case"input":if(Vl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=Uo(r);if(!o)throw Error(M(90));Nu(r),Vl(r,o)}}}break;case"textarea":Cu(e,n);break;case"select":t=n.value,t!=null&&bn(e,!!n.multiple,t,!1)}};Mu=wa;zu=rn;var pg={usingClientEntryPoint:!1,Events:[zr,vn,Uo,Pu,Iu,wa]},qn={findFiberByHostInstance:Xt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gg={bundleType:qn.bundleType,version:qn.version,rendererPackageName:qn.rendererPackageName,rendererConfig:qn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:St.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=_u(e),e===null?null:e.stateNode},findFiberByHostInstance:qn.findFiberByHostInstance||dg,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Jr=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Jr.isDisabled&&Jr.supportsFiber)try{Oo=Jr.inject(gg),it=Jr}catch{}}$e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pg;$e.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ea(t))throw Error(M(200));return cg(e,t,null,n)};$e.createRoot=function(e,t){if(!Ea(e))throw Error(M(299));var n=!1,r="",o=gd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=ka(e,1,!1,null,null,n,!1,r,o),e[vt]=t.current,jr(e.nodeType===8?e.parentNode:e),new ba(t)};$e.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=_u(t),e=e===null?null:e.stateNode,e};$e.flushSync=function(e){return rn(e)};$e.hydrate=function(e,t,n){if(!Zo(t))throw Error(M(200));return Jo(null,e,t,!0,n)};$e.hydrateRoot=function(e,t,n){if(!Ea(e))throw Error(M(405));var r=n!=null&&n.hydratedSources||null,o=!1,l="",a=gd;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=pd(t,null,e,1,n??null,o,!1,l,a),e[vt]=t.current,jr(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new Qo(t)};$e.render=function(e,t,n){if(!Zo(t))throw Error(M(200));return Jo(null,e,t,!1,n)};$e.unmountComponentAtNode=function(e){if(!Zo(e))throw Error(M(40));return e._reactRootContainer?(rn(function(){Jo(null,null,e,!1,function(){e._reactRootContainer=null,e[vt]=null})}),!0):!1};$e.unstable_batchedUpdates=wa;$e.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Zo(n))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return Jo(e,t,n,!1,r)};$e.version="18.3.1-next-f1338f8080-20240426";function hd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(hd)}catch(e){console.error(e)}}hd(),hu.exports=$e;var hg=hu.exports,Vi=hg;Ol.createRoot=Vi.createRoot,Ol.hydrateRoot=Vi.hydrateRoot;const mg={},Gi=e=>{let t;const n=new Set,r=(d,f)=>{const p=typeof d=="function"?d(t):d;if(!Object.is(p,t)){const x=t;t=f??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(y=>y(t,x))}},o=()=>t,u={setState:r,getState:o,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(mg?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,o,u);return u},yg=e=>e?Gi(e):Gi;var md={exports:{}},yd={},xd={exports:{}},vd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var An=S;function xg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var vg=typeof Object.is=="function"?Object.is:xg,wg=An.useState,jg=An.useEffect,Sg=An.useLayoutEffect,Ng=An.useDebugValue;function kg(e,t){var n=t(),r=wg({inst:{value:n,getSnapshot:t}}),o=r[0].inst,l=r[1];return Sg(function(){o.value=n,o.getSnapshot=t,zl(o)&&l({inst:o})},[e,n,t]),jg(function(){return zl(o)&&l({inst:o}),e(function(){zl(o)&&l({inst:o})})},[e]),Ng(n),n}function zl(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!vg(e,n)}catch{return!0}}function Cg(e,t){return t()}var bg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Cg:kg;vd.useSyncExternalStore=An.useSyncExternalStore!==void 0?An.useSyncExternalStore:bg;xd.exports=vd;var Eg=xd.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qo=S,Lg=Eg;function Dg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Pg=typeof Object.is=="function"?Object.is:Dg,Ig=Lg.useSyncExternalStore,Mg=qo.useRef,zg=qo.useEffect,Fg=qo.useMemo,Rg=qo.useDebugValue;yd.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var l=Mg(null);if(l.current===null){var a={hasValue:!1,value:null};l.current=a}else a=l.current;l=Fg(function(){function u(x){if(!c){if(c=!0,d=x,x=r(x),o!==void 0&&a.hasValue){var y=a.value;if(o(y,x))return f=y}return f=x}if(y=f,Pg(d,x))return y;var N=r(x);return o!==void 0&&o(y,N)?(d=x,y):(d=x,f=N)}var c=!1,d,f,p=n===void 0?null:n;return[function(){return u(t())},p===null?void 0:function(){return u(p())}]},[t,n,r,o]);var i=Ig(e,l[0],l[1]);return zg(function(){a.hasValue=!0,a.value=i},[i]),Rg(i),i};md.exports=yd;var _g=md.exports;const Tg=nu(_g),wd={},{useDebugValue:Og}=pu,{useSyncExternalStoreWithSelector:Ag}=Tg;let Yi=!1;const Bg=e=>e;function $g(e,t=Bg,n){(wd?"production":void 0)!=="production"&&n&&!Yi&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Yi=!0);const r=Ag(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Og(r),r}const Ug=e=>{(wd?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?yg(e):e,n=(r,o)=>$g(t,r,o);return Object.assign(n,t),n},Hg=e=>Ug,Fl={BASE_URL:"/PixelConnect/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},Is=new Map,qr=e=>{const t=Is.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},Wg=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=Is.get(n.name);if(r)return{type:"tracked",store:e,...r};const o={connection:t.connect(n),stores:{}};return Is.set(n.name,o),{type:"tracked",store:e,...o}},Vg=(e,t={})=>(n,r,o)=>{const{enabled:l,anonymousActionType:a,store:i,...u}=t;let c;try{c=(l??(Fl?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!c)return(Fl?"production":void 0)!=="production"&&l&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,o);const{connection:d,...f}=Wg(i,c,u);let p=!0;o.setState=(N,D,h)=>{const g=n(N,D);if(!p)return g;const m=h===void 0?{type:a||"anonymous"}:typeof h=="string"?{type:h}:h;return i===void 0?(d==null||d.send(m,r()),g):(d==null||d.send({...m,type:`${i}/${m.type}`},{...qr(u.name),[i]:o.getState()}),g)};const x=(...N)=>{const D=p;p=!1,n(...N),p=D},y=e(o.setState,r,o);if(f.type==="untracked"?d==null||d.init(y):(f.stores[f.store]=o,d==null||d.init(Object.fromEntries(Object.entries(f.stores).map(([N,D])=>[N,N===f.store?y:D.getState()])))),o.dispatchFromDevtools&&typeof o.dispatch=="function"){let N=!1;const D=o.dispatch;o.dispatch=(...h)=>{(Fl?"production":void 0)!=="production"&&h[0].type==="__setState"&&!N&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),N=!0),D(...h)}}return d.subscribe(N=>{var D;switch(N.type){case"ACTION":if(typeof N.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Rl(N.payload,h=>{if(h.type==="__setState"){if(i===void 0){x(h.state);return}Object.keys(h.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const g=h.state[i];if(g==null)return;JSON.stringify(o.getState())!==JSON.stringify(g)&&x(g);return}o.dispatchFromDevtools&&typeof o.dispatch=="function"&&o.dispatch(h)});case"DISPATCH":switch(N.payload.type){case"RESET":return x(y),i===void 0?d==null?void 0:d.init(o.getState()):d==null?void 0:d.init(qr(u.name));case"COMMIT":if(i===void 0){d==null||d.init(o.getState());return}return d==null?void 0:d.init(qr(u.name));case"ROLLBACK":return Rl(N.state,h=>{if(i===void 0){x(h),d==null||d.init(o.getState());return}x(h[i]),d==null||d.init(qr(u.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Rl(N.state,h=>{if(i===void 0){x(h);return}JSON.stringify(o.getState())!==JSON.stringify(h[i])&&x(h[i])});case"IMPORT_STATE":{const{nextLiftedState:h}=N.payload,g=(D=h.computedStates.slice(-1)[0])==null?void 0:D.state;if(!g)return;x(i===void 0?g:g[i]),d==null||d.send(null,h);return}case"PAUSE_RECORDING":return p=!p}return}}),y},Gg=Vg,Rl=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)},Xi={version:"1.0.0",projectName:"Untitled",created:new Date().toISOString(),modified:new Date().toISOString(),canvas:{width:3276,height:3276,backgroundColor:null,borderColor:"#000000",borderWidth:0,borderOpacity:1,borderEnabled:!0,shadowIntensity:.5,showCheckeredBackground:!1,dragInfoEnabled:!0},viewport:{zoom:100,panX:0,panY:0},grid:{enabled:!1,density:4},rulers:{enabled:!1,guides:[]},layers:[],metadata:{author:"",description:"",tags:[]}},_l={past:[],future:[],maxSteps:50},Tl={activeTool:"select",showRulers:!1,showSelectionBorders:!0,selectionBorderAnimationSpeed:.1,clipboardLayers:[],isDraggingLayer:!1,dragLayerId:null,dragStartX:0,dragStartY:0,dragOffsetX:0,dragOffsetY:0},b=Hg()(Gg(e=>({project:Xi,selectedLayerIds:[],isDirty:!1,history:_l,ui:Tl,setProjectName:t=>{e(n=>({project:{...n.project,projectName:t,modified:new Date().toISOString()},isDirty:!0}))},setCanvasConfig:t=>{e(n=>({project:{...n.project,canvas:{...n.project.canvas,...t},modified:new Date().toISOString()},isDirty:!0}))},setViewport:t=>{e(n=>({project:{...n.project,viewport:{...n.project.viewport,...t}}}))},setProjectMetadata:t=>{e(n=>({project:{...n.project,metadata:{...n.project.metadata,...t},modified:new Date().toISOString()},isDirty:!0}))},addLayer:t=>{e(n=>({project:{...n.project,layers:[...n.project.layers,{...t,id:t.id||`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}],modified:new Date().toISOString()},isDirty:!0}))},removeLayer:t=>{e(n=>({project:{...n.project,layers:n.project.layers.filter(r=>r.id!==t),modified:new Date().toISOString()},selectedLayerIds:n.selectedLayerIds.filter(r=>r!==t),isDirty:!0}))},updateLayer:(t,n)=>{e(r=>({project:{...r.project,layers:r.project.layers.map(o=>o.id===t?{...o,...n}:o),modified:new Date().toISOString()},isDirty:!0}))},duplicateLayer:t=>{e(n=>{const r=n.project.layers.find(l=>l.id===t);if(!r)return n;const o={...r,id:`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:`${r.name} (copy)`,zIndex:Math.max(...n.project.layers.map(l=>l.zIndex),0)+1};return{project:{...n.project,layers:[...n.project.layers,o],modified:new Date().toISOString()},isDirty:!0}})},moveLayer:(t,n,r)=>{e(o=>{const l=b.getState(),a=[...l.history.past,l.project];return a.length>l.history.maxSteps&&a.shift(),{project:{...o.project,layers:o.project.layers.map(i=>{if(i.id===t&&!i.locked){const u=Math.floor(i.x+n),c=Math.floor(i.y+r);return{...i,x:u,y:c}}return i}),modified:new Date().toISOString()},history:{...l.history,past:a,future:[]},isDirty:!0}})},reorderLayer:(t,n)=>{e(r=>{var c,d;const o=(c=r.project.layers.find(f=>f.id===t))==null?void 0:c.zIndex;if(o===void 0)return r;const l=r.project.layers.map(f=>f.zIndex).sort((f,p)=>f-p),a=l.indexOf(o);if(n==="up"&&a===l.length-1||n==="down"&&a===0)return r;const i=n==="up"?l[a+1]:l[a-1],u=(d=r.project.layers.find(f=>f.zIndex===i))==null?void 0:d.id;return u?{project:{...r.project,layers:r.project.layers.map(f=>f.id===t?{...f,zIndex:i}:f.id===u?{...f,zIndex:o}:f),modified:new Date().toISOString()},isDirty:!0}:r})},reorderSelectedLayers:t=>{e(n=>{if(n.selectedLayerIds.length===0)return n;const r=n.project.layers.map(i=>i.zIndex).sort((i,u)=>i-u),o=n.project.layers.filter(i=>n.selectedLayerIds.includes(i.id)).map(i=>i.zIndex).sort((i,u)=>i-u),l=Math.min(...o),a=Math.max(...o);if(t==="up"&&a===r[r.length-1]||t==="down"&&l===r[0])return n;if(t==="up"){const i=r.find(u=>u>a);return i===void 0?n:{project:{...n.project,layers:n.project.layers.map(u=>n.selectedLayerIds.includes(u.id)?{...u,zIndex:i}:u.zIndex===i?{...u,zIndex:a}:u),modified:new Date().toISOString()},isDirty:!0}}else{const i=[...r].reverse().find(u=>u<l);return i===void 0?n:{project:{...n.project,layers:n.project.layers.map(u=>n.selectedLayerIds.includes(u.id)?{...u,zIndex:i}:u.zIndex===i?{...u,zIndex:l}:u),modified:new Date().toISOString()},isDirty:!0}}})},bringLayerToFront:t=>{e(n=>{const r=Math.max(...n.project.layers.map(o=>o.zIndex),0);return{project:{...n.project,layers:n.project.layers.map(o=>o.id===t?{...o,zIndex:r+1}:o),modified:new Date().toISOString()},isDirty:!0}})},sendLayerToBack:t=>{e(n=>{const r=Math.min(...n.project.layers.map(o=>o.zIndex),0);return{project:{...n.project,layers:n.project.layers.map(o=>o.id===t?{...o,zIndex:r-1}:o),modified:new Date().toISOString()},isDirty:!0}})},selectLayer:(t,n=!1)=>{e(r=>n?{selectedLayerIds:r.selectedLayerIds.includes(t)?r.selectedLayerIds.filter(o=>o!==t):[...r.selectedLayerIds,t]}:{selectedLayerIds:[t]})},selectAllLayers:()=>{e(t=>({selectedLayerIds:t.project.layers.map(n=>n.id)}))},deselectAllLayers:()=>{e({selectedLayerIds:[]})},selectLayerRange:(t,n)=>{e(r=>{const o=r.project.layers.map(d=>d.id),l=o.indexOf(t),a=o.indexOf(n);if(l===-1||a===-1)return r;const[i,u]=l<a?[l,a]:[a,l];return{selectedLayerIds:o.slice(i,u+1)}})},moveSelectedLayers:(t,n)=>{e(r=>({project:{...r.project,layers:r.project.layers.map(o=>{if(r.selectedLayerIds.includes(o.id)&&!o.locked){const l=Math.floor(o.x+t),a=Math.floor(o.y+n);return{...o,x:l,y:a}}return o}),modified:new Date().toISOString()},isDirty:!0}))},deleteSelectedLayers:()=>{e(t=>({project:{...t.project,layers:t.project.layers.filter(n=>!t.selectedLayerIds.includes(n.id)),modified:new Date().toISOString()},selectedLayerIds:[],isDirty:!0}))},toggleVisibilitySelected:()=>{e(t=>{const n=t.selectedLayerIds.every(r=>{var o;return(o=t.project.layers.find(l=>l.id===r))==null?void 0:o.visible});return{project:{...t.project,layers:t.project.layers.map(r=>t.selectedLayerIds.includes(r.id)?{...r,visible:!n}:r),modified:new Date().toISOString()},isDirty:!0}})},startDraggingLayer:(t,n,r)=>{e(o=>({ui:{...o.ui,isDraggingLayer:!0,dragLayerId:t,dragStartX:n,dragStartY:r}}))},updateDragPosition:(t,n)=>{e(r=>{if(!r.ui.isDraggingLayer)return r;let o=t-r.ui.dragStartX,l=n-r.ui.dragStartY;return o=Math.round(o),l=Math.round(l),{ui:{...r.ui,dragOffsetX:o,dragOffsetY:l}}})},stopDraggingLayer:()=>{e(t=>{if(!t.ui.isDraggingLayer||!t.ui.dragLayerId)return t;const n=t.selectedLayerIds.includes(t.ui.dragLayerId)?t.selectedLayerIds:[t.ui.dragLayerId],r=t.ui.dragOffsetX,o=t.ui.dragOffsetY,l=r!==0||o!==0,i={project:{...t.project,layers:t.project.layers.map(u=>n.includes(u.id)&&!u.locked?{...u,x:Math.floor(u.x+r),y:Math.floor(u.y+o)}:u),modified:new Date().toISOString()},ui:{...t.ui,isDraggingLayer:!1,dragLayerId:null,dragOffsetX:0,dragOffsetY:0},isDirty:!0};if(l){const u=b.getState(),{viewport:c,...d}=u.project,f=[...u.history.past,d];return f.length>u.history.maxSteps&&f.shift(),{...i,history:{...u.history,past:f,future:[]},_lastHistoryPushAt:Date.now()}}return i})},pushHistory:()=>{e(t=>{const{viewport:n,...r}=t.project,o=[...t.history.past,r];return o.length>t.history.maxSteps&&o.shift(),{history:{...t.history,past:o,future:[]},_lastHistoryPushAt:Date.now()}})},undo:()=>{e(t=>{if(t.history.past.length===0)return t;const n=[...t.history.past],r=n.pop();if(!r)return t;const{viewport:o,...l}=t.project,a=[l,...t.history.future];return{project:{...r,viewport:t.project.viewport},history:{...t.history,past:n,future:a},_lastHistoryPushAt:Date.now()}})},redo:()=>{e(t=>{if(t.history.future.length===0)return t;const n=[...t.history.future],r=n.shift(),{viewport:o,...l}=t.project,a=[...t.history.past,l];return r?{project:{...r,viewport:t.project.viewport},history:{...t.history,past:a,future:n},_lastHistoryPushAt:Date.now()}:t})},setActiveTool:t=>{e(n=>({ui:{...n.ui,activeTool:t}}))},toggleGrid:()=>{e(t=>({project:{...t.project,grid:{...t.project.grid,enabled:!t.project.grid.enabled},modified:new Date().toISOString()},isDirty:!0}))},setGridDensity:t=>{e(n=>({project:{...n.project,grid:{...n.project.grid,density:Math.max(1,Math.min(8,t))},modified:new Date().toISOString()},isDirty:!0}))},toggleRulers:()=>{e(t=>({project:{...t.project,rulers:{...t.project.rulers,enabled:!t.project.rulers.enabled},modified:new Date().toISOString()},isDirty:!0}))},toggleSelectionBorders:()=>{e(t=>({ui:{...t.ui,showSelectionBorders:!t.ui.showSelectionBorders}}))},setSelectionBorderAnimationSpeed:t=>{e(n=>({ui:{...n.ui,selectionBorderAnimationSpeed:Math.max(0,Math.min(1,t))}}))},copySelectedLayers:()=>{e(t=>({ui:{...t.ui,clipboardLayers:t.project.layers.filter(n=>t.selectedLayerIds.includes(n.id))}}))},pasteSelectedLayers:()=>{e(t=>{const n=Math.max(...t.project.layers.map(o=>o.zIndex),0),r=t.ui.clipboardLayers.map((o,l)=>({...o,id:`layer_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,x:o.x+10,y:o.y+10,zIndex:n+l+1}));return{project:{...t.project,layers:[...t.project.layers,...r],modified:new Date().toISOString()},selectedLayerIds:r.map(o=>o.id),isDirty:!0}})},cropCanvasToLayers:()=>{e(t=>{if(t.project.layers.length===0)return console.warn("[DEBUG] No layers to crop to"),t;let n=1/0,r=1/0,o=-1/0,l=-1/0;t.project.layers.forEach(f=>{n=Math.min(n,f.x),r=Math.min(r,f.y),o=Math.max(o,f.x+f.width),l=Math.max(l,f.y+f.height)});const a=Math.ceil(o-n),i=Math.ceil(l-r),u=n,c=r;if(a<=0||i<=0)return console.warn("[DEBUG] Invalid bounds for crop"),t;console.log(`[DEBUG] Cropping canvas to layers: ${a}x${i} at offset (${u}, ${c})`);const d=t.project.layers.map(f=>({...f,x:f.x-u,y:f.y-c}));return{project:{...t.project,canvas:{...t.project.canvas,width:a,height:i},layers:d,modified:new Date().toISOString()},isDirty:!0}})},resetProject:()=>{e({project:Xi,selectedLayerIds:[],isDirty:!1,history:_l,ui:Tl})},loadProject:t=>{e({project:t,selectedLayerIds:[],isDirty:!1,history:_l,ui:Tl})},markDirty:()=>{e({isDirty:!0})},markClean:()=>{e({isDirty:!1})}}),{name:"CompositorStore",enabled:!0}));function Yg({canvas:e,gridEnabled:t,viewport:n,canvasWidth:r,canvasHeight:o,gridDensity:l,canvasBorderEnabled:a}){const i=S.useRef(null),u=S.useRef(null);return S.useEffect(()=>{if(!i.current||!e||!u.current)return;const c=i.current,d=c.getContext("2d");if(!d)return;const f=50;if(!t||n.zoom<f){d.clearRect(0,0,c.width,c.height);return}const p=n.zoom/100;c.width=u.current.clientWidth,c.height=u.current.clientHeight,d.clearRect(0,0,c.width,c.height);let x=0;n.zoom<=f?x=0:n.zoom<150?x=(n.zoom-f)/100*.3:x=.4;let y=l;if(p<3){const k=9/(p*3);y=l*k}d.strokeStyle=`rgba(0, 0, 0, ${x})`,d.lineWidth=1;const N=e.getBoundingClientRect(),D=u.current.getBoundingClientRect();let h=N.left-D.left,g=N.top-D.top,m=N.width,w=N.height;const C=a?1:0;h+=C,g+=C,m-=C*2,w-=C*2,d.save(),d.beginPath(),d.rect(h,g,m,w),d.clip();const L=c.width/2,v=c.height/2,E=r/2,O=o/2,P=0,$=0,V=E-(L-P)/p+n.panX,A=O-(v-$)/p+n.panY,T=Math.floor(V/y)*y,j=Math.ceil((V+c.width/p)/y)*y;for(let k=T;k<=j;k+=y){const I=Math.round((k-V)*p);I>=0&&I<=c.width&&(d.beginPath(),d.moveTo(I,0),d.lineTo(I,c.height),d.stroke())}const _=Math.floor(A/y)*y,H=Math.ceil((A+c.height/p)/y)*y;for(let k=_;k<=H;k+=y){const I=Math.round((k-A)*p);I>=0&&I<=c.height&&(d.beginPath(),d.moveTo(0,I),d.lineTo(c.width,I),d.stroke())}d.restore()},[t,n,r,o,e,l,a]),s.jsx("div",{ref:u,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none",overflow:"hidden"},children:s.jsx("canvas",{ref:i,style:{position:"absolute",top:0,left:0,imageRendering:"pixelated"}})})}const Xg=({offsetX:e,offsetY:t,mouseX:n,mouseY:r})=>s.jsx("div",{style:{position:"fixed",left:`${n+10}px`,top:`${r+10}px`,pointerEvents:"none",zIndex:1e3},children:s.jsxs("div",{className:"bg-panel-bg border border-border rounded px-2 py-1 text-xs text-gray-300 whitespace-nowrap shadow-lg",children:[s.jsxs("div",{children:["X: ",e>0?"+":"",e]}),s.jsxs("div",{children:["Y: ",t>0?"+":"",t]})]})});function Kg(){const e=S.useRef(null),t=S.useRef(null),n=b(j=>j.project),r=b(j=>j.selectedLayerIds),o=b(j=>j.ui.showSelectionBorders),l=b(j=>j.ui.selectionBorderAnimationSpeed),a=b(j=>j.ui.isDraggingLayer),i=b(j=>j.ui.dragLayerId),u=b(j=>j.ui.dragOffsetX),c=b(j=>j.ui.dragOffsetY),d=b(j=>j.selectLayer),f=b(j=>j.deselectAllLayers),p=b(j=>j.startDraggingLayer),x=b(j=>j.updateDragPosition),y=b(j=>j.stopDraggingLayer),N=b(j=>j.setViewport),[D,h]=S.useState(new Map),[g,m]=S.useState(!1),[w,C]=S.useState({x:0,y:0}),[L,v]=S.useState(null),[E,O]=S.useState({x:0,y:0});S.useEffect(()=>{(async()=>{var H;const _=new Map;for(const k of n.layers)if(!D.has(k.id)||((H=D.get(k.id))==null?void 0:H.src)!==k.imageData)try{const I=new Image;I.src=k.imageData,await new Promise((z,W)=>{I.onload=()=>z(),I.onerror=()=>W(new Error(`Failed to load image for layer: ${k.name}`))}),_.set(k.id,I)}catch{}h(k=>new Map([...k,..._]))})()},[n.layers]),S.useEffect(()=>{const j=t.current,_=e.current;if(!j||!_||n.viewport.zoom!==100||n.viewport.panX!==0||n.viewport.panY!==0)return;const H=j.clientWidth,k=j.clientHeight,I=n.canvas.width,z=n.canvas.height,W=H/I*100*.9,X=k/z*100*.9,ie=Math.min(W,X,100);N({zoom:Math.max(ie,10)})},[]),S.useEffect(()=>{const j=e.current;if(!j){console.warn("[DEBUG] Canvas element not found");return}const _=j.getContext("2d");if(!_){console.error("[DEBUG] Failed to get canvas context");return}if(_.imageSmoothingEnabled=!1,_.webkitImageSmoothingEnabled=!1,_.mozImageSmoothingEnabled=!1,j.width=n.canvas.width,j.height=n.canvas.height,_.clearRect(0,0,j.width,j.height),n.canvas.backgroundColor&&(_.fillStyle=n.canvas.backgroundColor,_.fillRect(0,0,j.width,j.height)),n.canvas.showCheckeredBackground&&!n.canvas.backgroundColor){const I=document.createElement("canvas");I.width=8*2,I.height=8*2;const z=I.getContext("2d");if(z){z.fillStyle="#ffffff",z.fillRect(0,0,8*2,8*2),z.fillStyle="#cccccc",z.fillRect(0,0,8,8),z.fillRect(8,8,8,8);const W=_.createPattern(I,"repeat");W&&(_.fillStyle=W,_.fillRect(0,0,j.width,j.height))}}if(n.canvas.borderWidth&&n.canvas.borderWidth>0){const k=n.canvas.borderWidth;_.strokeStyle=n.canvas.borderColor,_.globalAlpha=n.canvas.borderOpacity,_.lineWidth=k*2;const I=k/2;_.strokeRect(I,I,j.width-k,j.height-k),_.globalAlpha=1}const H=[...n.layers].filter(k=>k.visible).sort((k,I)=>k.zIndex-I.zIndex);for(const k of H){const I=D.get(k.id);if(!I){console.warn(`[DEBUG] Image not loaded for layer: ${k.name}`);continue}const z=b.getState(),W=z.ui.isDraggingLayer&&(z.ui.dragLayerId===k.id||z.selectedLayerIds.includes(k.id)&&z.selectedLayerIds.includes(z.ui.dragLayerId));let X=Math.floor(k.x),ie=Math.floor(k.y);W&&(X+=z.ui.dragOffsetX,ie+=z.ui.dragOffsetY);const ye=_.globalAlpha;_.globalAlpha=k.opacity!==void 0?k.opacity:1,_.drawImage(I,X,ie),_.globalAlpha=ye}},[n,D,a,i,u,c]);const P=(j,_)=>{const H=t.current;if(!H)return{x:0,y:0};const k=H.getBoundingClientRect(),I=j-k.left-20,z=_-k.top-20,W=k.width-40,X=k.height-40,ie=W/2,ye=X/2,ot=I-ie,xe=z-ye,He=n.viewport.zoom/100,_e=ot/He,F=xe/He,te=n.canvas.width/2,de=n.canvas.height/2,ct=te+_e+n.viewport.panX,Nt=de+F+n.viewport.panY;return{x:ct,y:Nt}},$=j=>{if(!e.current){console.warn("[DEBUG] Canvas ref not available");return}if(j.button===1){j.preventDefault(),m(!0),C({x:j.clientX,y:j.clientY});return}if(j.button!==0)return;const{x:H,y:k}=P(j.clientX,j.clientY),I=[...n.layers].filter(z=>z.visible).sort((z,W)=>W.zIndex-z.zIndex);for(const z of I)if(H>=z.x&&H<z.x+z.width&&k>=z.y&&k<z.y+z.height){if(z.locked){d(z.id,j.ctrlKey||j.metaKey);return}const W=j.ctrlKey||j.metaKey;r.includes(z.id)&&!W||d(z.id,W),p(z.id,H,k);return}f(),m(!0),C({x:j.clientX,y:j.clientY})},V=j=>{if(!e.current)return;O({x:j.clientX,y:j.clientY});const{x:H,y:k}=P(j.clientX,j.clientY);if(v({x:Math.floor(H),y:Math.floor(k)}),g){const z=n.viewport.zoom/100,W=j.clientX-w.x,X=j.clientY-w.y,ie=n.viewport.panX-W/z,ye=n.viewport.panY-X/z;N({panX:ie,panY:ye}),C({x:j.clientX,y:j.clientY});return}b.getState().ui.isDraggingLayer&&x(H,k)},A=()=>{m(!1),y()},T=j=>{j.preventDefault();const _=j.deltaY>0?-1:1,H=n.viewport.zoom,k=[25,50,75,100,125,150,200,250,300,400,500,600,800,1200,1600,3200];let I=H;_>0?I=k.find(z=>z>H)||k[k.length-1]:I=[...k].reverse().find(z=>z<H)||k[0],N({zoom:I})};return s.jsxs("div",{ref:t,className:"relative w-full h-full bg-canvas-bg overflow-hidden cursor-crosshair",style:{paddingTop:"20px",paddingLeft:"20px"},onMouseDown:$,onMouseMove:V,onMouseUp:A,onMouseLeave:A,onWheel:T,children:[s.jsxs("div",{className:"w-full h-full flex items-center justify-center",style:{width:"calc(100% - 20px)",height:"calc(100% - 20px)",overflowX:"auto",overflowY:"auto"},children:[s.jsxs("div",{style:{transform:`translate(${-n.viewport.panX*(n.viewport.zoom/100)}px, ${-n.viewport.panY*(n.viewport.zoom/100)}px) scale(${n.viewport.zoom/100})`,transformOrigin:"center center",position:"absolute"},children:[s.jsx("canvas",{ref:e,style:{imageRendering:"pixelated",backfaceVisibility:"hidden",WebkitFontSmoothing:"antialiased",outline:n.canvas.borderEnabled?"1px solid rgb(75, 85, 99)":"none",outlineOffset:"0px",boxShadow:n.canvas.shadowIntensity>0?`0 10px 40px rgba(0, 0, 0, ${.5*n.canvas.shadowIntensity})`:"none"}}),o&&r.length>0&&s.jsxs("svg",{width:n.canvas.width,height:n.canvas.height,style:{position:"absolute",top:0,left:0,pointerEvents:"none",overflow:"visible",display:"block"},children:[n.layers.map(j=>{if(!r.includes(j.id))return null;const _=a&&(i===j.id||r.includes(i));let H=Math.floor(j.x),k=Math.floor(j.y);_&&(H+=u,k+=c);const z=j.textContent!==void 0&&r.length===1;return s.jsxs("g",{children:[s.jsx("rect",{x:H-.12,y:k-.25,width:j.width+.3,height:j.height+.3,fill:"none",stroke:"#b0b0b0",strokeWidth:"0.25",strokeDasharray:"4,4",style:{animation:l>0?`marching-ants ${8/(.125*l)/1e3}s linear infinite`:"none"}}),s.jsx("rect",{x:H-.12,y:k-.25,width:j.width+.3,height:j.height+.3,fill:"none",stroke:"#505050",strokeWidth:"0.25",strokeDasharray:"4,4",strokeDashoffset:"2",style:{animation:l>0?`marching-ants ${8/(.125*l)/1e3}s linear infinite`:"none"}}),z&&s.jsxs("g",{transform:`translate(${H-12}, ${k-12})`,style:{cursor:"pointer",pointerEvents:"auto"},onClick:W=>{var X;W.stopPropagation(),(X=window.openTextLayerModal)==null||X.call(window,j)},onMouseDown:W=>W.stopPropagation(),children:[s.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"#2563eb",stroke:"#ffffff",strokeWidth:"1.5"}),s.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z",fill:"white",transform:"translate(6, 6) scale(0.5)"})]})]},j.id)}),s.jsx("style",{children:`
                @keyframes marching-ants {
                  0% {
                    stroke-dashoffset: 0;
                  }
                  100% {
                    stroke-dashoffset: -8;
                  }
                }
              `})]})]}),s.jsx(Yg,{canvas:e.current,gridEnabled:n.grid.enabled,viewport:n.viewport,canvasWidth:n.canvas.width,canvasHeight:n.canvas.height,gridDensity:n.grid.density,canvasBorderEnabled:n.canvas.borderEnabled})]}),s.jsxs("div",{className:"absolute bottom-4 right-4 bg-panel-bg border border-border rounded px-3 py-2 text-xs text-gray-400 space-y-1",children:[s.jsxs("div",{children:["Canvas: ",n.canvas.width,"x",n.canvas.height]}),s.jsxs("div",{children:["Zoom: ",n.viewport.zoom,"%"]}),s.jsxs("div",{children:["Layers: ",n.layers.length]}),L&&s.jsxs("div",{children:["Coords: (",L.x,", ",L.y,")"]}),s.jsx("div",{className:"text-gray-500 text-xs mt-2 pt-2 border-t border-border",children:"Middle-click to pan"})]}),r.length>0&&s.jsxs("div",{className:"absolute top-4 right-4 bg-panel-bg border border-blue-600 rounded px-3 py-2 text-xs text-blue-400",children:["Selected: ",r.length," layer",r.length!==1?"s":""]}),a&&n.canvas.dragInfoEnabled&&s.jsx(Xg,{offsetX:u,offsetY:c,mouseX:E.x,mouseY:E.y})]})}const Qg="1.0.0",jd="1.0.0";function Sd(e){const t={...e,modified:new Date().toISOString()};return JSON.stringify(t,null,2)}async function La(e){try{const t=JSON.parse(e);if(!t.version)throw new Error("Invalid project file: missing version field");if(!Zg(t.version))throw new Error(`Project version ${t.version} is not supported. Current version: ${Qg}, minimum supported: ${jd}`);return Jg(t),await qg(t.layers),t}catch(t){throw console.error("[DEBUG] Project deserialization failed:",t),t}}function Zg(e){const[t,n]=e.split(".").map(Number),[r,o]=jd.split(".").map(Number);return t>r||t<r?!1:n>=o}function Jg(e){const t=["version","canvas","layers","viewport","grid","rulers"];for(const n of t)if(!(n in e))throw new Error(`Invalid project file: missing required field '${n}'`);if(typeof e.canvas.width!="number"||e.canvas.width<=0)throw new Error("Invalid project file: canvas width must be a positive number");if(typeof e.canvas.height!="number"||e.canvas.height<=0)throw new Error("Invalid project file: canvas height must be a positive number");if(!Array.isArray(e.layers))throw new Error("Invalid project file: layers must be an array");for(let n=0;n<e.layers.length;n++){const r=e.layers[n],o=["id","name","imageData","x","y","zIndex","visible","locked","width","height"];for(const l of o)if(!(l in r))throw new Error(`Invalid layer ${n}: missing required field '${l}'`);if(typeof r.x!="number"||typeof r.y!="number")throw new Error(`Invalid layer ${n}: x and y must be numbers`);if(!r.imageData.startsWith("data:image/"))throw new Error(`Invalid layer ${n}: imageData must be a valid data URL`)}}async function qg(e){for(let t=0;t<e.length;t++){const n=e[t];try{await Nd(n.imageData)}catch(r){throw new Error(`Failed to load image for layer ${t} (${n.name}): ${r instanceof Error?r.message:"Unknown error"}`)}}}function Nd(e){return new Promise((t,n)=>{const r=new Image,o=setTimeout(()=>{n(new Error("Image load timeout"))},5e3);r.onload=()=>{clearTimeout(o),t(r)},r.onerror=()=>{clearTimeout(o),n(new Error("Failed to load image"))},r.src=e})}async function eh(e,t,n,r=1,o=null){const l=document.createElement("canvas");l.width=t*r,l.height=n*r;const a=l.getContext("2d");if(!a)throw new Error("Failed to get canvas context");a.imageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=!1,a.scale(r,r),o&&(a.fillStyle=o,a.fillRect(0,0,t,n));const i=[...e].filter(u=>u.visible).sort((u,c)=>u.zIndex-c.zIndex);for(const u of i)try{const c=await Nd(u.imageData);a.drawImage(c,u.x,u.y)}catch(c){console.warn(`Failed to export layer ${u.name}:`,c)}return new Promise(u=>{l.toBlob(c=>{if(!c)throw new Error("Failed to create PNG blob");u(c)},"image/png")})}function th(){const e=S.useRef(null),t=b(l=>l.addLayer),n=b(l=>l.loadProject),r=b(l=>l.markClean),o=async l=>{const a=l.currentTarget.files;if(!a){console.warn("[DEBUG] No files selected");return}for(const i of Array.from(a))try{if(i.name.toLowerCase().endsWith(".pixcomp"))try{const p=await i.text(),x=await La(p);n(x),r(),e.current&&(e.current.value="");return}catch(p){console.error("[DEBUG] Load project failed:",p),alert(`Error loading project: ${p instanceof Error?p.message:"Unknown error"}`);continue}if(!["image/png","image/gif","image/bmp","image/jpeg"].includes(i.type)){console.warn(`[DEBUG] Unsupported file type: ${i.type}`),alert(`Unsupported file type: ${i.type}. Please use .pixcomp, PNG, GIF, BMP, or JPEG.`);continue}const u=await new Promise((p,x)=>{const y=new FileReader;y.onload=N=>{var D;return p((D=N.target)==null?void 0:D.result)},y.onerror=()=>x(new Error("Failed to read file")),y.readAsDataURL(i)}),c=new Image;c.src=u,await new Promise((p,x)=>{c.onload=()=>p(),c.onerror=()=>x(new Error("Failed to load image"))});const d=c.naturalWidth,f=c.naturalHeight;t({name:i.name,imageData:u,x:0,y:0,zIndex:b.getState().project.layers.length,visible:!0,locked:!1,opacity:1,width:d,height:f})}catch(u){alert(`Error loading image ${i.name}: ${u instanceof Error?u.message:"Unknown error"}`)}e.current&&(e.current.value="")};return s.jsxs("div",{className:"w-full h-full flex flex-col relative",children:[s.jsx("div",{className:"flex-1 relative overflow-hidden",children:s.jsx(Kg,{})}),b(l=>l.project.layers.length===0)&&s.jsx("div",{onClick:()=>{var l;return(l=e.current)==null?void 0:l.click()},className:"absolute inset-0 flex items-center justify-center bg-black bg-opacity-30 cursor-pointer hover:bg-opacity-40 transition-all z-10",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl mb-4",children:""}),s.jsx("div",{className:"text-lg font-semibold text-white mb-2",children:"Click to upload images or drag & drop"}),s.jsx("div",{className:"text-sm text-gray-400",children:"Supported: .pixcomp, PNG, GIF, BMP, JPEG"})]})}),s.jsx("input",{ref:e,type:"file",multiple:!0,accept:".pixcomp,image/png,image/gif,image/bmp,image/jpeg",onChange:o,className:"hidden"})]})}const Ms=[{name:"Arial",value:"Arial, sans-serif",category:"system"},{name:"Times New Roman",value:'"Times New Roman", Times, serif',category:"system"},{name:"Courier New",value:'"Courier New", Courier, monospace',category:"system"},{name:"Georgia",value:"Georgia, serif",category:"system"},{name:"Verdana",value:"Verdana, sans-serif",category:"system"},{name:"Comic Sans MS",value:'"Comic Sans MS", "Comic Sans", cursive',category:"system"},{name:"Impact",value:"Impact, Charcoal, sans-serif",category:"system"},{name:"Trebuchet MS",value:'"Trebuchet MS", Helvetica, sans-serif',category:"system"},{name:"Jokerman",value:"Jokerman, fantasy",category:"system"}],nh=[{name:"Roboto",value:"Roboto, sans-serif",category:"google",googleFontName:"Roboto"},{name:"Open Sans",value:'"Open Sans", sans-serif',category:"google",googleFontName:"Open+Sans"},{name:"Lato",value:"Lato, sans-serif",category:"google",googleFontName:"Lato"},{name:"Montserrat",value:"Montserrat, sans-serif",category:"google",googleFontName:"Montserrat"},{name:"Poppins",value:"Poppins, sans-serif",category:"google",googleFontName:"Poppins"},{name:"Oswald",value:"Oswald, sans-serif",category:"google",googleFontName:"Oswald"},{name:"Raleway",value:"Raleway, sans-serif",category:"google",googleFontName:"Raleway"},{name:"Ubuntu",value:"Ubuntu, sans-serif",category:"google",googleFontName:"Ubuntu"},{name:"Nunito",value:"Nunito, sans-serif",category:"google",googleFontName:"Nunito"},{name:"PT Sans",value:'"PT Sans", sans-serif',category:"google",googleFontName:"PT+Sans"},{name:"Merriweather",value:"Merriweather, serif",category:"google",googleFontName:"Merriweather"},{name:"Playfair Display",value:'"Playfair Display", serif',category:"google",googleFontName:"Playfair+Display"},{name:"Lora",value:"Lora, serif",category:"google",googleFontName:"Lora"},{name:"PT Serif",value:'"PT Serif", serif',category:"google",googleFontName:"PT+Serif"},{name:"Crimson Text",value:'"Crimson Text", serif',category:"google",googleFontName:"Crimson+Text"},{name:"EB Garamond",value:'"EB Garamond", serif',category:"google",googleFontName:"EB+Garamond"},{name:"Libre Baskerville",value:'"Libre Baskerville", serif',category:"google",googleFontName:"Libre+Baskerville"},{name:"Cormorant",value:"Cormorant, serif",category:"google",googleFontName:"Cormorant"},{name:"Spectral",value:"Spectral, serif",category:"google",googleFontName:"Spectral"},{name:"Bitter",value:"Bitter, serif",category:"google",googleFontName:"Bitter"},{name:"Bebas Neue",value:'"Bebas Neue", cursive',category:"google",googleFontName:"Bebas+Neue"},{name:"Pacifico",value:"Pacifico, cursive",category:"google",googleFontName:"Pacifico"},{name:"Righteous",value:"Righteous, cursive",category:"google",googleFontName:"Righteous"},{name:"Bangers",value:"Bangers, cursive",category:"google",googleFontName:"Bangers"},{name:"Permanent Marker",value:'"Permanent Marker", cursive',category:"google",googleFontName:"Permanent+Marker"},{name:"Lobster",value:"Lobster, cursive",category:"google",googleFontName:"Lobster"},{name:"Press Start 2P",value:'"Press Start 2P", cursive',category:"google",googleFontName:"Press+Start+2P"},{name:"Fredoka One",value:'"Fredoka One", cursive',category:"google",googleFontName:"Fredoka+One"},{name:"Alfa Slab One",value:'"Alfa Slab One", cursive',category:"google",googleFontName:"Alfa+Slab+One"},{name:"Rubik Mono One",value:'"Rubik Mono One", sans-serif',category:"google",googleFontName:"Rubik+Mono+One"},{name:"Dancing Script",value:'"Dancing Script", cursive',category:"google",googleFontName:"Dancing+Script"},{name:"Caveat",value:"Caveat, cursive",category:"google",googleFontName:"Caveat"},{name:"Shadows Into Light",value:'"Shadows Into Light", cursive',category:"google",googleFontName:"Shadows+Into+Light"},{name:"Satisfy",value:"Satisfy, cursive",category:"google",googleFontName:"Satisfy"},{name:"Indie Flower",value:'"Indie Flower", cursive',category:"google",googleFontName:"Indie+Flower"},{name:"Architects Daughter",value:'"Architects Daughter", cursive',category:"google",googleFontName:"Architects+Daughter"},{name:"Kalam",value:"Kalam, cursive",category:"google",googleFontName:"Kalam"},{name:"Amatic SC",value:'"Amatic SC", cursive',category:"google",googleFontName:"Amatic+SC"},{name:"Patrick Hand",value:'"Patrick Hand", cursive',category:"google",googleFontName:"Patrick+Hand"},{name:"Courgette",value:"Courgette, cursive",category:"google",googleFontName:"Courgette"},{name:"Roboto Mono",value:'"Roboto Mono", monospace',category:"google",googleFontName:"Roboto+Mono"},{name:"Source Code Pro",value:'"Source Code Pro", monospace',category:"google",googleFontName:"Source+Code+Pro"},{name:"Fira Code",value:'"Fira Code", monospace',category:"google",googleFontName:"Fira+Code"},{name:"JetBrains Mono",value:'"JetBrains Mono", monospace',category:"google",googleFontName:"JetBrains+Mono"},{name:"Space Mono",value:'"Space Mono", monospace',category:"google",googleFontName:"Space+Mono"},{name:"Courier Prime",value:'"Courier Prime", monospace',category:"google",googleFontName:"Courier+Prime"},{name:"Inconsolata",value:"Inconsolata, monospace",category:"google",googleFontName:"Inconsolata"},{name:"IBM Plex Mono",value:'"IBM Plex Mono", monospace',category:"google",googleFontName:"IBM+Plex+Mono"},{name:"Anonymous Pro",value:'"Anonymous Pro", monospace',category:"google",googleFontName:"Anonymous+Pro"},{name:"Overpass Mono",value:'"Overpass Mono", monospace',category:"google",googleFontName:"Overpass+Mono"},{name:"Creepster",value:'"Creepster", cursive',category:"google",googleFontName:"Creepster"},{name:"Frijole",value:'"Frijole", cursive',category:"google",googleFontName:"Frijole"},{name:"Spicy Rice",value:'"Spicy Rice", cursive',category:"google",googleFontName:"Spicy+Rice"},{name:"Ranchers",value:'"Ranchers", cursive',category:"google",googleFontName:"Ranchers"},{name:"Chewy",value:'"Chewy", cursive',category:"google",googleFontName:"Chewy"}],zs=[...Ms,...nh],Ki=new Set;async function rh(e){return Ki.has(e)?Promise.resolve():new Promise((t,n)=>{const r=document.createElement("link");r.rel="stylesheet",r.href=`https://fonts.googleapis.com/css2?family=${e}:wght@400;700&display=swap`,r.onload=()=>{Ki.add(e),t()},r.onerror=()=>{console.error(`Failed to load Google Font: ${e}`),n(new Error(`Failed to load font: ${e}`))},document.head.appendChild(r)})}function oh(e){return zs.find(t=>t.value===e)}const kd=4;function lh(e,t,n,r,o,l=1.2,a=kd,i=0,u="normal"){e.font=`${u} ${n*a}px ${r}`,typeof e.letterSpacing<"u"&&(e.letterSpacing=`${i*a}px`);const c=[],d=t.split(`
`);for(const y of d){if(!y.trim()){c.push("");continue}if(!o){c.push(y);continue}const N=y.split(" ");let D="";for(const h of N){const g=D?`${D} ${h}`:h;e.measureText(g).width/a>o&&D?(c.push(D),D=h):D=g}D&&c.push(D)}let f=0;for(const y of c){const D=e.measureText(y).width/a;f=Math.max(f,D)}const p=n*l,x=c.length*p;return{width:Math.ceil(f),height:Math.ceil(x),lines:c}}async function Qi(e){const{text:t,fontSize:n,fontFamily:r,color:o,textAlign:l="left",maxWidth:a,lineHeight:i=1.2,disableTransparency:u=!1,letterSpacing:c=0,fontWeight:d="normal"}=e,f=oh(r);if((f==null?void 0:f.category)==="google"&&f.googleFontName)try{await rh(f.googleFontName),await new Promise(A=>setTimeout(A,100))}catch(A){console.error("Failed to load Google Font, using fallback:",A)}const x=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});if(!x)throw new Error("Failed to get canvas context");const y=u?1:kd,{width:N,height:D,lines:h}=lh(x,t,n,r,a,i,y,c,d),g=10,m=g*y,w=(N+g*2)*y,C=(D+g*2)*y,L=document.createElement("canvas");L.width=w,L.height=C;const v=L.getContext("2d",{willReadFrequently:!0});if(!v)throw new Error("Failed to get canvas context");v.font=`${d} ${n*y}px ${r}`,typeof v.letterSpacing<"u"&&(v.letterSpacing=`${c*y}px`),v.fillStyle=o,v.textBaseline="top",v.imageSmoothingEnabled=!u,v.imageSmoothingQuality=u?"low":"high";const E=n*i*y;let O=m;for(const A of h){if(!A){O+=E;continue}let T=m;if(l==="center"){const j=v.measureText(A).width;T=(w-j)/2}else if(l==="right"){const j=v.measureText(A).width;T=w-j-m}v.fillText(A,T,O),O+=E}if(u){const A=v.getImageData(0,0,L.width,L.height),T=A.data,j=parseInt(o.slice(1,3),16),_=parseInt(o.slice(3,5),16),H=parseInt(o.slice(5,7),16);for(let k=0;k<T.length;k+=4)T[k+3]>=128?(T[k+3]=255,T[k]=j,T[k+1]=_,T[k+2]=H):T[k+3]=0;v.putImageData(A,0,0)}const P=document.createElement("canvas");P.width=N+g*2,P.height=D+g*2;const $=P.getContext("2d",{willReadFrequently:!0});if(!$)throw new Error("Failed to get final canvas context");return $.imageSmoothingEnabled=!u,$.imageSmoothingQuality=u?"low":"high",$.drawImage(L,0,0,w,C,0,0,P.width,P.height),{dataUrl:P.toDataURL("image/png"),width:P.width,height:P.height}}function Zi(e){return e.textContent!==void 0&&e.textContent!==null}let Ze=null;function sh({layer:e,isSelected:t}){const n=b(j=>j.selectLayer),r=b(j=>j.selectLayerRange),o=b(j=>j.updateLayer),l=b(j=>j.removeLayer),a=b(j=>j.reorderLayer),i=b(j=>j.bringLayerToFront),u=b(j=>j.sendLayerToBack),c=b(j=>j.duplicateLayer),[d,f]=S.useState(!1),[p,x]=S.useState(e.name),[y,N]=S.useState(!1),D=S.useRef(null);S.useEffect(()=>{const j=()=>{Ze&&(Ze=null,N(!1))};document.addEventListener("mouseup",j);const _=H=>{(H.clientY<0||H.clientX<0||H.clientX>window.innerWidth||H.clientY>window.innerHeight)&&Ze&&(Ze=null,N(!1))};return document.addEventListener("mousemove",_),()=>{document.removeEventListener("mouseup",j),document.removeEventListener("mousemove",_)}},[]);const h=j=>{const _=j.ctrlKey||j.metaKey;if(j.shiftKey&&b.getState().selectedLayerIds.length>0){const k=b.getState().selectedLayerIds[b.getState().selectedLayerIds.length-1];r(k,e.id)}else n(e.id,_)},g=j=>{j.stopPropagation(),n(e.id,!0)},m=j=>{j.target.closest("button")||d||(Ze=e.id,t||n(e.id,!1))},w=()=>{if(!Ze||Ze===e.id){N(!1);return}N(!0);const j=b.getState().project.layers.find(H=>H.id===Ze),_=j&&j.zIndex<e.zIndex?"up":"down";a(Ze,_)},C=()=>{N(!1)},L=()=>{Ze&&(Ze=null)},v=j=>{j.stopPropagation(),o(e.id,{visible:!e.visible})},E=j=>{j.stopPropagation(),o(e.id,{locked:!e.locked})},O=()=>{p.trim()?o(e.id,{name:p.trim()}):x(e.name),f(!1)},P=j=>{j.key==="Enter"?O():j.key==="Escape"&&(x(e.name),f(!1))},$=j=>{j.stopPropagation(),l(e.id)},V=j=>{j.stopPropagation(),c(e.id)},A=j=>{j.stopPropagation(),i(e.id)},T=j=>{j.stopPropagation(),u(e.id)};return s.jsxs("div",{ref:D,onClick:h,onMouseDown:m,onMouseEnter:w,onMouseLeave:C,onMouseUp:L,title:"Click to select  Ctrl/Cmd+Click for multi-select  Shift+Click for range select",className:`group p-2 rounded border transition-all cursor-pointer select-none ${y?"bg-green-900 border-green-400 scale-105":""} ${t?"bg-blue-900 border-blue-500 text-white":"bg-panel-bg border-border text-gray-300 hover:bg-gray-800"}`,children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("button",{onClick:g,onMouseDown:j=>j.stopPropagation(),className:`w-4 h-4 flex-shrink-0 rounded border-2 flex items-center justify-center transition-colors ${t?"bg-white border-white":"bg-gray-700 border-gray-600 hover:border-gray-500"}`,title:"Select/deselect this layer",children:t&&s.jsx("svg",{className:"w-3 h-3 text-black",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"w-8 h-8 flex-shrink-0 bg-canvas-bg border border-gray-600 rounded overflow-hidden relative",children:[s.jsx("img",{src:e.imageData,alt:e.name,className:"w-full h-full object-contain",style:{imageRendering:"pixelated"}}),Zi(e)&&s.jsx("div",{className:"absolute bottom-0 right-0 bg-blue-600 text-white text-[8px] font-bold px-1 rounded-tl",title:"Text Layer",children:"T"})]}),s.jsx("div",{className:"flex-1 min-w-0",children:d?s.jsx("input",{autoFocus:!0,type:"text",value:p,onChange:j=>x(j.target.value),onBlur:O,onKeyDown:P,onClick:j=>j.stopPropagation(),className:"w-full px-1 py-0 bg-canvas-bg border border-blue-400 rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-300",placeholder:"Layer name..."}):s.jsx("span",{className:"text-xs font-medium truncate block",title:e.name,children:e.name})}),!d&&s.jsx("button",{onClick:j=>{j.stopPropagation(),x(e.name),f(!0)},className:"w-4 h-4 flex items-center justify-center flex-shrink-0 rounded transition-colors hover:bg-gray-600 opacity-0 group-hover:opacity-100",title:"Rename layer",children:s.jsx("svg",{className:"w-3 h-3 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),s.jsx("button",{onClick:v,className:"w-5 h-5 flex items-center justify-center flex-shrink-0 rounded transition-colors hover:bg-gray-600",title:e.visible?"Hide layer":"Show layer",children:e.visible?s.jsxs("svg",{className:"w-4 h-4 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20",children:[s.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),s.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):s.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-5.838 1.834l-2.455-2.541zM12.305 15.93A9.959 9.959 0 0110 15c-4.478 0-8.268-2.943-9.542-7a9.88 9.88 0 011.964-2.964l2.386 2.386c-.078.464-.12.94-.12 1.424 0 3.314 2.686 6 6 6a5.975 5.975 0 002.717-.632l2.472 2.472z",clipRule:"evenodd"})})}),s.jsx("button",{onClick:E,className:"w-5 h-5 flex items-center justify-center flex-shrink-0 rounded transition-colors hover:bg-gray-600",title:e.locked?"Unlock layer":"Lock layer",children:e.locked?s.jsx("svg",{className:"w-4 h-4 text-gray-300",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}):s.jsx("svg",{className:"w-4 h-4 text-gray-500",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M10 2a5 5 0 00-5 5v2a2 2 0 00-2 2v5a2 2 0 002 2h10a2 2 0 002-2v-5a2 2 0 00-2-2V7a5 5 0 00-5-5zm0 2a3 3 0 013 3v2H7V7a3 3 0 013-3z"})})})]}),s.jsxs("div",{className:"text-xs text-gray-500 px-10 mb-2",children:[e.width,"",e.height,"  z:",e.zIndex]}),s.jsxs("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[Zi(e)&&s.jsx("button",{onClick:j=>{var _;j.stopPropagation(),(_=window.openTextLayerModal)==null||_.call(window,e)},className:"flex-1 px-1 py-1 text-xs bg-blue-700 hover:bg-blue-600 rounded transition-colors flex items-center justify-center",title:"Edit text",children:s.jsx("span",{className:"font-bold text-sm",children:"T"})}),s.jsx("button",{onClick:A,className:"flex-1 px-1 py-1 text-xs bg-gray-700 hover:bg-gray-600 rounded transition-colors flex items-center justify-center",title:"Bring to front",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 11l5-5m0 0l5 5m-5-5v12"})})}),s.jsx("button",{onClick:T,className:"flex-1 px-1 py-1 text-xs bg-gray-700 hover:bg-gray-600 rounded transition-colors flex items-center justify-center",title:"Send to back",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 9l-5 5m0 0l-5-5m5 5V2"})})}),s.jsx("button",{onClick:V,className:"flex-1 px-1 py-1 text-xs bg-blue-700 hover:bg-blue-600 rounded transition-colors flex items-center justify-center",title:"Duplicate layer",children:s.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[s.jsx("path",{d:"M4 4a2 2 0 012-2h6a2 2 0 012 2v12a1 1 0 110 2h-6a2 2 0 01-2-2V4z"}),s.jsx("path",{d:"M14 4a2 2 0 00-2-2v12a2 2 0 002 2h2a2 2 0 002-2V4h-4z"})]})}),s.jsx("button",{onClick:$,className:"flex-1 px-1 py-1 text-xs bg-red-700 hover:bg-red-600 rounded transition-colors flex items-center justify-center",title:"Remove layer",children:s.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]})}function ah(){const e=S.useRef(null),t=b(d=>d.project),n=b(d=>d.selectedLayerIds),r=b(d=>d.selectAllLayers),o=b(d=>d.deselectAllLayers),l=b(d=>d.deleteSelectedLayers),a=b(d=>d.addLayer),i=[...t.layers].sort((d,f)=>f.zIndex-d.zIndex),u=()=>{if(n.length===0){console.warn("[DEBUG] No layers selected for deletion");return}window.confirm(`Delete ${n.length} layer${n.length!==1?"s":""}?`)&&l()},c=async d=>{const f=d.currentTarget.files;if(!f){console.warn("[DEBUG] No files selected");return}for(const p of Array.from(f))try{if(!["image/png","image/gif","image/bmp","image/jpeg"].includes(p.type)){console.warn(`[DEBUG] Unsupported file type: ${p.type}`),alert(`Unsupported file type: ${p.type}. Please use PNG, GIF, BMP, or JPEG.`);continue}const x=await new Promise((h,g)=>{const m=new FileReader;m.onload=w=>{var C;return h((C=w.target)==null?void 0:C.result)},m.onerror=()=>g(new Error("Failed to read file")),m.readAsDataURL(p)}),y=new Image;y.src=x,await new Promise((h,g)=>{y.onload=()=>h(),y.onerror=()=>g(new Error("Failed to load image"))});const N=y.naturalWidth,D=y.naturalHeight;a({name:p.name,imageData:x,x:0,y:0,zIndex:b.getState().project.layers.length,visible:!0,locked:!1,opacity:1,width:N,height:D})}catch(x){alert(`Error loading image ${p.name}: ${x instanceof Error?x.message:"Unknown error"}`)}e.current&&(e.current.value="")};return s.jsxs("div",{className:"h-full flex flex-col bg-canvas-bg",children:[s.jsxs("div",{className:"px-3 py-3 border-b border-border",children:[s.jsx("h2",{className:"text-sm font-semibold text-gray-300 mb-3",children:"Layers"}),s.jsxs("div",{className:"flex gap-1 flex-wrap",children:[s.jsx("button",{onClick:r,disabled:t.layers.length===0,className:"flex-1 min-w-16 px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-300 bg-panel-bg hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Select all layers (Ctrl+A)",children:"All"}),s.jsx("button",{onClick:o,disabled:n.length===0,className:"flex-1 min-w-16 px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-300 bg-panel-bg hover:bg-gray-700 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Deselect all layers (Ctrl+D)",children:"None"}),s.jsx("button",{onClick:u,disabled:n.length===0,className:"flex-1 min-w-16 px-2 py-1 text-xs font-medium text-red-400 hover:text-red-300 bg-panel-bg hover:bg-red-900 rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete selected layers (Delete)",children:"Delete"}),s.jsx("button",{onClick:()=>{var d;return(d=window.openTextLayerModal)==null?void 0:d.call(window)},className:"flex-1 min-w-16 px-2 py-1 text-xs font-medium text-blue-400 hover:text-blue-300 bg-panel-bg hover:bg-blue-900 rounded transition-colors flex items-center justify-center gap-1",title:"Create text layer",children:s.jsx("span",{className:"font-bold",children:"T"})}),s.jsx("button",{onClick:()=>{var d;return(d=e.current)==null?void 0:d.click()},className:"flex-1 min-w-16 px-2 py-1 text-xs font-medium text-green-400 hover:text-green-300 bg-panel-bg hover:bg-green-900 rounded transition-colors",title:"Upload additional images",children:"Add"})]})]}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:i.length===0?s.jsxs("div",{className:"px-3 py-8 text-center text-sm text-gray-500",children:[s.jsx("div",{className:"mb-2",children:"No layers yet"}),s.jsx("div",{className:"text-xs",children:"Upload images to get started"})]}):s.jsx("div",{className:"space-y-1 p-2",children:i.map(d=>s.jsx(sh,{layer:d,isSelected:n.includes(d.id)},d.id))})}),t.layers.length>0&&s.jsxs("div",{className:"px-3 py-2 border-t border-border text-xs text-gray-500",children:[t.layers.length," layer",t.layers.length!==1?"s":"",n.length>0&&`  ${n.length} selected`]}),s.jsx("input",{ref:e,type:"file",multiple:!0,accept:"image/png,image/gif,image/bmp,image/jpeg",onChange:c,className:"hidden"})]})}function ih({layer:e}){const t=b(x=>x.updateLayer),n=b(x=>x.pushHistory),r=b(x=>x.ui.isDraggingLayer),o=b(x=>x.ui.dragLayerId),l=b(x=>x.ui.dragOffsetX),a=b(x=>x.ui.dragOffsetY),i=r&&o===e.id,u=i?Math.floor(e.x+l):e.x,c=i?Math.floor(e.y+a):e.y,d=x=>{const y=parseInt(x);isNaN(y)||t(e.id,{x:y})},f=x=>{const y=parseInt(x);isNaN(y)||t(e.id,{y})},p=()=>{n()};return s.jsxs("div",{className:"bg-panel-bg rounded p-3 space-y-3",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-300",children:"Position"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"X"}),s.jsx("input",{type:"number",value:u,onChange:x=>d(x.target.value),onBlur:p,className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"X position"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Y"}),s.jsx("input",{type:"number",value:c,onChange:x=>f(x.target.value),onBlur:p,className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"Y position"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 pt-2 border-t border-border",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Width"}),s.jsx("div",{className:"px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-gray-500",children:e.width})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Height"}),s.jsx("div",{className:"px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-gray-500",children:e.height})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Z-Index"}),s.jsx("div",{className:"px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-gray-500",children:e.zIndex})]})]})}function uh({layer:e}){const t=b(o=>o.updateLayer),n=o=>{const l=Math.max(0,Math.min(1,o/100));t(e.id,{opacity:l})},r=e.opacity!==void 0?e.opacity:1;return s.jsxs("div",{className:"bg-panel-bg rounded p-3 space-y-2",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-300",children:"Opacity"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("input",{type:"range",min:"0",max:"100",value:r*100,onChange:o=>n(parseInt(o.target.value)),className:"w-full h-2 bg-canvas-bg rounded appearance-none cursor-pointer accent-blue-400"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-gray-400",children:[(r*100).toFixed(0),"%"]}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("button",{onClick:()=>n(50),className:"px-2 py-1 text-xs bg-canvas-bg hover:bg-border rounded transition",title:"50% opacity",children:"50%"}),s.jsx("button",{onClick:()=>n(100),className:"px-2 py-1 text-xs bg-canvas-bg hover:bg-border rounded transition",title:"100% opacity (fully opaque)",children:"100%"})]})]})]})]})}const Cd="pixelconnect-preferences";function el(){try{const e=localStorage.getItem(Cd);if(e)return JSON.parse(e)}catch(e){console.warn("[DEBUG] Failed to load preferences from localStorage:",e)}return{}}function Da(e){try{localStorage.setItem(Cd,JSON.stringify(e))}catch(t){console.warn("[DEBUG] Failed to save preferences to localStorage:",t)}}function ch(){S.useEffect(()=>{const e=el();e.gridDensity!==void 0&&b.getState().setGridDensity(e.gridDensity),e.gridEnabled!==void 0&&b.getState().project.grid.enabled!==e.gridEnabled&&b.getState().toggleGrid(),e.showSelectionBorders!==void 0&&b.getState().ui.showSelectionBorders!==e.showSelectionBorders&&b.getState().toggleSelectionBorders(),e.selectionBorderAnimationSpeed!==void 0&&b.getState().setSelectionBorderAnimationSpeed(e.selectionBorderAnimationSpeed);const t={};e.canvasBorderColor!==void 0&&(t.borderColor=e.canvasBorderColor),e.canvasBorderWidth!==void 0&&(t.borderWidth=e.canvasBorderWidth),e.canvasBorderOpacity!==void 0&&(t.borderOpacity=e.canvasBorderOpacity),Object.keys(t).length>0&&b.getState().setCanvasConfig(t)},[])}function dh(){const e=b(d=>d.project.canvas),t=b(d=>d.project.layers),n=b(d=>d.setCanvasConfig),r=b(d=>d.cropCanvasToLayers),[o,l]=S.useState(!1);S.useEffect(()=>{const d=el();d.canvasBorderEnabled=e.borderEnabled,d.canvasShadowIntensity=e.shadowIntensity,Da(d)},[e.borderEnabled,e.shadowIntensity]);const a=d=>{const f=parseInt(d);!isNaN(f)&&f>0&&n({width:f})},i=d=>{const f=parseInt(d);!isNaN(f)&&f>0&&n({height:f})},u=d=>{d==="transparent"?n({backgroundColor:null}):d.startsWith("#")&&n({backgroundColor:d})},c=d=>{const[f,p]=d.split("x").map(Number);!isNaN(f)&&!isNaN(p)&&f>0&&p>0&&n({width:f,height:p})};return s.jsxs("div",{className:"border-t border-border bg-gray-850",children:[s.jsxs("button",{onClick:()=>l(!o),className:"w-full px-3 py-2 flex items-center justify-between text-xs font-semibold text-gray-300 hover:bg-gray-800 transition-colors group",children:[s.jsx("span",{children:"Canvas"}),s.jsx("span",{className:`text-gray-400 transition-transform group-hover:drop-shadow-lg group-hover:text-gray-200 ${o?"":"rotate-180"}`,children:""})]}),!o&&s.jsxs("div",{className:"p-3 space-y-3 bg-gray-850",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Common Sizes"}),s.jsxs("select",{onChange:d=>c(d.target.value),className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400 cursor-pointer",defaultValue:"",children:[s.jsx("option",{value:"",children:"Select a size..."}),s.jsx("option",{value:"1024x1024",children:"1024x1024"}),s.jsx("option",{value:"2048x2048",children:"2048x2048"}),s.jsx("option",{value:"1920x1080",children:"1920x1080"}),s.jsx("option",{value:"3840x2160",children:"3840x2160 (4K)"}),s.jsx("option",{value:"4632x2316",children:"4632x2316"}),s.jsx("option",{value:"2316x4632",children:"2316x4632 (Vertical)"}),s.jsx("option",{value:"3276x3276",children:"3276x3276"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Width"}),s.jsx("input",{type:"number",value:e.width,onChange:d=>a(d.target.value),min:1,className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"Width"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Height"}),s.jsx("input",{type:"number",value:e.height,onChange:d=>i(d.target.value),min:1,className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"Height"})]})]}),s.jsx("button",{onClick:r,disabled:t.length===0,className:`w-full px-3 py-2 rounded transition-colors text-xs font-medium ${t.length===0?"bg-gray-700 text-gray-500 cursor-not-allowed":"bg-slate-700 text-white hover:bg-slate-600"}`,title:t.length===0?"Add layers first to crop canvas":"Crop canvas to layer bounds",children:"Crop Canvas to Layers"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Background"}),s.jsxs("div",{className:"flex gap-1",children:[s.jsx("input",{type:"color",value:e.backgroundColor||"#ffffff",onChange:d=>u(d.target.value),className:"flex-1 h-8 rounded cursor-pointer border border-border",title:"Pick background color"}),s.jsx("button",{onClick:()=>u("transparent"),className:`flex-1 px-2 py-1 text-xs font-medium rounded transition-colors ${e.backgroundColor===null?"bg-blue-600 text-white":"bg-panel-bg text-gray-400 hover:text-gray-300"}`,title:"Set background to transparent",children:"Clear"})]})]}),s.jsxs("div",{className:"space-y-2 pt-2 border-t border-border",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-300",children:"Border"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"borderEnabled",checked:e.borderEnabled??!0,onChange:d=>n({borderEnabled:d.target.checked}),className:"w-4 h-4 rounded cursor-pointer",title:"Enable or disable canvas border"}),s.jsx("label",{htmlFor:"borderEnabled",className:"text-xs text-gray-400 cursor-pointer flex-1",children:"Show Border"})]})]}),s.jsxs("div",{className:"space-y-2 pt-2 border-t border-border",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-300",children:"Shadow"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Intensity"}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:e.shadowIntensity??.5,onChange:d=>n({shadowIntensity:parseFloat(d.target.value)}),className:"w-full h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer",title:"Shadow intensity (0 = off, 1 = max)"}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round((e.shadowIntensity??.5)*100),"%"]})]})]}),s.jsx("div",{className:"space-y-2 pt-2 border-t border-border",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"checkerboardBg",checked:e.showCheckeredBackground??!1,onChange:d=>n({showCheckeredBackground:d.target.checked}),disabled:e.backgroundColor!==null,className:"w-4 h-4 rounded cursor-pointer disabled:opacity-50",title:"Show checkered pattern for transparency (only available when background is transparent)"}),s.jsx("label",{htmlFor:"checkerboardBg",className:`text-xs cursor-pointer flex-1 ${e.backgroundColor!==null?"text-gray-600":"text-gray-400"}`,children:"Checkered Background"})]})}),s.jsx("div",{className:"space-y-2 pt-2 border-t border-border",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"dragInfoEnabled",checked:e.dragInfoEnabled??!0,onChange:d=>n({dragInfoEnabled:d.target.checked}),className:"w-4 h-4 rounded cursor-pointer",title:"Show drag translation info when dragging layers"}),s.jsx("label",{htmlFor:"dragInfoEnabled",className:"text-xs text-gray-400 cursor-pointer flex-1",children:"Show Drag Info"})]})})]})]})}function fh({layer:e}){const[t,n]=S.useState(null),[r,o]=S.useState(null),[l,a]=S.useState(!1),[i,u]=S.useState(new Set),[c,d]=S.useState(new Set),f=S.useRef(null),p=S.useRef(null),x=S.useRef(28);S.useEffect(()=>{n(null),o(null),u(new Set),d(new Set)},[e.id]);const y=()=>{if(!f.current||!t)return;const w=f.current,C=w.scrollTop,L=w.clientHeight,v=x.current,E=Math.max(0,Math.floor(C/v)-2),O=Math.min(t.length,Math.ceil((C+L)/v)+2),P=new Set;for(let $=E;$<O;$++)P.add($);u(P)},N=()=>{if(!p.current||!r)return;const w=p.current,C=w.scrollTop,L=w.clientHeight,v=x.current,E=Math.max(0,Math.floor(C/v)-2),O=Math.min(r.length,Math.ceil((C+L)/v)+2),P=new Set;for(let $=E;$<O;$++)P.add($);d(P)};S.useEffect(()=>{const w=f.current;if(w)return w.addEventListener("scroll",y),y(),()=>w.removeEventListener("scroll",y)},[t]),S.useEffect(()=>{const w=p.current;if(w)return w.addEventListener("scroll",N),N(),()=>w.removeEventListener("scroll",N)},[r]);const D=async w=>{a(!0);try{const C=new Image;C.onload=()=>{const L=document.createElement("canvas");L.width=C.width,L.height=C.height;const v=L.getContext("2d");if(!v){console.error("Failed to get canvas context"),a(!1);return}v.drawImage(C,0,0);const O=v.getImageData(0,0,L.width,L.height).data;if(w){const P=new Map;let $=0;for(let A=0;A<O.length;A+=4){const T=O[A],j=O[A+1],_=O[A+2],H=O[A+3];if(H===0)continue;$++;const I=`${`#${((1<<24)+(T<<16)+(j<<8)+_).toString(16).slice(1).toUpperCase()}`}${H.toString(16).padStart(2,"0").toUpperCase()}`;P.set(I,(P.get(I)||0)+1)}$=Math.max(1,$);const V=Array.from(P.entries()).map(([A,T])=>{const j=A.substring(0,7),_=parseInt(A.substring(7),16);return{hex:j,count:T,percent:T/$*100,hasAlpha:!0,alpha:_}}).filter(A=>!(A.hex==="#000000"&&A.alpha===0)).sort((A,T)=>T.count-A.count);o(V),d(new Set)}else{const P=new Map;let $=0;for(let A=0;A<O.length;A+=4){const T=O[A],j=O[A+1],_=O[A+2];if(O[A+3]!==255)continue;$++;const k=`#${((1<<24)+(T<<16)+(j<<8)+_).toString(16).slice(1).toUpperCase()}`;P.set(k,(P.get(k)||0)+1)}$=Math.max(1,$);const V=Array.from(P.entries()).map(([A,T])=>({hex:A,count:T,percent:T/$*100,hasAlpha:!1,alpha:void 0})).sort((A,T)=>T.count-A.count);n(V),u(new Set)}},C.onerror=()=>{console.error("Failed to load image for color analysis"),a(!1)},C.src=e.imageData}finally{a(!1)}},h=w=>{navigator.clipboard.writeText(w).catch(()=>{console.error("Failed to copy to clipboard")})},g=(w,C)=>{if(!w||w.length===0)return;const v=w.map(E=>C&&E.alpha!==void 0?`${E.hex}${E.alpha.toString(16).toUpperCase().padStart(2,"0")}`:E.hex).join(`
`);h(v)},m=(w,C,L)=>{if(!w||w.length===0)return s.jsx("p",{className:"text-xs text-gray-500 p-2",children:"No colors found"});const v=[],E=Array.from(C).sort((A,T)=>A-T);for(const A of E){const T=w[A];T&&v.push(s.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs hover:bg-gray-700 border-b border-gray-700/50 last:border-b-0 transition-colors",style:{height:`${x.current}px`},children:[s.jsx("div",{className:"w-4 h-4 rounded border border-gray-600 flex-shrink-0",style:{backgroundColor:T.hex},title:T.hex}),s.jsx("span",{className:"font-mono text-gray-300 min-w-fit text-xs",children:T.hex}),T.hasAlpha&&T.alpha!==void 0&&s.jsxs("span",{className:"font-mono text-gray-500 text-xs",children:["",T.alpha.toString(16).toUpperCase().padStart(2,"0")]}),s.jsxs("div",{className:"ml-auto flex items-center gap-1 flex-shrink-0",children:[s.jsx("span",{className:"font-mono text-gray-400 text-xs",children:T.count}),s.jsxs("span",{className:"text-gray-600 text-xs",children:["(",T.percent.toFixed(2),"%)"]})]})]},`${T.hex}-${A}`))}const O=C.size>0?Math.min(...C):0,P=C.size>0?Math.max(...C):0,$=Math.max(0,O)*x.current,V=Math.max(0,w.length-(P+1))*x.current;return s.jsxs("div",{ref:L,className:"max-h-64 overflow-y-auto bg-gray-800/50 rounded border border-gray-700 text-xs",style:{height:"256px"},children:[s.jsx("div",{style:{height:$}}),v,s.jsx("div",{style:{height:V}})]})};return s.jsxs("div",{className:"bg-panel-bg rounded p-3 space-y-2",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-300",children:"Analyze Colors"}),s.jsx("button",{onClick:()=>D(!1),disabled:l,className:"w-full px-3 py-1 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-700 disabled:cursor-not-allowed text-xs font-medium text-blue-400 rounded transition-colors",children:l?"Analyzing...":"Analyze Colors (no transparent pixels)"}),t&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[s.jsxs("span",{children:[t.length," colors (RGB)  ",Math.floor(t.reduce((w,C)=>w+C.count,0))," pixels"]}),s.jsx("button",{onClick:()=>g(t,!1),className:"p-1 text-gray-500 hover:text-gray-300 transition-colors flex-shrink-0",title:"Copy all colors to clipboard",children:s.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[s.jsx("path",{d:"M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2z"}),s.jsx("path",{fillOpacity:"0.5",d:"M2 6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-2h-2v2H2V8h2V6H2z"})]})})]}),m(t,i,f)]}),t&&s.jsx("div",{className:"my-2 border-t border-gray-700"}),s.jsx("button",{onClick:()=>D(!0),disabled:l,className:"w-full px-3 py-1 bg-gray-700 hover:bg-gray-600 disabled:bg-gray-700 disabled:cursor-not-allowed text-xs font-medium text-purple-400 rounded transition-colors",children:l?"Analyzing...":"Analyze Colors (with transparent pixels and alpha channel)"}),r&&s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400",children:[s.jsxs("span",{children:[r.length," colors (RGBA)  ",Math.floor(r.reduce((w,C)=>w+C.count,0))," pixels"]}),s.jsx("button",{onClick:()=>g(r,!0),className:"p-1 text-gray-500 hover:text-gray-300 transition-colors flex-shrink-0",title:"Copy all colors to clipboard",children:s.jsxs("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:[s.jsx("path",{d:"M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2z"}),s.jsx("path",{fillOpacity:"0.5",d:"M2 6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2v-2h-2v2H2V8h2V6H2z"})]})})]}),m(r,c,p)]})]})}const Pa=({isOpen:e,onClose:t,title:n,children:r,initialPosition:o={x:100,y:100},noPadding:l=!1})=>{const[a,i]=S.useState(o),[u,c]=S.useState(!1),[d,f]=S.useState({width:1100,height:900}),[p,x]=S.useState(!1),y=S.useRef(null),N=S.useRef(null);S.useEffect(()=>{const h=m=>{if(u&&y.current){const w=m.clientX-y.current.x,C=m.clientY-y.current.y;i(L=>({x:L.x+w,y:L.y+C})),y.current={x:m.clientX,y:m.clientY}}},g=()=>{c(!1),y.current=null};return u&&(window.addEventListener("mousemove",h),window.addEventListener("mouseup",g)),()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",g)}},[u]);const D=h=>{h.preventDefault(),h.stopPropagation(),x(!0),N.current={x:h.clientX,y:h.clientY,startWidth:d.width,startHeight:d.height}};return S.useEffect(()=>{const h=m=>{if(p&&N.current){const w=m.clientX-N.current.x,C=m.clientY-N.current.y;f({width:Math.max(600,N.current.startWidth+w),height:Math.max(400,N.current.startHeight+C)})}},g=()=>{x(!1),N.current=null};return p&&(window.addEventListener("mousemove",h),window.addEventListener("mouseup",g)),()=>{window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",g)}},[p]),e?s.jsxs("div",{className:"fixed flex flex-col bg-panel-bg border border-border rounded shadow-lg overflow-hidden",style:{left:a.x,top:a.y,zIndex:50,width:`${d.width}px`,height:`${d.height}px`,position:"absolute"},children:[s.jsxs("div",{className:"flex items-center justify-between px-3 py-2 bg-canvas-bg border-b border-border cursor-move select-none",onMouseDown:h=>{c(!0),y.current={x:h.clientX,y:h.clientY}},children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-200",children:n}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-white focus:outline-none p-1 rounded hover:bg-gray-700 transition-colors","aria-label":"Close",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:`${l?"":"p-4"} text-gray-300 ${l?"overflow-hidden":"overflow-auto"} flex-1`,children:typeof r=="function"?r(d):r}),s.jsx("div",{onMouseDown:D,className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize bg-gray-600 hover:bg-gray-500 transition-colors",style:{clipPath:"polygon(100% 0, 100% 100%, 0 100%)"}})]}):null},ph=e=>{const t=e.data,n=new Map;for(let r=0;r<t.length;r+=4){const o=t[r],l=t[r+1],a=t[r+2];if(t[r+3]===255){const u=`#${(16777216+(o<<16)+(l<<8)+a).toString(16).slice(1).toUpperCase()}`;n.has(u)||n.set(u,{r:o,g:l,b:a})}}return n},gh=(e,t,n,r)=>{let o="#000000",l={r:0,g:0,b:0},a=1/0;for(const[i,u]of r){const c=Math.sqrt(Math.pow(e-u.r,2)+Math.pow(t-u.g,2)+Math.pow(n-u.b,2));c<a&&(a=c,o=i,l=u)}return{hex:o,...l}},Ji=(e,t,n=!0)=>new Promise((r,o)=>{try{const l=new Image;l.onload=()=>{try{const a=document.createElement("canvas");a.width=l.width,a.height=l.height;const i=a.getContext("2d");if(!i){o(new Error("Could not get canvas context"));return}i.drawImage(l,0,0);const u=i.getImageData(0,0,a.width,a.height),c=u.data;let d=null;n&&(d=ph(u));for(let f=0;f<c.length;f+=4){const p=c[f+3];if(p!==0)if(p<t)c[f+3]=0;else{if(n&&d&&d.size>0&&p<255){const x=c[f],y=c[f+1],N=c[f+2],D=gh(x,y,N,d);c[f]=D.r,c[f+1]=D.g,c[f+2]=D.b}c[f+3]=255}}i.putImageData(u,0,0),r(a.toDataURL())}catch(a){console.error("Error processing image data:",a),o(a)}},l.onerror=a=>{console.error("Error loading image for processing:",a),o(new Error("Failed to load image"))},l.src=e}catch(l){console.error("Error initiating image processing:",l),o(l)}}),hh=({isOpen:e,onClose:t,layer:n})=>{const[r,o]=S.useState(128),[l,a]=S.useState(null),[i,u]=S.useState(!1),[c,d]=S.useState(1),[f,p]=S.useState(null),[x,y]=S.useState(!0),N=S.useRef(null),D=S.useRef(null),h=b(v=>v.updateLayer);S.useEffect(()=>{if(!e||!n.imageData)return;const v=setTimeout(async()=>{u(!0);try{const E=await Ji(n.imageData,r,!1);a(E)}catch(E){console.error("Failed to apply transparency mask:",E)}finally{u(!1)}},100);return()=>clearTimeout(v)},[r,n.imageData,e]);const g=async()=>{if(n.imageData)try{const v=await Ji(n.imageData,r,x);h(n.id,{imageData:v}),t()}catch(v){console.error("Failed to apply transparency mask with palette reduction:",v)}},m=()=>{d(v=>Math.min(v+.25,3))},w=()=>{d(v=>Math.max(v-.25,.1))},C=()=>{d(1)},L=v=>{const E=v.currentTarget;p({width:E.naturalWidth,height:E.naturalHeight})};return s.jsx(Pa,{isOpen:e,title:"Transparency Mask",onClose:t,children:s.jsxs("div",{className:"flex flex-col h-full p-4 gap-4 text-gray-200",children:[s.jsxs("div",{className:"flex-1 flex flex-col min-h-0 gap-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-sm font-medium",children:"Preview"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:w,disabled:c<=.1,className:"p-1 text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Zoom out",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})})}),s.jsxs("span",{className:"text-xs text-gray-400 min-w-[45px] text-center",children:[Math.round(c*100),"%"]}),s.jsx("button",{onClick:m,disabled:c>=3,className:"p-1 text-gray-400 hover:text-white disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Zoom in",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v6m3-3H7"})})}),s.jsx("button",{onClick:C,className:"text-xs px-2 py-1 text-gray-400 hover:text-white bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Reset zoom",children:"Reset"})]})]}),s.jsxs("div",{ref:N,className:"flex-1 relative w-full bg-gray-900 rounded border border-gray-700 overflow-auto",children:[i&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-10",children:s.jsx("span",{className:"text-white font-medium",children:"Processing..."})}),l?s.jsx("div",{style:{display:"inline-block",padding:"10px"},children:s.jsx("img",{ref:D,src:l,alt:"Preview",onLoad:L,style:{width:f?`${f.width*c}px`:"auto",height:f?`${f.height*c}px`:"auto",transition:"width 0.1s ease-out, height 0.1s ease-out",maxWidth:"none"}})}):s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"text-gray-500",children:"No preview available"})})]})]}),s.jsxs("div",{className:"flex flex-col gap-4 pt-4 border-t border-gray-700",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex justify-between text-sm",children:s.jsxs("label",{htmlFor:"threshold-slider",children:["Mask Threshold: ",r]})}),s.jsx("input",{id:"threshold-slider",type:"range",min:"0",max:"255",value:r,onChange:v=>o(Number(v.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500"}),s.jsx("p",{className:"text-xs text-gray-400",children:"0=Opaque, 255=Transparent"})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{id:"use-template-colors",type:"checkbox",checked:x,onChange:v=>y(v.target.checked),className:"w-4 h-4 rounded bg-gray-700 border-gray-600 accent-blue-500 cursor-pointer"}),s.jsx("label",{htmlFor:"use-template-colors",className:"text-sm text-gray-300 cursor-pointer",children:"Use template colors"})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:t,className:"px-4 py-2 text-sm font-medium text-gray-300 bg-gray-700 rounded hover:bg-gray-600 transition-colors",children:"Cancel"}),s.jsx("button",{onClick:g,disabled:!l||i,className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Apply"})]})]})]})]})})};function mh(e){return new Worker("/PixelConnect/assets/pixelator.worker-BmmIcnHr.js",{name:e==null?void 0:e.name})}const qi=["#FFFFFF","#F4F59F","#FFCA3A","#FF9F1C","#FF595E","#E71D36","#F3BBC2","#FF85A1","#BD637D","#CDB4DB","#6A4C93","#4D194D","#A8D0DC","#2EC4B6","#1A535C","#6D9DCD","#1982C4","#A1C181","#8AC926","#A0A0A0","#6B4226","#505050","#CFD078","#145A7A","#8B1D24","#C07F7A","#C49A6C","#5B7B1C","#000000"],yh=["#000000","#3c3c3c","#787878","#aaaaaa","#d2d2d2","#ffffff","#600018","#a50e1e","#ed1c24","#fa8072","#e45c1a","#ff7f27","#f6aa09","#f9dd3b","#fffabc","#9c8431","#c5ad31","#e8d45f","#4a6b3a","#5a944a","#84c573","#0eb968","#13e67b","#87ff5e","#0c816e","#10aea6","#13e1be","#0f799f","#60f7f2","#bbfaf2","#28509e","#4093e4","#7dc7ff","#4d31b8","#6b50f6","#99b1fb","#4a4284","#7a71c4","#b5aef1","#780c99","#aa38b9","#e09ff9","#cb007a","#ec1f80","#f38da9","#9b5249","#d18078","#fab6a4","#684634","#95682a","#dba463","#7b6352","#9c846b","#d6b594","#d18051","#f8b277","#ffc5a5","#6d643f","#948c6b","#cdc59e","#333941","#6d758d","#b3b9d1"],xh=[{value:"none",label:"None (Nearest Color)"},{value:"floyd-steinberg",label:"Floyd-Steinberg"},{value:"burkes",label:"Burkes"},{value:"stucki",label:"Stucki"},{value:"sierra-2",label:"Sierra-2"},{value:"sierra-lite",label:"Sierra Lite"},{value:"bayer-4x4",label:"Bayer 4x4"},{value:"bayer-8x8",label:"Bayer 8x8"},{value:"halftone-dot",label:"Halftone Dot"},{value:"diagonal-line",label:"Diagonal Line"},{value:"cross-hatch",label:"Cross Hatch"},{value:"grid",label:"Grid"}],eu=[64,100,128,150,200,250,256,300,350,400,450,500,512,550,600,650,700,750,800,850,900,950,1e3],vh=({isOpen:e,onClose:t,layer:n})=>{const r=b(U=>U.updateLayer),[o,l]=S.useState(128),[a,i]=S.useState(128),[u,c]=S.useState("lanczos"),[d,f]=S.useState("none"),[p,x]=S.useState(100),[y,N]=S.useState("geopixels"),[D,h]=S.useState(""),[g,m]=S.useState(null),[w,C]=S.useState(null),[L,v]=S.useState(!1),[E,O]=S.useState(1),[P,$]=S.useState(null),[V,A]=S.useState(!0),[T,j]=S.useState(!1),[_,H]=S.useState(16),[k,I]=S.useState([]),[z,W]=S.useState(8),[X,ie]=S.useState(!1),[ye,ot]=S.useState(!1),[xe,He]=S.useState(!0),[_e,F]=S.useState(new Map),[te,de]=S.useState(null),[ct,Nt]=S.useState(null),[sn,an]=S.useState([]),[Ia,Ld]=S.useState(!1),[Ma,Dd]=S.useState(!0),[tl,Pd]=S.useState(!1),[un,za]=S.useState(0),[cn,Fa]=S.useState(0),[dn,Ra]=S.useState(0),kt=S.useRef(null),Wn=S.useRef(null),Id=S.useRef(null),nl=S.useRef(!1),rl=S.useRef(y),dt=S.useRef(750),Md=U=>{const G=U.data,R=new Map;let K=0;for(let q=0;q<G.length;q+=4){const be=G[q],ft=G[q+1],Vn=G[q+2];if(G[q+3]===0)continue;const _a=`#${((1<<24)+(be<<16)+(ft<<8)+Vn).toString(16).slice(1).toUpperCase()}`;R.set(_a,(R.get(_a)||0)+1),K++}const J=new Map;R.forEach((q,be)=>{J.set(be,{count:q,percent:K>0?q/K*100:0})}),F(J)};S.useEffect(()=>(kt.current=new mh,kt.current&&(kt.current.onmessage=U=>{const{type:G,imageData:R,message:K,suggestions:J,generatedPalette:q}=U.data;if(G==="success"){const be=document.createElement("canvas");be.width=R.width,be.height=R.height;const ft=be.getContext("2d");if(ft){if(ft.putImageData(R,0,0),$({width:R.width,height:R.height}),C({width:R.width,height:R.height}),Ma){const Vn=ll(R.width,R.height);O(Vn)}m(be.toDataURL()),Md(R),an(q||[])}}else G==="suggestions"?(I(J),ie(!1)):(console.error("Pixelator Worker Error:",K),ie(!1));v(!1)}),()=>{var U;(U=kt.current)==null||U.terminate()}),[]),S.useEffect(()=>{const U=localStorage.getItem("pixelator_custom_palette");U&&h(U)},[]),S.useEffect(()=>{if(e&&n.imageData){const U=new Image;U.onload=()=>{i(U.height),l(128)},U.src=n.imageData}},[e,n.imageData]),S.useEffect(()=>{D.trim()&&localStorage.setItem("pixelator_custom_palette",D)},[D]);const Vt=S.useCallback(()=>{if(y==="none")return[];if(y==="geopixels")return qi;if(y==="wplace")return yh;const U=D.trim();let G=[];if(U&&(G=U.split(/[\s,]+/).filter(K=>K.trim()!=="").map(K=>{const J=K.trim();if(/^\d+$/.test(J)){const q=parseInt(J,10);if(q>=0&&q<=16777215)return"#"+q.toString(16).padStart(6,"0").toUpperCase()}return/^#?[0-9A-F]{6}$/i.test(J)?J.startsWith("#")?J.toUpperCase():"#"+J.toUpperCase():null}).filter(K=>K!==null)),y==="custom")return G;if(y==="geopixels+custom"){const R=[...qi];for(const K of G)R.includes(K.toUpperCase())||R.push(K.toUpperCase());return R}return[]},[y,D]);S.useEffect(()=>{rl.current==="none"&&y!=="none"?T?(nl.current=!0,j(!1)):nl.current=!1:rl.current!=="none"&&y==="none"?nl.current&&j(!0):y!=="none"&&T&&j(!1),rl.current=y},[y,T]);const ol=S.useCallback(()=>{if(!kt.current||!n.imageData)return;v(!0);const U=new Image;U.onload=()=>{var ft;const G=document.createElement("canvas");G.width=U.width,G.height=U.height;const R=G.getContext("2d");if(!R)return;R.drawImage(U,0,0);const K=R.getImageData(0,0,U.width,U.height);ot(Od(K));const J=Vt(),q=U.width/U.height,be=Math.round(o*q);(ft=kt.current)==null||ft.postMessage({imageData:K,settings:{targetWidth:be,targetHeight:o,ditherMethod:d,ditherStrength:p,palette:J,resamplingMethod:u,useKmeans:T,kmeansColors:_,brightness:un,contrast:cn,saturation:dn}})},U.src=n.imageData},[n.imageData,o,d,p,Vt,u,T,_,un,cn,dn]);S.useEffect(()=>{if(!e||!xe)return;const U=setTimeout(()=>{ol(),dt.current=750},dt.current);return()=>clearTimeout(U)},[e,xe,o,d,p,y,D,u,T,_,un,cn,dn,ol]);const zd=()=>{g&&w&&(r(n.id,{imageData:g,width:w.width,height:w.height}),t())},ll=S.useCallback((U,G)=>{if(!Wn.current)return 1;const R=Wn.current.clientWidth,K=Wn.current.clientHeight,J=R-40,q=K-40;if(J<=0||q<=0)return 1;const be=J/U,ft=q/G,Vn=Math.min(be,ft);return Math.max(.1,Vn)},[]),Fd=()=>O(U=>Math.min(U+.5,20)),Rd=()=>O(U=>Math.max(U-.5,.5)),_d=()=>O(1),sl=S.useCallback(()=>{P&&O(ll(P.width,P.height))},[P,ll]);S.useEffect(()=>{P&&Wn.current&&(Ia||setTimeout(()=>{sl(),Ld(!0)},50))},[P,Ia,sl]);const Td=()=>l(a),Od=U=>{const G=U.data;for(let R=3;R<G.length;R+=4){const K=G[R];if(K>0&&K<255)return!0}return!1},Ad=U=>{const G=U.currentTarget;$({width:G.naturalWidth,height:G.naturalHeight})},Bd=S.useCallback(()=>{if(!kt.current||!n.imageData)return;if(Vt().length===0){alert("Please select a palette first to find missing colors.");return}ie(!0);const G=new Image;G.onload=()=>{var q;const R=document.createElement("canvas");R.width=G.width,R.height=G.height;const K=R.getContext("2d");if(!K)return;K.drawImage(G,0,0);const J=K.getImageData(0,0,G.width,G.height);(q=kt.current)==null||q.postMessage({type:"suggest",imageData:J,settings:{palette:Vt(),numSuggestions:z}})},G.src=n.imageData},[n.imageData,Vt,z]),$d=()=>{const U=D.trim(),G=k.join(", ");h(U===""?G:`${U}, ${G}`)},Rr=S.useMemo(()=>{let U=Vt();return y==="none"&&T&&sn.length>0&&(U=sn),_e.size===0?U:[...U].sort((G,R)=>{var q,be;const K=((q=_e.get(G))==null?void 0:q.count)||0,J=((be=_e.get(R))==null?void 0:be.count)||0;return K!==J?J-K:0})},[Vt,_e,sn,y,T]),Ud=()=>{Rr.length>0&&navigator.clipboard.writeText(Rr.join(", "))};return s.jsx(Pa,{isOpen:e,title:"Pixelator",onClose:t,noPadding:!0,children:()=>{var U,G;return s.jsxs("div",{className:"flex text-gray-200 h-full w-full overflow-hidden",children:[s.jsxs("div",{className:"w-72 border-r border-gray-700 flex-shrink-0 flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"overflow-y-auto flex-1 p-4 space-y-6 text-gray-200",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Dimensions"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex gap-2 items-end",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"text-xs text-gray-500",children:"Height (px)"}),s.jsx("input",{type:"number",value:o,onChange:R=>l(Number(R.target.value)),className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-1 text-sm"})]}),s.jsxs("select",{className:"flex-1 bg-gray-800 border border-gray-600 rounded px-2 py-1 text-xs text-gray-400",onChange:R=>{R.target.value&&(dt.current=100,l(Number(R.target.value)))},value:eu.includes(o)?o:"",children:[s.jsx("option",{value:"",disabled:!0,children:"common sizes"}),eu.map(R=>s.jsxs("option",{value:R,children:[R,"px"]},R))]}),s.jsx("button",{onClick:Td,className:"text-xs px-2 py-1 text-gray-400 hover:text-white bg-gray-700 hover:bg-gray-600 rounded transition-colors whitespace-nowrap flex-shrink-0",title:"Reset height to default",children:"Reset"})]}),w&&s.jsxs("div",{className:"text-xs text-gray-400 bg-gray-800 px-2 py-1 rounded whitespace-nowrap",children:[w.width,"  ",w.height," ",s.jsx("span",{className:"text-gray-600 mx-1",children:"|"})," ",(w.width*w.height).toLocaleString()," px"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500",children:"Resampling"}),s.jsxs("select",{value:u,onChange:R=>c(R.target.value),className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-1 text-sm",children:[s.jsx("option",{value:"nearest",children:"Nearest Neighbor (Sharp)"}),s.jsx("option",{value:"bilinear",children:"Bilinear (Smooth)"}),s.jsx("option",{value:"lanczos",children:"Lanczos (High Quality)"})]})]})]}),ye&&s.jsxs("div",{className:"bg-yellow-900/30 border border-yellow-700 rounded p-3 flex gap-3",children:[s.jsx("div",{className:"text-yellow-500 text-xl flex-shrink-0",children:""}),s.jsxs("div",{className:"text-xs text-yellow-300",children:[s.jsx("p",{className:"font-semibold mb-1",children:"Semi-transparent pixels detected"}),s.jsx("p",{children:"Apply a transparency mask first for better results"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Palette"}),s.jsxs("div",{className:"group relative",children:[s.jsx("span",{className:"cursor-help text-xs text-blue-400",children:"Fun Fact?"}),s.jsxs("div",{className:"absolute bottom-full right-0 mb-2 w-64 p-2 bg-gray-900 border border-gray-600 rounded shadow-xl text-xs text-gray-300 hidden group-hover:block z-50",children:["If you play on Geopixels, you can export your palette by typing ",s.jsx("code",{className:"text-yellow-400",children:"userData.colors"})," in the browser console. Paste the result here!"]})]})]}),s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"palette",checked:y==="geopixels",onChange:()=>{dt.current=100,N("geopixels")}}),s.jsx("span",{className:"text-sm",children:"Geopixels Base"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"palette",checked:y==="wplace",onChange:()=>{dt.current=100,N("wplace")}}),s.jsx("span",{className:"text-sm",children:"wplace Base"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"palette",checked:y==="custom",onChange:()=>{dt.current=100,N("custom")}}),s.jsx("span",{className:"text-sm",children:"Custom"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"palette",checked:y==="geopixels+custom",onChange:()=>{dt.current=100,N("geopixels+custom")}}),s.jsx("span",{className:"text-sm",children:"Geopixels Base + Custom"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"radio",name:"palette",checked:y==="none",onChange:()=>{dt.current=100,N("none")}}),s.jsx("span",{className:"text-sm",children:"No Recoloring (Resize Only)"})]})]}),(y==="custom"||y==="geopixels+custom")&&s.jsx("textarea",{value:D,onChange:R=>h(R.target.value),placeholder:"#FFFFFF, #000000 or 16777215, 0",className:"w-full h-24 bg-gray-800 border border-gray-600 rounded p-2 text-xs font-mono"}),s.jsxs("div",{className:"border-t border-gray-700 pt-2",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("button",{onClick:()=>A(!V),className:"flex items-center text-xs text-gray-400 hover:text-gray-300",children:[s.jsx("span",{children:"Palette Preview"}),s.jsx("span",{className:"ml-1",children:V?"":""})]}),s.jsx("button",{onClick:Ud,className:"text-gray-400 hover:text-white p-1 rounded hover:bg-gray-700",title:"Copy palette to clipboard",children:s.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m2 4h3a2 2 0 012 2v3m-3-3V5a2 2 0 012-2h3.071a2 2 0 011.414.586l1.414 1.414A2 2 0 0118 6.414V9m-3-3h3"})})})]}),V&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex flex-wrap gap-0 bg-gray-900 p-1 rounded border border-gray-700",children:Rr.length>0?Rr.map((R,K)=>s.jsx("div",{className:"w-4 h-4 cursor-crosshair hover:z-10 hover:scale-125 transition-transform duration-75 border border-transparent hover:border-white",style:{backgroundColor:R},onMouseEnter:J=>{de(R),Nt({x:J.clientX,y:J.clientY})},onMouseLeave:()=>{de(null),Nt(null)},onMouseMove:J=>{Nt({x:J.clientX,y:J.clientY})}},K)):s.jsx("div",{className:"text-xs text-gray-500 p-2",children:"No palette selected"})}),te&&ct&&s.jsxs("div",{style:{position:"fixed",left:ct.x+15,top:ct.y+15,zIndex:9999,pointerEvents:"none"},className:"bg-gray-900 border border-gray-600 rounded p-2 shadow-xl text-xs min-w-[120px]",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1 pb-1 border-b border-gray-700",children:[s.jsx("div",{className:"w-3 h-3 border border-gray-500",style:{backgroundColor:te}}),s.jsx("span",{className:"font-mono font-bold text-white",children:te})]}),_e.has(te)?s.jsxs("div",{className:"text-gray-300 space-y-0.5",children:[s.jsxs("div",{className:"flex justify-between gap-4",children:[s.jsx("span",{children:"Count:"}),s.jsx("span",{className:"text-white font-mono",children:(U=_e.get(te))==null?void 0:U.count.toLocaleString()})]}),s.jsxs("div",{className:"flex justify-between gap-4",children:[s.jsx("span",{children:"Usage:"}),s.jsxs("span",{className:"text-white font-mono",children:[(G=_e.get(te))==null?void 0:G.percent.toFixed(2),"%"]})]})]}):s.jsx("div",{className:"text-gray-500 italic",children:"Not used in preview"})]}),(y==="custom"||y==="geopixels+custom")&&s.jsxs("div",{className:"space-y-2 border-t border-gray-700 pt-2",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase whitespace-nowrap",children:"Suggest Colors"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"number",min:"1",max:"32",value:z,onChange:R=>W(Math.max(1,Math.min(32,Number(R.target.value)))),className:"w-12 bg-gray-800 border border-gray-600 rounded px-1 py-0.5 text-xs text-center",title:"Number of colors to suggest"}),s.jsx("button",{onClick:Bd,disabled:X,className:"px-3 py-1 bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white text-xs rounded transition-colors",children:X?"...":"Go"})]})]}),k.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex flex-wrap gap-1 bg-gray-900 p-2 rounded border border-gray-700",children:k.map((R,K)=>s.jsx("div",{className:"w-8 h-8 rounded border border-gray-500 cursor-pointer hover:border-white",style:{backgroundColor:R},title:`${R} - Click to copy`,onClick:()=>{navigator.clipboard.writeText(R)}},K))}),s.jsx("button",{onClick:$d,className:"w-full px-2 py-1 bg-gray-700 hover:bg-gray-600 text-white text-xs rounded transition-colors",children:"Add to Custom Palette"})]}),s.jsx("p",{className:"text-xs text-gray-500",children:"Analyzes the image to find dominant colors missing from your palette."})]})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Dithering"}),s.jsx("select",{value:d,onChange:R=>{dt.current=100,f(R.target.value)},className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-1 text-sm",children:xh.map(R=>s.jsx("option",{value:R.value,children:R.label},R.value))}),d!=="none"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Strength"}),s.jsxs("span",{children:[p,"%"]})]}),s.jsx("input",{type:"range",min:"0",max:"100",value:p,onChange:R=>x(Number(R.target.value)),className:"w-full"})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"group relative inline-block w-full",children:[s.jsxs("label",{className:`flex items-center space-x-2 ${y!=="none"?"cursor-not-allowed opacity-50":"cursor-pointer"}`,children:[s.jsx("input",{type:"checkbox",checked:T,onChange:R=>j(R.target.checked),disabled:y!=="none"}),s.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase",children:"K-Means Color Reduction"})]}),y!=="none"&&s.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-64 p-2 bg-gray-900 border border-gray-600 rounded shadow-xl text-xs text-gray-300 hidden group-hover:block z-50",children:`K-Means is only available when "No Recoloring" is selected. It's used to reduce the color space when you're not providing a specific palette.`})]}),T&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-500",children:"Number of Colors"}),s.jsx("input",{type:"number",min:"2",max:"256",value:_,onChange:R=>H(Number(R.target.value)),className:"w-full bg-gray-800 border border-gray-600 rounded px-2 py-1 text-sm"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Reduces image to N dominant colors before applying palette/dithering."})]})]}),s.jsxs("div",{className:"space-y-2 border-t border-gray-700 pt-2",children:[s.jsxs("button",{onClick:()=>Pd(!tl),className:"flex items-center justify-between w-full text-xs font-semibold text-gray-400 hover:text-gray-300 uppercase",children:[s.jsx("span",{children:"Extra Features"}),s.jsx("span",{children:tl?"":""})]}),tl&&s.jsxs("div",{className:"space-y-3 pt-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Brightness"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:un}),s.jsx("button",{onClick:()=>za(0),className:"text-gray-500 hover:text-white disabled:opacity-0 transition-opacity",title:"Reset Brightness",disabled:un===0,children:""})]})]}),s.jsx("input",{type:"range",min:"-100",max:"100",value:un,onChange:R=>za(Number(R.target.value)),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Contrast"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:cn}),s.jsx("button",{onClick:()=>Fa(0),className:"text-gray-500 hover:text-white disabled:opacity-0 transition-opacity",title:"Reset Contrast",disabled:cn===0,children:""})]})]}),s.jsx("input",{type:"range",min:"-100",max:"100",value:cn,onChange:R=>Fa(Number(R.target.value)),className:"w-full"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsx("span",{children:"Saturation"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:dn}),s.jsx("button",{onClick:()=>Ra(0),className:"text-gray-500 hover:text-white disabled:opacity-0 transition-opacity",title:"Reset Saturation",disabled:dn===0,children:""})]})]}),s.jsx("input",{type:"range",min:"-100",max:"100",value:dn,onChange:R=>Ra(Number(R.target.value)),className:"w-full"})]})]})]})]}),!xe&&s.jsx("div",{className:"p-4 border-t border-gray-700 bg-gray-800/30 flex-shrink-0",children:s.jsxs("button",{onClick:ol,className:"w-full bg-green-600 hover:bg-green-500 text-white py-2 rounded font-semibold transition-colors flex items-center justify-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Execute"})]})})]}),s.jsxs("div",{className:"flex-1 bg-gray-900 relative overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-800/50 border-b border-gray-700 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xs text-gray-400",children:"Preview"}),s.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:xe,onChange:R=>He(R.target.checked),className:"rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-blue-500 focus:ring-offset-gray-800"}),s.jsx("span",{className:"text-xs text-gray-400 select-none",children:"Auto-update"})]}),s.jsxs("label",{className:"flex items-center gap-1 cursor-pointer",title:"Always fit preview to screen",children:[s.jsx("input",{type:"checkbox",checked:Ma,onChange:R=>Dd(R.target.checked),className:"rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-blue-500 focus:ring-offset-gray-800"}),s.jsx("span",{className:"text-xs text-gray-400 select-none",children:"Pin Fit"})]})]}),s.jsxs("div",{className:"flex space-x-2 items-center",children:[s.jsx("button",{onClick:Rd,className:"bg-gray-700 p-1 rounded hover:bg-gray-600 text-sm font-bold",title:"Zoom out",children:""}),s.jsxs("span",{className:"bg-gray-700 px-2 py-1 rounded text-sm font-mono min-w-[50px] text-center",children:[Math.round(E*100),"%"]}),s.jsx("button",{onClick:Fd,className:"bg-gray-700 p-1 rounded hover:bg-gray-600 text-sm font-bold",title:"Zoom in",children:"+"}),s.jsx("button",{onClick:sl,className:"bg-gray-700 px-2 py-1 rounded hover:bg-gray-600 text-xs",title:"Fit to screen",children:"Fit"}),s.jsx("button",{onClick:_d,className:"bg-gray-700 px-2 py-1 rounded hover:bg-gray-600 text-xs",title:"Reset zoom",children:"Reset"})]})]}),L&&s.jsx("div",{className:"absolute top-14 right-4 z-20 pointer-events-none",children:s.jsxs("div",{className:"bg-gray-900/90 border border-gray-700 text-gray-200 text-xs px-3 py-1.5 rounded shadow-lg flex items-center gap-2",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),"Generating..."]})}),s.jsx("div",{ref:Wn,className:"flex-1 overflow-auto bg-gray-900",children:g?s.jsx("div",{style:{display:"inline-block",padding:"20px"},children:s.jsx("img",{ref:Id,src:g,alt:"Preview",onLoad:Ad,style:{width:P?`${P.width*E}px`:"auto",height:P?`${P.height*E}px`:"auto",maxWidth:"none",imageRendering:"pixelated"}})}):s.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-gray-500",children:"Click Execute to generate preview"})}),s.jsx("div",{className:"px-4 py-3 bg-gray-800/50 border-t border-gray-700 flex-shrink-0",children:s.jsx("button",{onClick:zd,disabled:!g,className:"w-full bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white py-2 rounded font-semibold transition-colors",children:"Apply Pixelation"})})]})]})}})};function wh(){const e=b(c=>c.project),t=b(c=>c.selectedLayerIds),n=e.layers.filter(c=>t.includes(c.id)),[r,o]=S.useState(!1),[l,a]=S.useState(!1),[i,u]=S.useState(!1);return s.jsxs("div",{className:"h-full flex flex-col bg-canvas-bg overflow-hidden",children:[s.jsx("div",{className:"px-3 py-3 border-b border-border",children:s.jsx("h2",{className:"text-sm font-semibold text-gray-300",children:"Properties"})}),s.jsx("div",{className:"flex-1 overflow-y-auto",children:t.length===0?s.jsxs("div",{className:"p-4 text-center text-sm text-gray-500",children:[s.jsx("div",{className:"mb-2",children:"No layer selected"}),s.jsx("div",{className:"text-xs",children:"Select a layer to edit properties"})]}):s.jsxs("div",{className:"p-3 space-y-4",children:[s.jsxs("div",{className:"bg-panel-bg rounded p-2 text-xs text-gray-400",children:[s.jsx("div",{className:"font-semibold text-gray-300 mb-1",children:"Selected"}),n.map(c=>s.jsx("div",{className:"truncate",children:c.name},c.id))]}),t.length===1&&n.length>0&&s.jsx(ih,{layer:n[0]}),t.length===1&&n.length>0&&s.jsx(uh,{layer:n[0]}),t.length===1&&n.length>0&&s.jsx(fh,{layer:n[0]}),t.length===1&&n.length>0&&s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-300 mb-2",children:"Actions"}),s.jsxs("button",{onClick:()=>o(!r),className:"w-full px-3 py-2 bg-slate-700 hover:bg-slate-600 text-white text-xs rounded transition-colors flex justify-between items-center",children:[s.jsx("span",{children:"Modify..."}),s.jsx("span",{className:"text-[10px]",children:""})]}),r&&s.jsxs("div",{className:"absolute left-0 top-full mt-1 w-full bg-panel-bg border border-border rounded shadow-lg z-20",children:[s.jsx("button",{onClick:()=>{a(!0),o(!1)},className:"w-full text-left px-3 py-2 text-xs text-gray-300 hover:bg-slate-700 hover:text-white",children:"Transparency Masking"}),s.jsx("button",{onClick:()=>{u(!0),o(!1)},className:"w-full text-left px-3 py-2 text-xs text-gray-300 hover:bg-slate-700 hover:text-white",children:"Pixelator"})]})]}),t.length===1&&n.length>0&&s.jsx(hh,{isOpen:l,onClose:()=>a(!1),layer:n[0]}),t.length===1&&n.length>0&&s.jsx(vh,{isOpen:i,onClose:()=>u(!1),layer:n[0]}),t.length>1&&s.jsx(jh,{})]})}),s.jsx("div",{className:"border-t border-border",children:s.jsx(dh,{})})]})}function jh(){const e=b(r=>r.moveSelectedLayers),t=b(r=>r.selectedLayerIds),n=(r,o)=>{console.log(`[DEBUG] Moving ${t.length} layers by (${r}, ${o})`),e(r,o)};return s.jsxs("div",{className:"bg-panel-bg rounded p-3 space-y-3",children:[s.jsx("div",{className:"text-xs font-semibold text-gray-300",children:"Move Selected"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Offset X"}),s.jsx("input",{type:"number",defaultValue:0,onKeyDown:r=>{if(r.key==="Enter"){const o=parseInt(r.target.value)||0;n(o,0),r.target.value="0"}},className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"Pixels"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs text-gray-400 block mb-1",children:"Offset Y"}),s.jsx("input",{type:"number",defaultValue:0,onKeyDown:r=>{if(r.key==="Enter"){const o=parseInt(r.target.value)||0;n(0,o),r.target.value="0"}},className:"w-full px-2 py-1 bg-canvas-bg border border-border rounded text-xs text-white focus:outline-none focus:ring-1 focus:ring-blue-400",placeholder:"Pixels"})]})]}),s.jsxs("div",{className:"flex gap-1 text-xs",children:[s.jsx("button",{onClick:()=>n(-1,0),className:"flex-1 px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Move left 1px (Shift+)",children:""}),s.jsx("button",{onClick:()=>n(1,0),className:"flex-1 px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Move right 1px (Shift+)",children:""}),s.jsx("button",{onClick:()=>n(0,-1),className:"flex-1 px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Move up 1px (Shift+)",children:""}),s.jsx("button",{onClick:()=>n(0,1),className:"flex-1 px-2 py-1 bg-gray-700 hover:bg-gray-600 rounded transition-colors",title:"Move down 1px (Shift+)",children:""})]})]})}function Sh(){const e=b(i=>i.project.viewport),t=b(i=>i.setViewport),n=[25,50,100,200,400,800,1600,3200],r=i=>{t({zoom:i})},o=()=>{const i=e.zoom,u=n.find(c=>c>i)||n[n.length-1];r(u)},l=()=>{const i=e.zoom,u=[...n].reverse().find(c=>c<i)||n[0];r(u)},a=()=>{t({zoom:100,panX:0,panY:0})};return s.jsxs("div",{className:"flex items-center gap-2 bg-canvas-bg rounded px-2 py-1",children:[s.jsx("button",{onClick:l,className:"px-2 py-1 text-sm font-medium text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700 rounded transition-colors",title:"Zoom Out",children:""}),s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{className:"px-3 py-1 text-sm font-medium text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700 rounded transition-colors min-w-16 text-right",title:"Click to select zoom level",children:[e.zoom,"%"]}),s.jsx("div",{className:"absolute right-0 mt-1 w-24 bg-panel-bg border border-border rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:n.map(i=>s.jsxs("button",{onClick:()=>r(i),className:`w-full text-left px-3 py-1 text-sm transition-colors ${e.zoom===i?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:[i,"%"]},i))})]}),s.jsx("button",{onClick:o,className:"px-2 py-1 text-sm font-medium text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700 rounded transition-colors",title:"Zoom In",children:"+"}),s.jsx("div",{className:"w-px h-4 bg-border"}),s.jsx("button",{onClick:a,className:"px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-300 hover:bg-gray-700 rounded transition-colors",title:"Reset zoom to 100% and center canvas",children:"Reset"})]})}function Nh(){const e=S.useRef(null),[t,n]=S.useState(1),r=b(f=>f.project),o=b(f=>f.resetProject),l=b(f=>f.loadProject),a=b(f=>f.markClean);S.useEffect(()=>{const f=p=>{var y;const x=p.ctrlKey||p.metaKey;x&&p.key==="s"&&(p.preventDefault(),i()),x&&p.key==="o"&&(p.preventDefault(),(y=e.current)==null||y.click())};return window.addEventListener("keydown",f),()=>window.removeEventListener("keydown",f)},[r]);const i=async()=>{try{const f=Sd(r),p=new Blob([f],{type:"application/json"}),x=URL.createObjectURL(p),y=document.createElement("a");y.href=x,y.download=`${r.projectName||"untitled"}.pixcomp`,document.body.appendChild(y),y.click(),document.body.removeChild(y),URL.revokeObjectURL(x),a(),alert(`Project saved: ${y.download}`)}catch(f){console.error("[DEBUG] Save project failed:",f),alert(`Error saving project: ${f instanceof Error?f.message:"Unknown error"}`)}},u=async f=>{var x;const p=(x=f.target.files)==null?void 0:x[0];if(!p){console.warn("[DEBUG] No file selected for loading");return}try{const y=await p.text(),N=await La(y);l(N),a(),alert(`Project loaded: ${p.name}`)}catch(y){console.error("[DEBUG] Load project failed:",y),alert(`Error loading project: ${y instanceof Error?y.message:"Unknown error"}`)}finally{e.current&&(e.current.value="")}},c=()=>{b.getState().isDirty&&!window.confirm("You have unsaved changes. Create new project anyway?")||o()},d=async()=>{try{const f=await eh(r.layers,r.canvas.width,r.canvas.height,t,r.canvas.backgroundColor),p=URL.createObjectURL(f),x=document.createElement("a");x.href=p,x.download=`${r.projectName||"composite"}_${t}x.png`,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(p),alert(`PNG exported: ${x.download}`)}catch(f){console.error("[DEBUG] Export PNG failed:",f),alert(`Error exporting PNG: ${f instanceof Error?f.message:"Unknown error"}`)}};return s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:c,className:"px-3 py-1 text-sm font-medium text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700 rounded transition-colors",title:"New project",children:"New"}),s.jsx("button",{onClick:i,className:"px-3 py-1 text-sm font-medium text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700 rounded transition-colors",title:"Save project as .pixcomp file (Ctrl+S)",children:"Save"}),s.jsx("button",{onClick:()=>{var f;return(f=e.current)==null?void 0:f.click()},className:"px-3 py-1 text-sm font-medium text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700 rounded transition-colors",title:"Load project from .pixcomp file (Ctrl+O)",children:"Load"}),s.jsx("button",{onClick:d,className:"px-3 py-1 text-sm font-medium text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700 rounded transition-colors",title:"Export canvas as PNG",children:"Export"}),s.jsxs("div",{className:"relative group",children:[s.jsxs("button",{className:"px-2 py-1 text-xs font-medium text-gray-400 hover:text-gray-300 bg-panel-bg hover:bg-gray-700 rounded transition-colors opacity-0 group-hover:opacity-100",title:"Export scale",children:[t,"x"]}),s.jsx("div",{className:"absolute right-0 mt-1 w-16 bg-panel-bg border border-border rounded shadow-lg opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all z-50",children:[1,2,4,8].map(f=>s.jsxs("button",{onClick:()=>{n(f)},className:`w-full text-left px-2 py-1 text-xs transition-colors ${t===f?"bg-blue-600 text-white":"text-gray-300 hover:text-white hover:bg-gray-700"}`,children:[f,"x"]},f))})]}),s.jsx("input",{ref:e,type:"file",accept:".pixcomp,.json",onChange:u,className:"hidden"})]})}function kh(){const e=b(i=>i.history),t=b(i=>i.undo),n=b(i=>i.redo),r=e.past.length>0,o=e.future.length>0,l=()=>{t()},a=()=>{n()};return s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:l,disabled:!r,className:`px-3 py-1 text-sm font-medium rounded transition-colors ${r?"text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700":"text-gray-600 bg-panel-bg cursor-not-allowed opacity-50"}`,title:`Undo (${e.past.length} operation${e.past.length!==1?"s":""} available) - Ctrl+Z`,children:""}),s.jsx("button",{onClick:a,disabled:!o,className:`px-3 py-1 text-sm font-medium rounded transition-colors ${o?"text-gray-300 hover:text-white bg-panel-bg hover:bg-gray-700":"text-gray-600 bg-panel-bg cursor-not-allowed opacity-50"}`,title:`Redo (${e.future.length} operation${e.future.length!==1?"s":""} available) - Ctrl+Shift+Z`,children:""})]})}function Ch(){const e=b(o=>o.project.grid.enabled),t=b(o=>o.project.grid.density),n=b(o=>o.toggleGrid),r=b(o=>o.setGridDensity);return S.useEffect(()=>{const o=el();o.gridEnabled=e,o.gridDensity=t,Da(o)},[e,t]),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("button",{onClick:n,className:`px-3 py-1 text-sm font-medium rounded transition-colors ${e?"bg-gray-600 text-white hover:bg-gray-500":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,title:"Toggle pixel grid (shows lines between pixels)",children:"Grid"}),e&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("label",{className:"text-xs text-gray-400",children:"Density:"}),s.jsx("input",{type:"range",min:"1",max:"8",value:t,onChange:o=>r(parseInt(o.target.value)),className:"w-24 h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer",title:`Grid density: every ${t} pixel(s)`}),s.jsx("span",{className:"text-xs text-gray-400 w-6",children:t})]})]})}function bh(){const e=b(p=>p.project),t=b(p=>p.setProjectName),n=b(p=>p.ui.showSelectionBorders),r=b(p=>p.toggleSelectionBorders),o=b(p=>p.ui.selectionBorderAnimationSpeed),l=b(p=>p.setSelectionBorderAnimationSpeed),[a,i]=S.useState(!1),[u,c]=S.useState(e.projectName);S.useEffect(()=>{const p=el();p.showSelectionBorders=n,p.selectionBorderAnimationSpeed=o,Da(p)},[n,o]);const d=()=>{u.trim()?t(u.trim()):c(e.projectName),i(!1)},f=p=>{p.key==="Enter"?d():p.key==="Escape"&&(c(e.projectName),i(!1))};return s.jsxs("div",{className:"h-16 bg-panel-bg border-b border-border flex items-center justify-between px-4 gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0 max-w-xs",children:[s.jsxs("div",{className:"text-lg font-semibold whitespace-nowrap",children:[s.jsx("span",{className:"text-red-500",children:"Pixel"}),s.jsx("span",{className:"text-sky-400",children:"Connect"})]}),s.jsx("div",{className:"text-gray-500",children:"|"}),a?s.jsx("input",{autoFocus:!0,type:"text",value:u,onChange:p=>c(p.target.value),onBlur:d,onKeyDown:f,className:"flex-1 px-2 py-1 bg-canvas-bg border border-blue-500 rounded text-sm text-white focus:outline-none focus:ring-2 focus:ring-blue-400",placeholder:"Project name..."}):s.jsx("button",{onClick:()=>{c(e.projectName),i(!0)},className:"flex-1 text-left px-2 py-1 text-gray-300 hover:text-white hover:bg-canvas-bg rounded transition-colors truncate",title:"Click to rename project",children:e.projectName})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Nh,{}),s.jsx("div",{className:"w-px h-6 bg-border"}),s.jsx(kh,{}),s.jsx("div",{className:"w-px h-6 bg-border"}),s.jsx(Ch,{}),s.jsx("div",{className:"w-px h-6 bg-border"}),s.jsx("button",{onClick:r,title:n?"Hide selection borders":"Show selection borders",className:`px-3 py-1 rounded transition-colors text-sm font-medium ${n?"bg-gray-600 text-white hover:bg-gray-500":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:"Borders"}),n&&s.jsxs("div",{className:"flex items-center gap-2 pl-2",children:[s.jsx("label",{className:"text-xs text-gray-400 whitespace-nowrap",children:"Speed:"}),s.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:o,onChange:p=>l(parseFloat(p.target.value)),className:"w-24 h-1 bg-gray-700 rounded-lg appearance-none cursor-pointer",title:"Border animation speed (0 = static, 1 = max speed)"})]})]}),s.jsx("div",{className:"flex items-center gap-2 ml-auto",children:s.jsx(Sh,{})})]})}function Eh({isOpen:e,onClose:t}){const n=b(c=>c.history),r=b(c=>c.project),[o,l]=S.useState(null);if(!e)return null;const a=c=>`${c.projectName} | ${c.layers.length} layer(s) | Modified: ${new Date(c.modified).toLocaleTimeString()}`,i=(c,d)=>{const f=[];c.layers.length!==d.layers.length&&f.push(`Layer count: ${c.layers.length}  ${d.layers.length}`);for(let p=0;p<Math.max(c.layers.length,d.layers.length);p++){const x=c.layers[p],y=d.layers[p];x?y?(x.x!==y.x||x.y!==y.y||x.width!==y.width||x.height!==y.height)&&f.push(`${x.name}: (${x.x}, ${x.y})  (${y.x}, ${y.y})`):f.push(`Layer ${p}: added (${x.name})`):f.push(`Layer ${p}: removed`)}return f.length>0?f:["No layer changes"]},u=c=>{c.key==="Escape"&&t()};return s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",onClick:t,onKeyDown:u,role:"dialog","aria-modal":"true","aria-label":"Debug History Modal",tabIndex:0,children:s.jsxs("div",{className:"bg-slate-900 border border-slate-700 rounded-lg shadow-2xl w-full max-w-2xl max-h-[80vh] flex flex-col",onClick:c=>c.stopPropagation(),children:[s.jsxs("div",{className:"bg-slate-800 px-6 py-4 border-b border-slate-700 flex justify-between items-center",children:[s.jsxs("h2",{className:"text-lg font-semibold text-white flex items-center gap-2",children:[s.jsx("span",{className:"text-yellow-400",children:""}),"Debug History"]}),s.jsx("button",{onClick:t,className:"text-slate-400 hover:text-white transition-colors","aria-label":"Close debug menu",children:""})]}),s.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"flex-1 overflow-auto p-4 space-y-2",children:[s.jsxs("div",{className:"bg-slate-800 rounded p-3 border border-slate-700 sticky top-0",children:[s.jsx("div",{className:"text-sm font-semibold text-cyan-400 mb-1",children:"Current State"}),s.jsx("div",{className:"text-xs text-slate-300",children:a(r)})]}),n.past.length===0&&n.future.length===0?s.jsx("div",{className:"text-center text-slate-400 py-8",children:s.jsx("p",{className:"text-sm",children:"No history entries yet"})}):s.jsxs(s.Fragment,{children:[n.past.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-semibold text-green-400 mb-2 px-1",children:["UNDO STACK (",n.past.length,")"]}),s.jsx("div",{className:"space-y-1",children:n.past.map((c,d)=>s.jsxs("div",{children:[s.jsx("button",{onClick:()=>l(o===`past-${d}`?null:`past-${d}`),className:"w-full text-left bg-slate-800 hover:bg-slate-700 rounded px-3 py-2 text-xs transition-colors border border-slate-700 hover:border-slate-600",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-green-400",children:""}),s.jsx("span",{className:"text-slate-300 flex-1",children:a(c)}),s.jsx("span",{className:"text-slate-500",children:o===`past-${d}`?"":""})]})}),o===`past-${d}`&&s.jsx("div",{className:"bg-slate-800/50 border-l-2 border-green-400 ml-4 mt-1 p-2 rounded text-xs text-slate-300 space-y-1",children:i(n.past[d+1]||r,c).map((f,p)=>s.jsxs("div",{className:"text-slate-400",children:[" ",f]},p))})]},`past-${d}`))})]}),n.future.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"text-xs font-semibold text-blue-400 mb-2 px-1 mt-4",children:["REDO STACK (",n.future.length,")"]}),s.jsx("div",{className:"space-y-1",children:n.future.map((c,d)=>s.jsxs("div",{children:[s.jsx("button",{onClick:()=>l(o===`future-${d}`?null:`future-${d}`),className:"w-full text-left bg-slate-800 hover:bg-slate-700 rounded px-3 py-2 text-xs transition-colors border border-slate-700 hover:border-slate-600",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-blue-400",children:""}),s.jsx("span",{className:"text-slate-300 flex-1",children:a(c)}),s.jsx("span",{className:"text-slate-500",children:o===`future-${d}`?"":""})]})}),o===`future-${d}`&&s.jsx("div",{className:"bg-slate-800/50 border-l-2 border-blue-400 ml-4 mt-1 p-2 rounded text-xs text-slate-300 space-y-1",children:i(r,c).map((f,p)=>s.jsxs("div",{className:"text-slate-400",children:[" ",f]},p))})]},`future-${d}`))})]})]})]}),s.jsxs("div",{className:"bg-slate-800 px-6 py-3 border-t border-slate-700 text-xs text-slate-400",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsxs("span",{children:["Stack size: ",n.past.length+n.future.length]}),s.jsxs("span",{children:["Max steps: ",n.maxSteps]})]}),s.jsx("div",{className:"text-slate-500 text-xs mt-1",children:"Press ESC or click overlay to close"})]})]})]})})}const pn="__text_canvas_preview__",Lh=({isOpen:e,onClose:t,existingLayer:n})=>{const r=b(F=>F.addLayer),o=b(F=>F.updateLayer),l=b(F=>F.removeLayer);b(F=>F.project.layers);const[a,i]=S.useState("Enter your text here"),[u,c]=S.useState(48),[d,f]=S.useState(Ms[0].value),[p,x]=S.useState("#FFCDD2"),[y,N]=S.useState("left"),[D,h]=S.useState(null),[g,m]=S.useState(!1),[w,C]=S.useState(""),[L,v]=S.useState(!1),[E,O]=S.useState(!1),[P,$]=S.useState(!0),[V,A]=S.useState(1.2),[T,j]=S.useState(0),[_,H]=S.useState("normal"),k=S.useRef(null),I=S.useRef(null),z=S.useRef(!0);S.useEffect(()=>{n&&n.textContent!==void 0&&(i(n.textContent),c(n.fontSize||48),f(n.fontFamily||Ms[0].value),x(n.fontColor||"#FFCDD2"),N(n.textAlign||"left"),$(n.disableTransparency||!1),A(n.lineHeight||1.2),j(n.letterSpacing||0),H(n.fontWeight||"normal"),z.current=n.visible)},[n]),S.useEffect(()=>{a.trim()&&W()},[a,u,d,p,y,P,V,T,_]),S.useEffect(()=>{if(E&&a.trim()&&D){if(n){const te=b.getState().project.layers.find(de=>de.id===n.id);te&&te.visible&&o(n.id,{visible:!1})}X()}else ie()},[E,D,a]),S.useEffect(()=>{e||ie()},[e]),S.useEffect(()=>{const F=te=>{k.current&&!k.current.contains(te.target)&&v(!1)};return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]);const W=async()=>{if(a.trim()){m(!0);try{const F=await Qi({text:a,fontSize:u,fontFamily:d,color:p,textAlign:y,lineHeight:V,disableTransparency:P,letterSpacing:T,fontWeight:_});h(F.dataUrl)}catch(F){console.error("Failed to generate text preview:",F)}finally{m(!1)}}},X=()=>{!D||!E||(I.current!==null&&clearTimeout(I.current),I.current=window.setTimeout(()=>{b.getState().project.layers.find(de=>de.id===pn);const te=new Image;te.src=D,te.onload=()=>{const ct=b.getState().project.layers.find(an=>an.id===pn),Nt=n?n.x:0,sn=n?n.y:0;if(ct)o(pn,{imageData:D,width:te.naturalWidth,height:te.naturalHeight,opacity:.7,x:Nt,y:sn});else if(E){const an={id:pn,name:" Canvas Preview (Temporary)",imageData:D,x:Nt,y:sn,zIndex:Date.now()+1e6,visible:!0,locked:!0,opacity:.7,width:te.naturalWidth,height:te.naturalHeight};r(an)}}},50))},ie=()=>{I.current!==null&&(clearTimeout(I.current),I.current=null);const F=b.getState().project.layers;if(F.find(de=>de.id===pn)&&l(pn),n){const de=F.find(ct=>ct.id===n.id);de&&!de.visible&&o(n.id,{visible:!0})}},ye=async()=>{if(!a.trim()){alert("Please enter some text");return}m(!0);try{const F=await Qi({text:a,fontSize:u,fontFamily:d,color:p,textAlign:y,lineHeight:V,disableTransparency:P,letterSpacing:T,fontWeight:_});if(n)o(n.id,{imageData:F.dataUrl,width:F.width,height:F.height,textContent:a,fontSize:u,fontFamily:d,fontColor:p,textAlign:y,disableTransparency:P,name:n.name,...V!==1.2&&{lineHeight:V},...T!==0&&{letterSpacing:T},..._!=="normal"&&{fontWeight:_}});else{const te={id:crypto.randomUUID(),name:`Text: ${a.substring(0,20)}${a.length>20?"...":""}`,imageData:F.dataUrl,x:0,y:0,zIndex:Date.now(),visible:!0,locked:!1,opacity:1,width:F.width,height:F.height,textContent:a,fontSize:u,fontFamily:d,fontColor:p,textAlign:y,disableTransparency:P,...V!==1.2&&{lineHeight:V},...T!==0&&{letterSpacing:T},..._!=="normal"&&{fontWeight:_}};r(te)}ie(),t()}catch(F){console.error("Failed to create text layer:",F),alert("Failed to create text layer. Please try again.")}finally{m(!1)}},ot=zs.filter(F=>F.name.toLowerCase().includes(w.toLowerCase())),xe=ot.filter(F=>F.category==="system"),He=ot.filter(F=>F.category==="google"),_e=zs.find(F=>F.value===d);return s.jsx(Pa,{isOpen:e,onClose:t,title:n?"Edit Text Layer":"Create Text Layer",noPadding:!0,children:s.jsxs("div",{className:"flex text-gray-200 h-full w-full overflow-hidden",children:[s.jsxs("div",{className:"w-80 border-r border-gray-700 flex-shrink-0 flex flex-col overflow-hidden bg-gray-800",children:[s.jsxs("div",{className:"overflow-y-auto flex-1 p-4 space-y-5",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Content"}),s.jsxs("span",{className:"text-xs text-gray-500",children:[a.length," chars"]})]}),s.jsx("textarea",{value:a,onChange:F=>i(F.target.value),placeholder:"Enter text...",className:"w-full h-20 px-3 py-2 bg-gray-900 border border-gray-600 rounded text-white text-sm resize-none focus:outline-none focus:ring-1 focus:ring-blue-500"}),s.jsx("button",{onClick:()=>navigator.clipboard.writeText(a),disabled:!a.trim(),className:"w-full py-1 text-xs text-gray-400 hover:text-white bg-gray-700 hover:bg-gray-600 rounded transition-colors",children:"Copy Text"})]}),s.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-3",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Typography"}),s.jsxs("div",{className:"relative",ref:k,children:[s.jsxs("button",{onClick:()=>v(!L),className:"w-full px-3 py-1.5 bg-gray-900 border border-gray-600 rounded text-white text-sm text-left flex items-center justify-between hover:bg-gray-700",children:[s.jsx("span",{className:"truncate",children:(_e==null?void 0:_e.name)||"Arial"}),s.jsx("span",{className:"text-gray-500 text-xs",children:""})]}),L&&s.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-gray-800 border border-gray-600 rounded shadow-xl z-50 max-h-60 overflow-y-auto",children:[s.jsx("div",{className:"p-2 sticky top-0 bg-gray-800 border-b border-gray-700",children:s.jsx("input",{type:"text",value:w,onChange:F=>C(F.target.value),placeholder:"Search...",className:"w-full px-2 py-1 bg-gray-900 border border-gray-600 rounded text-white text-xs focus:outline-none focus:border-blue-500",onClick:F=>F.stopPropagation(),autoFocus:!0})}),xe.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"px-2 py-1 text-[10px] font-bold text-gray-500 uppercase bg-gray-800/50",children:"System"}),xe.map(F=>s.jsx("button",{onClick:()=>{f(F.value),v(!1),C("")},className:`w-full px-3 py-1.5 text-left text-sm hover:bg-blue-600 hover:text-white ${d===F.value?"bg-blue-600 text-white":"text-gray-300"}`,style:{fontFamily:F.value},children:F.name},F.value))]}),He.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"px-2 py-1 text-[10px] font-bold text-gray-500 uppercase bg-gray-800/50 border-t border-gray-700",children:"Google Fonts"}),He.map(F=>s.jsx("button",{onClick:()=>{f(F.value),v(!1),C("")},className:`w-full px-3 py-1.5 text-left text-sm hover:bg-blue-600 hover:text-white ${d===F.value?"bg-blue-600 text-white":"text-gray-300"}`,style:{fontFamily:F.value},children:F.name},F.value))]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] text-gray-500 mb-1 block",children:"Size"}),s.jsx("input",{type:"number",value:u,onChange:F=>c(Math.max(8,Math.min(2e3,parseInt(F.target.value)||48))),className:"w-full px-2 py-1 bg-gray-900 border border-gray-600 rounded text-white text-sm"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] text-gray-500 mb-1 block",children:"Weight"}),s.jsxs("select",{value:_,onChange:F=>H(F.target.value),className:"w-full px-2 py-1 bg-gray-900 border border-gray-600 rounded text-white text-sm",children:[s.jsx("option",{value:"lighter",children:"Light"}),s.jsx("option",{value:"normal",children:"Normal"}),s.jsx("option",{value:"bold",children:"Bold"})]})]})]}),s.jsx("div",{className:"flex flex-wrap gap-1",children:[16,24,32,48,64,96].map(F=>s.jsx("button",{onClick:()=>c(F),className:`px-2 py-0.5 rounded text-[10px] border transition-colors ${u===F?"bg-blue-600 border-blue-500 text-white":"bg-gray-700 border-gray-600 text-gray-400 hover:bg-gray-600 hover:text-gray-200"}`,children:F},F))})]}),s.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-3",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Appearance"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"color",value:p,onChange:F=>x(F.target.value),className:"w-8 h-8 rounded cursor-pointer bg-transparent border-0 p-0"}),s.jsx("input",{type:"text",value:p,onChange:F=>x(F.target.value),className:"flex-1 px-2 py-1 bg-gray-900 border border-gray-600 rounded text-white text-sm font-mono uppercase"})]}),s.jsx("div",{className:"space-y-1",children:[["#FFFFFF","#E0E0E0","#C0C0C0","#A0A0A0","#808080","#606060","#404040","#202020","#000000"],["#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828","#B71C1C"],["#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00","#E65100"],["#FFF9C4","#FFF59D","#FFF176","#FFEE58","#FFEB3B","#FDD835","#FBC02D","#F9A825","#F57F17"],["#C8E6C9","#A5D6A7","#81C784","#66BB6A","#4CAF50","#43A047","#388E3C","#2E7D32","#1B5E20"],["#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F","#006064"],["#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0","#0D47A1"],["#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A","#4A148C"],["#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457","#880E4F"]].map((F,te)=>s.jsx("div",{className:"flex gap-1",children:F.map(de=>s.jsx("button",{onClick:()=>x(de),className:`flex-1 aspect-square rounded-sm border ${p===de?"border-white scale-110 z-10":"border-gray-600 hover:border-gray-400"}`,style:{backgroundColor:de},title:de},de))},te))}),s.jsxs("div",{children:[s.jsx("label",{className:"text-[10px] text-gray-500 mb-1 block",children:"Alignment"}),s.jsx("div",{className:"bg-gray-900 rounded border border-gray-600 p-0.5 flex",children:["left","center","right"].map(F=>s.jsx("button",{onClick:()=>N(F),className:`flex-1 py-1 rounded text-xs capitalize ${y===F?"bg-gray-700 text-white shadow-sm":"text-gray-400 hover:text-gray-300"}`,title:`Align ${F}`,children:F},F))})]})]}),s.jsxs("div",{className:"space-y-3 border-t border-gray-700 pt-3",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Spacing"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 mb-1",children:[s.jsx("span",{children:"Line Height"}),s.jsx("span",{children:V.toFixed(1)})]}),s.jsx("input",{type:"range",min:"0.8",max:"2.0",step:"0.1",value:V,onChange:F=>A(parseFloat(F.target.value)),className:"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between text-[10px] text-gray-500 mb-1",children:[s.jsx("span",{children:"Letter Spacing"}),s.jsxs("span",{children:[T,"px"]})]}),s.jsx("input",{type:"range",min:"-5",max:"10",step:"0.5",value:T,onChange:F=>j(parseFloat(F.target.value)),className:"w-full h-1 bg-gray-600 rounded-lg appearance-none cursor-pointer"})]})]})]}),s.jsx("div",{className:"pt-2",children:s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-300 cursor-pointer hover:text-white select-none",children:[s.jsx("input",{type:"checkbox",checked:P,onChange:F=>$(F.target.checked),className:"rounded bg-gray-700 border-gray-600 text-blue-600 focus:ring-offset-gray-800"}),s.jsx("span",{children:"Pixel Perfect (No AA)"})]})})]}),s.jsx("div",{className:"p-4 border-t border-gray-700 bg-gray-800/50",children:s.jsx("button",{onClick:ye,disabled:g||!a.trim(),className:"w-full py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-gray-700 disabled:text-gray-500 rounded text-white font-semibold transition-colors text-sm",children:n?"Update Layer":"Create Layer"})})]}),s.jsxs("div",{className:"flex-1 bg-gray-900 relative flex flex-col min-w-0",children:[s.jsxs("div",{className:"h-10 border-b border-gray-700 flex items-center justify-between px-4 bg-gray-800/30",children:[s.jsx("span",{className:"text-xs font-semibold text-gray-400 uppercase",children:"Preview"}),s.jsxs("label",{className:"flex items-center gap-2 text-xs text-gray-400 cursor-pointer hover:text-gray-200 select-none",children:[s.jsx("input",{type:"checkbox",checked:E,onChange:F=>O(F.target.checked),className:"rounded bg-gray-700 border-gray-600 text-blue-600 focus:ring-offset-gray-800"}),s.jsx("span",{children:"Show on Canvas"})]})]}),s.jsx("div",{className:"flex-1 overflow-auto flex items-center justify-center p-8 bg-[url('/grid-pattern.png')] bg-repeat",children:g?s.jsxs("div",{className:"flex items-center gap-2 text-gray-400 text-sm",children:[s.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),"Rendering..."]}):D?s.jsx("div",{className:"relative",children:s.jsx("img",{src:D,alt:"Text preview",className:"max-w-full max-h-full object-contain",style:{imageRendering:"pixelated"}})}):s.jsx("div",{className:"text-gray-600 text-sm italic",children:"Enter text to generate preview"})})]})]})})};function Dh(){const e=b(m=>m.project),t=b(m=>m.selectedLayerIds),n=b(m=>m.selectAllLayers),r=b(m=>m.deselectAllLayers),o=b(m=>m.deleteSelectedLayers),l=b(m=>m.moveSelectedLayers),a=b(m=>m.setViewport),i=b(m=>m.undo),u=b(m=>m.redo),c=b(m=>m.copySelectedLayers),d=b(m=>m.pasteSelectedLayers),f=b(m=>m.reorderSelectedLayers),p=S.useRef(!1),x=S.useRef(0),y=S.useRef(0),N=S.useRef(new Set),D=S.useRef(null),h=()=>{D.current===null&&t.length!==0&&(D.current=window.setInterval(()=>{let m=0,w=0;const C={ArrowUp:[0,-1],ArrowDown:[0,1],ArrowLeft:[-1,0],ArrowRight:[1,0]};for(const[L,[v,E]]of Object.entries(C))N.current.has(L)&&(m+=v,w+=E);(N.current.has("ShiftLeft")||N.current.has("ShiftRight"))&&(m*=10,w*=10),(m!==0||w!==0)&&l(m,w)},50))},g=()=>{D.current!==null&&(clearInterval(D.current),D.current=null)};S.useEffect(()=>{const m=v=>{if((v.target instanceof HTMLInputElement||v.target instanceof HTMLTextAreaElement)&&!((v.ctrlKey||v.metaKey)&&(v.key==="s"||v.key==="o")))return;const E=v.ctrlKey||v.metaKey,O=v.shiftKey;if(v.code==="Space"&&!v.repeat){v.preventDefault(),p.current=!0;return}if(O&&!E&&(v.key==="ArrowUp"||v.key==="ArrowDown")){if(t.length>0){v.preventDefault();const P=v.key==="ArrowUp"?"up":"down";f(P)}return}if(!O&&["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].includes(v.key)){v.preventDefault(),N.current.add(v.key),(N.current.has("ShiftLeft")||N.current.has("ShiftRight"))&&N.current.add("ShiftLeft"),h();return}if(v.key==="Shift"){N.current.add(v.code);return}if(E&&v.key.toLowerCase()==="z"&&!O){v.preventDefault(),i();return}if(E&&v.key.toLowerCase()==="z"&&O){v.preventDefault(),u();return}if(E&&v.key.toLowerCase()==="y"){v.preventDefault(),u();return}if(v.key==="Delete"||v.key==="Backspace"){t.length>0&&(v.preventDefault(),window.confirm(`Delete ${t.length} layer${t.length!==1?"s":""}?`)&&o());return}if(E&&v.key==="a"){v.preventDefault(),e.layers.length>0&&n();return}if(E&&v.key==="d"){v.preventDefault(),r();return}if(E&&v.key==="c"){t.length>0&&(v.preventDefault(),c());return}if(E&&v.key==="v"){v.preventDefault(),b.getState().ui.clipboardLayers.length>0?d():console.warn("[DEBUG] Paste triggered but clipboard is empty");return}if((v.key==="+"||v.key==="=")&&!E){v.preventDefault();const P=e.viewport.zoom,$=[25,50,100,200,400,800,1600],V=$.find(A=>A>P)||$[$.length-1];a({zoom:V});return}if(v.key==="-"&&!E){v.preventDefault();const P=e.viewport.zoom,$=[25,50,100,200,400,800,1600],V=[...$].reverse().find(A=>A<P)||$[0];a({zoom:V});return}if(v.key==="0"){v.preventDefault(),a({zoom:100});return}},w=v=>{v.code==="Space"&&(p.current=!1),N.current.delete(v.key),N.current.delete(v.code),["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"].some(O=>N.current.has(O))||g()},C=v=>{p.current&&(x.current=v.clientX,y.current=v.clientY)},L=v=>{if(p.current&&(v.buttons&1)===1){const E=v.clientX-x.current,O=v.clientY-y.current,P=e.viewport.zoom/100,$=-E/P,V=-O/P;a({panX:e.viewport.panX+$,panY:e.viewport.panY+V}),x.current=v.clientX,y.current=v.clientY}};return window.addEventListener("keydown",m),window.addEventListener("keyup",w),window.addEventListener("mousedown",C),window.addEventListener("mousemove",L),()=>{window.removeEventListener("keydown",m),window.removeEventListener("keyup",w),window.removeEventListener("mousedown",C),window.removeEventListener("mousemove",L),g()}},[t,e,n,r,o,l,a,i,u,c,d,f])}function tu(e){const{viewport:t,...n}=e;return n}function Ph(){const e=b(l=>l.project),t=b(l=>l.pushHistory),n=b(l=>l._lastHistoryPushAt),r=S.useRef(e),o=S.useRef(null);S.useEffect(()=>{o.current&&clearTimeout(o.current);const l=tu(e),a=tu(r.current);if(JSON.stringify(l)!==JSON.stringify(a)){if(n&&Date.now()-n<100){r.current=e;return}o.current=setTimeout(()=>{t(),r.current=e},500)}return()=>{o.current&&clearTimeout(o.current)}},[e,t,n])}function Ih(){const[e,t]=S.useState(!1);return S.useEffect(()=>{const n=r=>{(r.ctrlKey||r.metaKey)&&r.shiftKey&&r.key==="D"&&(r.preventDefault(),t(o=>!o))};return window.addEventListener("keydown",n),()=>window.removeEventListener("keydown",n)},[]),{isOpen:e,setIsOpen:t,toggle:()=>t(n=>!n)}}const Mh="PixelConnectDB",Bn="projects",bd="current_project",zh=1,Ed=()=>new Promise((e,t)=>{const n=indexedDB.open(Mh,zh);n.onerror=()=>t(n.error),n.onsuccess=()=>e(n.result),n.onupgradeneeded=r=>{const o=r.target.result;o.objectStoreNames.contains(Bn)||o.createObjectStore(Bn)}}),Fh=async e=>{try{const t=await Ed(),n=Sd(e);return new Promise((r,o)=>{const i=t.transaction(Bn,"readwrite").objectStore(Bn).put(n,bd);i.onsuccess=()=>r(),i.onerror=()=>o(i.error)})}catch(t){console.error("Failed to save to cache:",t)}},Rh=async()=>{try{const e=await Ed();return new Promise((t,n)=>{const l=e.transaction(Bn,"readonly").objectStore(Bn).get(bd);l.onsuccess=async()=>{const a=l.result;if(a)try{const i=await La(a);t(i)}catch(i){n(i)}else t(null)},l.onerror=()=>n(l.error)})}catch(e){return console.error("Failed to load from cache:",e),null}},_h=2e3;function Th(){const e=b(o=>o.project),t=b(o=>o.loadProject),n=S.useRef(),r=S.useRef(!1);S.useEffect(()=>{(async()=>{if(!r.current)try{const l=await Rh();l&&(console.log("[AutoSave] Restoring cached project..."),t(l))}catch(l){console.error("[AutoSave] Failed to restore project:",l)}finally{r.current=!0}})()},[t]),S.useEffect(()=>{if(r.current)return n.current&&clearTimeout(n.current),n.current=setTimeout(()=>{Fh(e)},_h),()=>{n.current&&clearTimeout(n.current)}},[e])}function Oh(){const e=b(d=>d.project),t=b(d=>d.isDirty),[n,r]=S.useState(!1),[o,l]=S.useState(void 0);ch(),Dh(),Ph(),Th();const{isOpen:a,setIsOpen:i}=Ih(),u=d=>{l(d),r(!0)},c=()=>{r(!1),l(void 0)};return S.useEffect(()=>(window.openTextLayerModal=u,()=>{delete window.openTextLayerModal}),[]),S.useEffect(()=>{const d=f=>{t&&(f.preventDefault(),f.returnValue="",console.warn("[DEBUG] Unsaved changes detected - warning user before closing"))};return window.addEventListener("beforeunload",d),()=>window.removeEventListener("beforeunload",d)},[t]),S.useEffect(()=>{const d=t?` ${e.projectName} - PixelConnect`:`${e.projectName} - PixelConnect`;document.title=d},[e.projectName,t]),s.jsxs("div",{className:"h-screen flex flex-col bg-canvas-bg text-white overflow-hidden",children:[s.jsx(bh,{}),s.jsxs("div",{className:"flex flex-1 gap-0 overflow-hidden",children:[s.jsx("div",{className:"w-64 border-r border-border overflow-hidden flex flex-col",children:s.jsx(ah,{})}),s.jsx("div",{className:"flex-1 overflow-hidden",children:s.jsx(th,{})}),s.jsx("div",{className:"w-64 border-l border-border overflow-hidden flex flex-col",children:s.jsx(wh,{})})]}),s.jsx(Eh,{isOpen:a,onClose:()=>i(!1)}),s.jsx(Lh,{isOpen:n,onClose:c,existingLayer:o})]})}Ol.createRoot(document.getElementById("root")).render(s.jsx(pu.StrictMode,{children:s.jsx(Oh,{})}));
//# sourceMappingURL=index-DSSvlOYM.js.map
